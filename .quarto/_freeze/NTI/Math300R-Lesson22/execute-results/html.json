{
  "hash": "3d9691073c7b4e5ccec493d8717505d3",
  "result": {
    "markdown": "---\ntitle: \"Math 300R NTI Lesson 22\"\nsubtitle: \"DAGs, noise, and simulation\"\nauthor: \"Prof. Danny Kaplan\"\ndate: \"October 14, 2022\"\noutput:\n  html_document:\n    theme: lumen\n    toc: yes\n    toc_float: yes\n    css: NTI.css\n  pdf_document:\n    toc: yes\n---\n\n\n\n\n## Objectives\n\n\n\n\n\n\n\n\n22.1 Implement on the computer a procedure to generate a sample, calculate a regression model, and produce a summary.\n\n22.2 Iterate the procedure and collect the summaries across iterations. This collection is called the \"sampling distribution.\"\n\n22.3 Graphically display the distribution of summaries and generate a compact numerical description (\"confidence interval\") of the sampling distribution.\n\n\n\n## Reading\n\nTBD\n\n\n## Lesson\n\nIn the lesson, establish\n\n::: {.callout-tip icon=false}\n## Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mosaic)\nlibrary(math300)\n```\n:::\n\n:::\n\n\n:::: {.callout-note icon=false}\n## Example: A simple DAG\n\nWe'll work with a simple example: `dag01`\n\n1. Give `dag01` as a command to view the DAG. Draw it as a diagram.\n\n2. Based on `dag01`, what should be the coefficients on the regression model `y ~ x`.\n\n3. Generate simulated data with `nrow=25` and find the regression coefficients.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSample <- sample(dag01, size=25)\nlm(y ~ x, data = Sample) %>% coefficients()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(Intercept)           x \n   4.325925    1.465439 \n```\n:::\n:::\n\n\nInference task: Given a report like the one above, say what the coefficient on `x` is likely to be in the underlying data generation mechanism.\n\n::: {.callout-important icon=false}\n## Activity\n- How would you represent \"is likely to be\"?\n- Take your best guess and report your representation. \n:::\n::::\n\n\n::: {.callout-note icon=false}\n## Automating the procedure\n\nIn the previous example, we \n\ni. generated (simulated) data, \nii. used it to build a regression model, \niii. summarized it\n\nTo automate the procedure, put all the steps in one block of code, surrounded by curly braces.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproc01 <- function() {\n  lm(y ~ x, data = sample(dag01, size=25)) %>% coefficients()\n}\nproc01()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(Intercept)           x \n   4.087719    1.441555 \n```\n:::\n:::\n\n\nNow that the procedure is automated, we can see what happens if we carry out many trials:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTrials <- do(100) * proc01()\n```\n:::\n\n\n::: {.callout-important icon=false}\n## Activity: Simulating the sampling distribution\n\n1. Generate the 100 trials. each involving a simple of size $n=25$ from `dag01`. The `x` column gives the regression coefficient on the simulation's `x` variable `x` for each of the 100 trials.\n\n2. Summarize the `x` coefficient in the trials, graphically and numerically.\n\n3. Compare the distribution of `x` in `Trials` to the corresponding coefficient in `dag01`.\n:::\n\nQuestion: How does the sampling distribution change if the sample size in each trial is changed to $n=100$ from $n=25$?\n\n\n\n\n\n## Learning Checks\n\n\n\n\n\n\n\n\n\n## 22.1 (**Obj 20.3**)\n\nConsider these three data frames:\n\n::: {.cell}\n\n```{.r .cell-code}\nOne <- sample(dag01, size=25)\nTwo <- do(10) * {\n  lm(y ~ x, data = sample(dag01, size=25)) %>%\n    coefficients()\n  }\nThree <- Two %>% \n  summarize(mx = mean(x), sx = sd(x))\n```\n:::\n\n1. Both `One` and `Two` have columns called `x`, but they stand for different things. Explain what the unit of observation is and what the values in `x` represent..\n2. `Three` does not have a column named `x`, but it is a summary of the `x` column from `Two`. What kind of summary.\n\n::: {.callout-tip}\n## Solution\n\n1. In `One`, the `x` column contains the simulated of the `x` variable from `dag01`. The unit of observation is a single case, for instance a person for whom observations were made of `x` and `y`. The simulation involves generating 25 rows of data: one row for each of 25 people.\n2. In `Two`, the `x` column is the regression coefficient on `x` from the simulation. Each row of `Two` corresponds to one trial in which regression is being performed on a sample of size 25 of simulated data from `dag01`. \n3. `Three` is a summary of the 10 trials in `Two`. The columns, named `mx` and `sx`, tell about the distribution of `x` across all the trials. \n:::\n\n\n--------\n\n\n\n\n## Documenting software\n\n  * File creation date: 2022-10-14\n  * R version 4.2.1 (2022-06-23)\n  * `tidyverse` package version: 1.3.2\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}