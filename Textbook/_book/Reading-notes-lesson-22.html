<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Danny Kaplan">
<meta name="dcterms.date" content="2022-11-16">

<title>Lessons in Statistical Thinking - 4&nbsp; Sampling variation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Reading-notes-lesson-23.html" rel="next">
<link href="./Reading-notes-lesson-21.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Sampling variation</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Lessons in Statistical Thinking</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preliminaries</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-notes-lesson-19.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Statistical thinking</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-notes-lesson-20.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Measuring and simulating variation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-notes-lesson-21.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Signal and noise</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-notes-lesson-22.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Sampling variation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-notes-lesson-23.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Estimating sampling variation from a single sample</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-notes-lesson-24.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Effect size</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sampling-variation" id="toc-sampling-variation" class="nav-link active" data-scroll-target="#sampling-variation"> <span class="header-section-number">4.1</span> Sampling variation</a></li>
  <li><a href="#measuring-sampling-variation" id="toc-measuring-sampling-variation" class="nav-link" data-scroll-target="#measuring-sampling-variation"> <span class="header-section-number">4.2</span> Measuring sampling variation</a></li>
  <li><a href="#the-se-depends-on-sample-size" id="toc-the-se-depends-on-sample-size" class="nav-link" data-scroll-target="#the-se-depends-on-sample-size"> <span class="header-section-number">4.3</span> The SE depends on sample size</a></li>
  <li><a href="#the-confidence-interval" id="toc-the-confidence-interval" class="nav-link" data-scroll-target="#the-confidence-interval"> <span class="header-section-number">4.4</span> The confidence interval</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Sampling variation</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Danny Kaplan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 16, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>There are many sources of noise in data; every variable has its own story, part of which is noise from measurement error, recording blunders, etc. Economists use national statistics, like GDP, even though the definition is arbitrary (a Hurricane can raise GDP!) and early reports are invariably corrected a few months later. Historians go back to original documents, but inevitably many of the documents have been lost or destroyed: a source of noise. Even in elections, where you would think counting is straightforward, the voters’ intentions are measured imperfectly due to “hanging chads,” “butterfly ballots,” broken voting machines, spoiled ballots, and so on.</p>
<p>The statistical thinker is well advised to know about the sources of noise in the system she is studying. Your analysis of data will be better the more you know about how measurements are made and data collected.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Noise in hiring
</div>
</div>
<div class="callout-body-container callout-body">
<p>The author has on several occasions testified in legal hearings as a statistical expert. In one case, the US Department of Labor had audited the records of a contractor with several hundred employees and high turnover. The records led the Department to bring suit against the contractor for discriminating against Hispanics, and open-and-shut case. How so? The hiring records showed that many Hispanics applied for jobs but none of them was hired.</p>
<p>As the statistical expert, I was asked to review the findings from the Department of Labor. The lawyers thought they were asking me to check the arithmetic. As a statistical thinker, I know that the arithmetic is only part of the story. You also have to investigate the data. Although I had the spreadsheets to work from, I asked to be given the complete files on all applicants and hires the previous year.</p>
<p>Here’s what happened. There were indeed many Hispanic applicants, as shown both by the spreadsheet files and the paper job applications. And the spreadsheets showed no hires of Hispanics. But often the data on the job application form wasn’t consistent with the data on hires. It turned out that whenever an applicant was hired, the contractor (per regulation) got a report on that person from the state police. But the report returned by the state police had only two available race/ethnicities: white and Black. The personnel office in the contractor filled in the hired-worker spreadsheet based on the state police report. So all the Hispanic applicants who were hired had been transformed into white or Black by the state police. Noise.</p>
</div>
</div>
<section id="sampling-variation" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="sampling-variation"><span class="header-section-number">4.1</span> Sampling variation</h2>
<p>There is one source of noise that is so common across many settings that every statistical thinker needs to be intimately familiar with. This is called “<strong>sampling variation</strong>.”</p>
<p>We’ve been using “sample” as a near synonym for “data frame.” But that’s not completely fair. Often, data frames contain a row for each and every “item” of relevance. For instance, the Department of Labor never suggested that the contractor in the previous example had left out some of the applicants. Such a complete enumeration—the inventory records of a merchant, the records kept of student grades by the school registrar—has a technical name: a “<strong>census</strong>.” Famously, many countries have a regular census of the population—every 10 years in the US or the UK or China—in which (they try to) reach out to every resident.</p>
<p>But there are many settings where it is unfeasible to collect data in the form of a census. The records will be incomplete and therefore constitute a “<strong>sample</strong>.” Sampling is called for when we want to find out about a large group but don’t have the resources—time, energy, money—to contact every member of the group. France, in order to collect up-to-date data while staying within a budget, runs a “rolling census” where samples are made at short time intervals. It’s estimated that the French rolling census ultimately reaches 70% of the population.</p>
<p>Sometimes, as in quality control in manufacturing, the measurement process is destructive: the item is consumed in the process of measurement. Then, of course, it would be pointless to make a measurement of every single item. A sample will have to do.</p>
<p>Collecting a reliable sample is usually a lot of work. One idealization is called a “simple random sample” (SRS) where all of the items are available, but only some are selected, at random, to be recorded as data. The work comes from having to assemble all of the items. Making a SRS calls for first assembling a “sampling frame,” which is essentially a census. If a census is unfeasible, the construction of a perfect sampling frame is hardly less so.</p>
<p>Professional work, such as the collection of unemployment data, often requires government-level resources and draws on specialized statistical techniques such as stratified sampling and weighting of the results. We won’t cover the specialized techniques in this introductory course, even though they are very important in creating representative samples. If you’re interested in seeing what’s involved, you can get an idea by scrolling through the table of contents of a classic text, William Cochran’s <a href="https://ia801409.us.archive.org/35/items/Cochran1977SamplingTechniques_201703/Cochran_1977_Sampling%20Techniques.pdf"><em>Sampling techniques</em></a></p>
<p>All statistical thinkers, whether expert in sampling techniques or not, should be aware of factors that can bias a sample away from being representative. <strong>Non-response bias</strong> can be significant, even overwhelming, in surveys. In political polls, many (most?) people will not respond to the questions. If this non-response stems from, for example, an expectation that the response will be unpopular, then the poll sample won’t adequately reflect unpopular opinions.</p>
<p><strong>Survival bias</strong> is an important consideration in many settings. An example is given by the <code>mosaicData::TenMileRace</code> data. This records the running times of 8636 participants in a 10-mile road race held in 2005 and includes information about the runner, such as his or her age. You might think that such data could tell you about changes in running performance as people age: the data frame includes runners from age 10 to 87. But a model of running time as a function of age from this data frame is seriously biased. The reason? As people age, casual runners tend to drop out of such races. So the older runners are skewed toward higher performance. (We can see this by taking a different approach to the sample: collecting data over multiple years and tracking individual runners as they age.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Examples: Returned to base
</div>
</div>
<div class="callout-body-container callout-body">
<p>An inspiring story about dealing with survival bias comes from a World War II study of the damage sustained by bombers due to enemy guns. The sample, by necessity, included only those bombers that survived the mission and returned to base. The shell holes in those surviving bombers were not representative of where shells hit the planes, they were only representative of shell hits that did not prevent the plane from returning. The study report, <a href="https://apps.dtic.mil/sti/pdfs/ADA091073.pdf">available here</a>, is a tribute the the work and ingenuity needed to deal with issues such as survival bias. The report itself doesn’t contain any diagram showing where shells it the bombers, but a hypothetical diagram on <a href="https://en.wikipedia.org/wiki/Survivorship_bias">Wikipedia</a> conveys the idea.</p>
<p><img src="www/bomber-holes.png" class="img-fluid"></p>
</div>
</div>
<p>The shell holes on the surviving planes were clustered in certain areas. The clustering stems from survivor bias. Planes that were it in the areas, such as the middle of the wings, the cockpit, the engines, and the back of the fusalage did not return to base. Consequently, those shell hits were never recorded.</p>
</section>
<section id="measuring-sampling-variation" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="measuring-sampling-variation"><span class="header-section-number">4.2</span> Measuring sampling variation</h2>
<p>We start the process of learning about sampling variation on the training ground. That is, we’ll use simulations from DAGs even though our ultimate goal is to work with real data. DAGs are a convenient training tool because the data generated is always a simple random sample and we can generate any number of samples of any size we wish. In the spirit of starting simply, we’ll return to <code>dag01</code> which, you may remember, has the structure <span class="math inline">\(\mathtt{x}\longrightarrow\mathtt{y}\)</span> and the causal formula <code>y ~ 4 + 1.5 * x + eps(x)</code>.</p>
<p>It’s crucial to remember that sampling variation is not about the row-to-row variation in a single sample, it is about the variation in the summary from one sample to another. So our initial process for exploring sampling variation will be to carry out many trials, each of which is a summary of a sample.</p>
<p>::: {.callout-warning} ## Samples and specimens</p>
<p>To illustrate, here is one trial using a sample of size <span class="math inline">\(n=25\)</span>. There are many ways to summarize a sample, here we will use <code>y ~ 1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>) </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Sample <span class="sc">%&gt;%</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) 
   3.928023 </code></pre>
</div>
</div>
<p>We can’t see sampling variation directly in the above result because there is only one trial. To see sampling variation directly, we need to run <em>many</em> trials. In each trial, a new sample (of size <span class="math inline">\(n=25\)</span> is taken and summarized.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="ot">&lt;-</span> <span class="fu">do</span>(<span class="dv">100</span>) <span class="sc">*</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  Sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>) </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  Sample <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coefficients</span>()</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>Trials</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Intercept
1    4.199875
2    3.817843
3    4.510713
4    3.734723
5    4.239279
6    4.116032
7    3.626492
8    3.745319
9    4.298532
10   4.104179
11   3.950145
12   4.132146
13   4.007944
14   3.775330
15   3.999737
16   3.534516
17   3.941521
18   3.549225
19   3.899203
20   4.436699
21   4.039248
22   3.896074
23   3.795834
24   4.106192
25   3.493857
26   3.969599
27   3.902611
28   3.986890
29   3.810399
30   3.485495
31   4.092823
32   4.559235
33   3.742683
34   3.482938
35   4.324149
36   3.879057
37   4.235532
38   4.266414
39   3.913059
40   4.402609
41   4.145027
42   4.185490
43   4.125238
44   3.728135
45   3.733025
46   3.682608
47   4.032067
48   3.711723
49   3.700979
50   4.237847
51   4.511106
52   3.949393
53   3.868491
54   3.925727
55   4.342317
56   4.036528
57   3.504173
58   3.523165
59   3.579379
60   3.896941
61   3.253011
62   4.605904
63   3.530294
64   4.203356
65   4.069098
66   4.106359
67   4.424720
68   3.802443
69   3.719274
70   3.927286
71   4.394132
72   3.954937
73   3.787975
74   4.595992
75   4.174882
76   3.515858
77   4.187859
78   3.751202
79   3.789112
80   4.147821
81   4.345657
82   3.645454
83   4.141770
84   4.400095
85   4.268064
86   3.871160
87   4.079240
88   3.749730
89   4.378494
90   4.262415
91   4.496611
92   3.924040
93   3.926052
94   4.038813
95   4.377791
96   4.453000
97   4.210344
98   4.329442
99   3.950655
100  4.049530</code></pre>
</div>
</div>
<p><code>Trials</code> is a <em>sample of summaries</em>. In <code>Trials</code>, the sampling variation can indeed be seen in the row-to-row variation in the data frame, but only because the data frame is a summary of samples. Since it is hard to read columns of numbers, we will <em>summarize</em> the variation in the <em>sample of summaries</em>.</p>
<p>As always, our standard measure of variation is the standard deviation (or, equivalently, variance):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sIntercept =</span> <span class="fu">sd</span>(Intercept))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sIntercept
1  0.2988593</code></pre>
</div>
</div>
<p>This quantity, which is the standard deviation of a sample of summaries, has a technical name in statistics: the <strong>standard error</strong>. The words <strong>standard error</strong> should properly be followed by a description of the summary and the size of the individual samples involved. Here it would be, “0.348 is the standard error of the Intercept coefficient from a sample of size 25.</p>
<p>The standard error is an ordinary standard deviation, but in a particular context: the standard deviation of a sample of summaries. This can be confusing, since “error” and “deviation” are somewhat synonomous in everyday language. It can be hard to remember when to use “error” and when to use “deviation.” Fortunately, it’s more common to use another way to present the information about sampling variation.</p>
</section>
<section id="the-se-depends-on-sample-size" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="the-se-depends-on-sample-size"><span class="header-section-number">4.3</span> The SE depends on sample size</h2>
<p>We found an SE of 0.348 on the Intercept in a sample of size <span class="math inline">\(n=25\)</span>. Does the SE depend on the sample size. We can find out by trying it for several different sample sizes, say, 25, 100, 400, 1600, 6400, 25600, 102400. We picked these particular numbers to be multiples of 4 times the previous sample size.</p>
<p>Here’s the SE for a sample of size 400:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="ot">&lt;-</span> <span class="fu">do</span>(<span class="dv">100</span>) <span class="sc">*</span> {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  Sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>) </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  Sample <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coefficients</span>()</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>Trials <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">se =</span> <span class="fu">sd</span>(Intercept))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         se
1 0.3674418</code></pre>
</div>
</div>
<p>You can try it yourself for the other sample sizes. Here’s what we got, running 1000 trials in each instance:</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>SE  <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> n </th>
   <th style="text-align:right;"> se </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 0.3600 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 100 </td>
   <td style="text-align:right;"> 0.1900 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 400 </td>
   <td style="text-align:right;"> 0.0910 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1600 </td>
   <td style="text-align:right;"> 0.0430 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 6400 </td>
   <td style="text-align:right;"> 0.0230 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 25600 </td>
   <td style="text-align:right;"> 0.0110 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 102400 </td>
   <td style="text-align:right;"> 0.0056 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>There’s a pattern here. Every time we double <span class="math inline">\(n\)</span>, the standard error goes down by a factor of 2, that is, <span class="math inline">\(\sqrt{4}\)</span>. (The pattern isn’t exact because there is sampling variation in the trials themselves.)</p>
<p>Lesson: The standard error gets smaller the larger the sample size. For a sample size of <span class="math inline">\(n\)</span>, the SE will be proportional to <span class="math inline">\(1/\sqrt{\strut n}\)</span>.</p>
</section>
<section id="the-confidence-interval" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="the-confidence-interval"><span class="header-section-number">4.4</span> The confidence interval</h2>
<p>The “confidence interval” is a more user-friendly format for describing the amount of sampling variation. As an interval, it commonly written either as [lower, upper] or center<span class="math inline">\(\pm\)</span>half-width. These styles are completely equivalent and either style can be used. The preferred style can depend on the field or the journal in which a report is being published. Some journals like a different style, center (half-width).</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Technical vocabulary
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is a technical name for the half-width: the “<strong>margin of error</strong>.” We will leave the confidence interval calculation to software, so we won’t have much need to refer to the margin of error, but it is a term commonly used by statisticians and scientists.</p>
</div>
</div>
<p>The margin of error is defined to be twice the SE. A lot of early statistical theory was given over to defining “twice.” For our purposes, twice means “multiply by 2.” Some people prefer the theoretically more precise “multiply by 1.96” which is appropriate for very large sample sizes. For small sample sizes “twice” is larger than 1.96 and depends on how many model coefficients there are. For instance, consider the simplest model <code>y ~ 1</code>. There is one coefficient and for a sample size of <span class="math inline">\(n=20\)</span> twice would be 2.09 while a for a sample size of <span class="math inline">\(n=5\)</span> “twice” would be 2.8.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Demonstration: Confidence interval on the Intercept coefficient for <span class="math inline">\(n=25\)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>The following command computes the confidence interval (that is, the two numbers [<code>lower</code>,<code>upper</code>]) for the trials we ran on samples of size <span class="math inline">\(n=25\)</span> from <code>dag01</code> and summarized by the intercept coefficient from <code>y ~ 1</code>. We show this just to make clear what that the margin of error is twice the standard error.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">m=</span><span class="fu">mean</span>(Intercept), <span class="at">se=</span><span class="fu">sd</span>(Intercept)) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> m <span class="sc">-</span> <span class="dv">2</span><span class="sc">*</span>se, <span class="at">upper =</span> m <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span>se)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         m        se    lower   upper
1 3.996807 0.3674418 3.261923 4.73169</code></pre>
</div>
</div>
<p>Notice that we have used 2 for “twice.” But best to leave the detailed calculations to the software.</p>
</div>
</div>
<p>Statistical software is written to use the correct value of “twice” for any given sample size and number of coefficients. But for everyday purposes, and samples larger than, say, <span class="math inline">\(n=10\)</span>, “twice” is roughly 2.</p>
<p>In calculations, finding the half-width of the confidence interval requires first finding the standard error, then multiplying by “twice.” In practice, it’s far easier to use software. In R, the <code>confint()</code> function reports the confidence interval for model coefficients:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Hill_racing <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(time <span class="sc">~</span> distance <span class="sc">+</span> climb, <span class="at">data=</span>.) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  2.5 %      97.5 %
(Intercept) -533.432471 -406.521402
distance     246.387096  261.229494
climb          2.493307    2.726209</code></pre>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Demonstration: How many digits?
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the calculation of confidence intervals on the model <code>time ~ distance + climb</code>, the results were reported to many digits. Such a report is appropriate for whatever further calculations might need to be done on the results, but it is usually not appropriate for a human reader.</p>
<p>To know how many digits are worth reporting to humans, you can look at the standard error. The standard error is a part of a different kind of summary of a model: the “regression report.” We won’t need to look at regression reports until the end of the course. We show one here just to make the point about how many digits are worth reporting to humans.</p>
<p>Here’s the regression report on the <code>Hill_racing</code> model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Hill_racing <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(time <span class="sc">~</span> distance <span class="sc">+</span> climb, <span class="at">data=</span>.) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regression_summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term        estimate std.error statistic   p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)  -470.     32.4        -14.5 9.92e- 46
2 distance      254.      3.78        67.1 0        
3 climb           2.61    0.0594      43.9 4.08e-304</code></pre>
</div>
</div>
<p>The “standard error” for each coefficient is reported in the column labelled <code>std.error</code>.</p>
<p>For the human reader, only the first two significant digits of the standard error are worth reporting. In this case, that is 32 for the Intercept, 3.8 for the distance coefficient, and 0.059 for the climb coefficient. The confidence interval will be the coefficient itself (column labelled <code>estimate</code>) plus-or-minus “twice” the <code>std.error</code>. The report of the confidence interval (for a human reader) should be rounded to the place of the first two significant digits of the standard error.</p>
<p>For example, the confidence interval on the distance coefficient will be <span class="math inline">\(253.808295 \pm 2 \times 3.78433220\)</span>. Keep only the digits that come before the first two significant digits of the SE, so the reported interval can be <span class="math inline">\(253.8 \pm 3.8\)</span>.</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Reading-notes-lesson-21.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Signal and noise</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Reading-notes-lesson-23.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Estimating sampling variation from a single sample</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>