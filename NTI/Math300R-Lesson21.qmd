---
title: "Math 300R NTI Lesson `r (lesson <- 21)`"
subtitle: "DAGs, noise, and simulation"
author: "Prof. Danny Kaplan"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document:
    theme: lumen
    toc: yes
    toc_float: yes
    css: NTI.css
  pdf_document:
    toc: yes
---


```{r setup, include=FALSE}
library(knitr)
library(kableExtra)
library(ggformula) # Change plots to ggplot2
library(tibble)
knitr::opts_chunk$set(echo = TRUE)
```

## Objectives

#. Determine whether a proposed graph is directed and acyclic.

#. Having selected a response and one or more explanatory variables, identify other DAG notes as covariates. 

#. Generate data from simulations and use the data to model the relationships.


## Reading

TBD

[Reading note sketches](../Reading-notes/Reading-notes-lesson-21.qmd)



## Lesson

*Remember that you will be running this more like a lab than a lecture. You want them using `R` and answering questions. Have them open the notes rmd and work through it together.*



::: {.callout-tip icon=FALSE}
## Setup 

```{r message=FALSE, warning=FALSE}
library(dagsim)
library(mosaic)
```
:::

Introduce DAGs with multiple variables.

Generate data from them.

Use the data to summarize the relationships. 




::: {.callout-tip icon=false}
## Activity

1. What happens when you use the model `y ~ x + a`? Interpret those coefficients. Are they consistent with the DAG?

2. Are `x` and `a` related to one another? What does the DAG say about this? What does the model `a ~ x` say.
:::





::: {.callout-note}
## Inference example: Regression to the mean

Construct the Galton height DAG, simulate, and show that Galton's finding is replicated. 




## Learning Checks



## Documenting software

  * File creation date: `r Sys.Date()`
  * `r R.version.string`
  * `tidyverse` package version: `r packageVersion("tidyverse")`
  * `mosaic` package version: `r packageVersion("mosaic")`
  * `dagsim` package version: `r packageVersion("dagsim")`

