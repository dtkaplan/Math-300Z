<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Danny Kaplan">
<meta name="dcterms.date" content="2022-11-29">

<title>Spring 2023 Math 300 Revisions - Math 300R NTI Lesson r (lesson &lt;- 19)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Spring 2023 Math 300 Revisions</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../lessons.html">
 <span class="menu-text">Lessons</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../layout.html">
 <span class="menu-text">Site layout</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../objective-list.html">
 <span class="menu-text">Objectives</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../LC-list.html">
 <span class="menu-text">LCs</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Math 300R NTI Lesson 19</h1>
<p class="subtitle lead">Statistical thinking</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Danny Kaplan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 29, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>In the first half of the course, we examined <em>data wrangling</em> methods—<code>group_by()</code>, <code>summarize()</code> and <code>tally()</code> in particular—for summarizing variables and breaking up the summaries by groups.</p>
<p>In this second half of the course, we will be emphasizing the <strong>relationships between variables</strong>. The conceptual framework we’ve used for describing such relationships involves choosing a <strong>response variable</strong> and selecting one or more <strong>explanatory variables</strong>. Within this framework, you’ve already seen regression techniques for describing how a numerical response variable can be related to numerical explanatory variables. Something new you will see in the second half of the course is using regression techniques to handle <em>categorical</em> response variables. This will allow us to extend regression to cover such things as proportions and probabilities.</p>
<p>Graphics can be a powerful way to perceive relationships between variables. In keeping with the response/explanatory framework, our go-to graphical technique will be to plot data as a “<strong>point plot</strong>” absolutely sticking to the convention that the response variable will be assigned to the <em>vertical axis</em>. Note that we’ll use the term “point plot” rather than the “scatter plot” that was used in the early graphics chapters. That’s partly because we’re going to use the idea of “scattering” in a different way.</p>
<p>We’re also going to adopt a new graphical convention: that statistical summaries should always be graphed as a layer on top of the raw data from which the summaries are derived. This means that we’ll switch away from histograms as a way of displaying distributions. Why? Because the vertical axis on a histogram does not correspond to the values of a response variable. Similarly, barplots won’t be appropriate, because the response variable in a barplot is represented by color rather than position on a vertical axis.</p>
<p>Overall, both the graphical display of data and summaries and the calculation of numerical summaries like means and proportions will become much simpler to accomplish, since relationship summaries will be produced using using <code>lm()</code> and closely related model types. Data graphics will be made with <code>geom_point()</code> and closely related geoms.</p>
<section id="graphing-data-and-statistical-annotations" class="level2">
<h2 class="anchored" data-anchor-id="graphing-data-and-statistical-annotations">Graphing data and statistical annotations</h2>
</section>
<section id="categorical-response-variables" class="level2">
<h2 class="anchored" data-anchor-id="categorical-response-variables">Categorical response variables</h2>
<p>To get started, we’ll work with categorical response variables that are “<strong>dicotomous</strong>” or, equivalently, “<strong>binomial</strong>,” that is, with only two methods. This covers a large fraction of the situations where categorical response values are needed. We’ll leave those situations where there are lots of levels for the response variable to courses on “machine learning,” a topic we can only scratch the surface of in this introductory course.</p>
<p>The important insight into using categorical variables in regression models is encapsulated in the idea of the 0-1 (“zero-one”) encoding. To illustrate, consider the <code>mosaicData::Whickham</code> data frame that records the age, smoking status, and survival of 1000 or so nurses in the UK. The relationship that motivated the collection of these data is between smoking and survival. Taking a few rows from the data frame let’s us easily see the types of the variables involved:</p>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> outcome </th>
   <th style="text-align:left;"> smoker </th>
   <th style="text-align:right;"> age </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Dead </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:right;"> 56 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:right;"> 54 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:right;"> 21 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Dead </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:right;"> 72 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:right;"> 30 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:right;"> 19 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:right;"> 46 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:right;"> 31 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:right;"> 74 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Alive </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:right;"> 32 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>HOW TO USE <code>math300::zero_one()</code></p>
<p>Plotting a zero-one response variable with correctly labelled axes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>P <span class="ot">&lt;-</span> Whickham <span class="sc">%&gt;%</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_jitter</span>(<span class="fu">zero_one</span>(outcome) <span class="sc">~</span> age, <span class="at">color=</span><span class="sc">~</span>smoker, <span class="at">height=</span><span class="fl">0.1</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">label_zero_one</span>()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>P</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We might equally well plot age as a function of outcome:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_jitter</span>(age <span class="sc">~</span> outcome, <span class="at">data =</span> Whickham, <span class="at">width=</span><span class="fl">0.2</span>) <span class="sc">%&gt;%</span> <span class="fu">gf_violin</span>(<span class="at">color=</span><span class="cn">NA</span>, <span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">alpha=</span><span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>PLOT OUT A MODEL</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">model_train</span>(<span class="fu">zero_one</span>(outcome) <span class="sc">~</span> age <span class="sc">+</span> smoker, <span class="at">data =</span> Whickham)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># fun &lt;- mod_fun(mod) </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># P %&gt;% mosaicCalc::slice_plot(fun(age, smoker="Yes") ~ age, color="red")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="intervals" class="level2">
<h2 class="anchored" data-anchor-id="intervals">Intervals</h2>
<p>Once you have FIXES MOSAICMODEL, Generate a “prediction” interval and use gf_errorbar() to plot it over the model.</p>
</section>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<p>19.1 Convert to the response vs explanatory format for data graphs.</p>
<p>19.2 Understand the covering of a variable by an interval specified by a coverage level (e.g.&nbsp;0.95) and make a data graphic annotated by such intervals.</p>
<p>19.3 Be able to produce point plots overlaid with “violin” plots to display the density of a variable. (This should really go in the first half of the course, but ModernDive doesn’t do it.)</p>
<p>19.4 Convert categorical variables to a 0-1 encoding. a. Generate graphics appropriate to a categorical encoding. (jitter plots) b. Apply modeling techniques to 0-1 encodings of binomial response variables.</p>
</section>
<section id="reading" class="level2">
<h2 class="anchored" data-anchor-id="reading">Reading</h2>
<p>TBD</p>
</section>
<section id="lesson" class="level2">
<h2 class="anchored" data-anchor-id="lesson">Lesson</h2>
<p><em>This lesson marks the beginning of a new phase of the course. Thus far, we’ve worked with </em>techniques* for data wrangling, graphics, and regression modeling. Now we address the question of what a regression model (and other information that we might have) can tell us about the real world.*</p>
<div class="callout-tip callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Setup
</div>
</div>
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mosaicData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout-note callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Guided activity: House prices
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Have students do the calculations for the first model, answering the questions that follow. After this is complete, have students do the calculations for the second model and answer those questions.</em></p>
<p>The <code>mosaicData::SaratogaHouses</code> data frame contains information about the sales price and various attributes of about 1700 houses. (See <code>?SaratogaHouses</code> for a detailed description.)</p>
<p>Do a regression of <code>price ~ bedrooms</code> and explain what the regression coefficients mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(price <span class="sc">~</span> bedrooms, <span class="at">data=</span>SaratogaHouses) <span class="sc">|&gt;</span> <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)    bedrooms 
   59862.96    48217.81 </code></pre>
</div>
</div>
<ol type="1">
<li><p>What are the units of the intercept and of the <code>bedrooms</code> coefficient? *Intercept in dollars, <code>bedrooms</code> in dollars per bedroom.</p></li>
<li><p>Interpret what the coefficients indicate about the price of houses and bedrooms. <em>Each additional bedroom adds about $50000 to the value of a house.</em></p></li>
<li><p>According to the model, predict what would be the sales price (at the time the data was collected, 2006) of a house with two bedrooms? <em><span class="math inline">\(59863 + 2\times 48218\)</span></em></p></li>
</ol>
<p>Of course, bedrooms are not the only important thing about a house. Let’s include <code>livingArea</code> along with <code>bedrooms</code> in the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(price <span class="sc">~</span> livingArea <span class="sc">+</span> bedrooms, <span class="at">data=</span>SaratogaHouses) <span class="sc">|&gt;</span> <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)  livingArea    bedrooms 
  36667.895     125.405  -14196.769 </code></pre>
</div>
</div>
<ol type="1">
<li>What are the units of the <code>livingArea</code> coefficient? <em>dollars per square foot</em></li>
<li>What does this model say about the value of adding a bedroom? <em>It seems to reduce the value of the house by about $15,000.</em></li>
</ol>
<p>Based on exactly the same data, the two models seem to give contradictory statements about the value of an additional bedroom.</p>
<ol type="i">
<li>Is one model right and the other wrong? If so, which one is right? (Explain your reasoning.) <em>Both models are mathematically correct. But they need to be interpreted in different ways. Each is telling us something different about the real world.</em></li>
<li>Could both models be right? If so, explain why the <code>bedroom</code> coefficients have opposite signs. <em>We will need to develop some additional tools and concepts before we can take on this question.</em></li>
</ol>
<p>Learning how to interpret models in terms of what they say about the world is a major theme of this second half of Math 300.</p>
<p>Another, more technical question that we will address has to do with the <em>precision</em> of coefficients like 125.40 dollars per square foot. Might it actually be $200/ft<sup>2</sup>? How about $500/ft<sup>2</sup>? And how seriously should we take the sales value that we calculate by setting numbers for <code>bedrooms</code> and <code>livingArea</code> into the model?</p>
</div>
</div>
</section>
<section id="learning-checks" class="level2">
<h2 class="anchored" data-anchor-id="learning-checks">Learning Checks</h2>
</section>
<section id="setup-1" class="level2">
<h2 class="anchored" data-anchor-id="setup-1">Setup</h2>
<p>The <code>math300</code> package will be needed for lessons 20 through 39.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(math300)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moderndive)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(NHANES)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li><p>One of these pipeline commands will work and the other won’t. Which one will work? Explain why the other one doesn’t work.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(net <span class="sc">~</span> age, <span class="at">data =</span> TenMileRace)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>TenMileRace <span class="sc">%&gt;%</span> <span class="fu">lm</span>(net <span class="sc">~</span> age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>An example from the <em>OpenIntro</em> book uses data on promotions. Some data wrangling commands that might be relevant are these:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    48</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(decision) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  decision     n
  &lt;fct&gt;    &lt;int&gt;
1 not         13
2 promoted    35</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  gender     n
  &lt;fct&gt;  &lt;int&gt;
1 male      24
2 female    24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(gender, decision) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   gender [2]
  gender decision     n
  &lt;fct&gt;  &lt;fct&gt;    &lt;int&gt;
1 male   not          3
2 male   promoted    21
3 female not         10
4 female promoted    14</code></pre>
</div>
</div></li>
</ol>
<p>You could use such wrangling to compare groups. For instance, you can use the results of the last command to calculate separately the proportion of males who were promoted and, similarly, the proportion of females.</p>
<p>a. <strong>What are those proportions?</strong></p>
<p>The following wrangling command will calculate the proportions for you, but it is a bit complicated:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">prop_promoted =</span> <span class="fu">sum</span>(decision<span class="sc">==</span><span class="st">"promoted"</span>) <span class="sc">/</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>b. <strong>Use the above command to check your calculations in (a).</strong></p>
<p>c. In the regression paradigm, the comparison of proportions between the two groups is done directly in <code>lm()</code>, like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">promoted =</span> <span class="fu">zero_one</span>(decision, <span class="at">one=</span><span class="st">"promoted"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(promoted <span class="sc">~</span> gender, <span class="at">data =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept) genderfemale 
   0.8750000   -0.2916667 </code></pre>
</div>
</div>
<p>We’ll explain the purpose of <code>zero_one()</code> in Lesson 19, but putting that matter aside for a moment, compare the two coefficients in the regression model to the proportion results you got from wrangling.</p>
<ol type="i">
<li><p><strong>What does the value of the intercept coefficient correspond to in the wrangling results?</strong></p></li>
<li><p><strong>What does the <code>genderfemale</code> coefficient correspond to in the wrangling results?</strong> (Hint: you will have to do a bit of arithmetic on the wrangling results.)</p></li>
</ol>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">19.1</h2>
<p>Consider the <code>moderndive::evals</code> data that records students’ evaluations (<code>score</code>, on a 1-5 scale) of the professors in each of several courses (the course <code>ID</code>), as well as the <code>age</code>, “average beauty rating” (<code>bty_avg</code>) of the professor, enrollment in the course (<code>cls_students</code>) and the level o the course (<code>cls_level</code>). Each row in the data frame is an individual course section.</p>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:right;"> ID </th>
   <th style="text-align:right;"> score </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> bty_avg </th>
   <th style="text-align:right;"> cls_students </th>
   <th style="text-align:left;"> cls_level </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 329 </td>
   <td style="text-align:right;"> 2.7 </td>
   <td style="text-align:right;"> 64 </td>
   <td style="text-align:right;"> 2.333 </td>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:left;"> upper </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 313 </td>
   <td style="text-align:right;"> 4.2 </td>
   <td style="text-align:right;"> 42 </td>
   <td style="text-align:right;"> 2.667 </td>
   <td style="text-align:right;"> 86 </td>
   <td style="text-align:left;"> upper </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 430 </td>
   <td style="text-align:right;"> 4.5 </td>
   <td style="text-align:right;"> 33 </td>
   <td style="text-align:right;"> 5.833 </td>
   <td style="text-align:right;"> 120 </td>
   <td style="text-align:left;"> lower </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 95 </td>
   <td style="text-align:right;"> 4.2 </td>
   <td style="text-align:right;"> 48 </td>
   <td style="text-align:right;"> 4.333 </td>
   <td style="text-align:right;"> 33 </td>
   <td style="text-align:left;"> upper </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 209 </td>
   <td style="text-align:right;"> 4.8 </td>
   <td style="text-align:right;"> 60 </td>
   <td style="text-align:right;"> 3.667 </td>
   <td style="text-align:right;"> 34 </td>
   <td style="text-align:left;"> upper </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 442 </td>
   <td style="text-align:right;"> 3.6 </td>
   <td style="text-align:right;"> 61 </td>
   <td style="text-align:right;"> 3.333 </td>
   <td style="text-align:right;"> 39 </td>
   <td style="text-align:left;"> lower </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 351 </td>
   <td style="text-align:right;"> 4.6 </td>
   <td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 3.333 </td>
   <td style="text-align:right;"> 26 </td>
   <td style="text-align:left;"> lower </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 317 </td>
   <td style="text-align:right;"> 3.7 </td>
   <td style="text-align:right;"> 52 </td>
   <td style="text-align:right;"> 6.500 </td>
   <td style="text-align:right;"> 44 </td>
   <td style="text-align:left;"> upper </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 444 </td>
   <td style="text-align:right;"> 4.1 </td>
   <td style="text-align:right;"> 52 </td>
   <td style="text-align:right;"> 4.500 </td>
   <td style="text-align:right;"> 111 </td>
   <td style="text-align:left;"> lower </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 315 </td>
   <td style="text-align:right;"> 3.8 </td>
   <td style="text-align:right;"> 52 </td>
   <td style="text-align:right;"> 6.000 </td>
   <td style="text-align:right;"> 88 </td>
   <td style="text-align:left;"> upper </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>The following commands model <code>score</code> versus <code>age</code> and plots the data as a point plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(score <span class="sc">~</span> age, <span class="at">data =</span> moderndive<span class="sc">::</span>evals) <span class="sc">%&gt;%</span> <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept)          age 
 4.461932354 -0.005938225 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> <span class="fu">gf_point</span>(score <span class="sc">~</span> age, <span class="at">alpha=</span><span class="fl">0.2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Explain why some of the dots are darker than others?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>All the ages have integer values—e.g., 43, 44, 45—so the dots line up in vertical lines.</p>
<p>Similarly, the scores have values only to one decimal place—e.g., 3.1, 3.2, 3.3—so the dots line up in horizontal lines. If there are two or more rows in <code>evals</code> that have the same age and score, the dots will be plotted over one another. Since transparency (<code>alpha = 0.2</code>) is being used, points where there is a lot of overplotting will appear darker.</p>
</div>
</div>
<ol start="2" type="1">
<li>Remake the plot, but using <code>gf_jitter()</code> instead of <code>gf_point()</code>. Explain what’s different about the jittered plot. (Hint: Almost all of the dots are the same lightness.)</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> <span class="fu">gf_jitter</span>(score <span class="sc">~</span> age, <span class="at">alpha=</span><span class="fl">0.2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>“Jittering” means to shift each dot by a small random amount. This reduces the number of instances where dots are overplotted.</p>
</div>
</div>
<ol start="3" type="1">
<li>Now make a jitter plot of score versus class level (<code>cls_level</code>).
<ol type="a">
<li>What do the tick-mark labels on the horizontal axis describe? Are they numerical?</li>
<li>To judge from the plot, are their more lower-level than upper-level courses? Explain briefly what graphical feature lets you answer this question at a glance.</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> <span class="fu">gf_jitter</span>(score <span class="sc">~</span> cls_level)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="a">
<li>The tick-mark labels are the levels of the categorical variable <code>cls_level</code>. The are words, not numbers.</li>
<li>There are many more dots in the right column than in the left. Since <code>lower</code> level class are shown in the left column, there are fewer lower-level courses than upper-level courses.</li>
</ol>
</div>
</div>
<ol start="4" type="1">
<li><p>The two columns of points in the plot you made in (3) are not separated by very much empty space. You can fix this by giving <code>gf_jitter()</code> an argument <code>width=0.2</code>. Try different numerical values for <code>width</code> and report which one you find most effective at making the two columns clearly separated while avoiding overplotting.</p></li>
<li><p>Are the scores, on average, different for the lower- vs upper-level classes? It’s hard to get more than a rough idea of the distribution of scores by looking at the “density” of points. The reason is that the number of points differs in the two columns. But there is an easy fix: add a layer to the graphic that shows the distribution (more or less like a histogram displays a distribution of values). You can do this by piping the jitter plot layer into a geom called a “violin,” like this:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_jitter</span>(score <span class="sc">~</span> cls_level) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_violin</span>(<span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">alpha=</span><span class="fl">0.2</span>, <span class="at">color=</span><span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Explain how to read the violins.</p>
<hr>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">19.2</h2>
<p>The <code>openintro::promotions</code> data comes the the 1970s and records the gender of 38 people along with the result of a decision to promote (or not) the person. =</p>
<p>Chapter 2 of ModernDive suggests graphically depicting <code>decision</code> versus <code>gender</code> by using a bar plot. There are two ways to make the bar plot, depending on which variable you assign to the horizontal axis and which to the fill color.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span> decision, <span class="at">fill=</span><span class="sc">~</span> gender)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span> gender, <span class="at">fill=</span><span class="sc">~</span>decision)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-promotion-bars-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="NTI-Lesson19_files/figure-html/fig-promotion-bars-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Two different ways to plot promotion outcome and gender</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-promotion-bars-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="NTI-Lesson19_files/figure-html/fig-promotion-bars-2.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Two different ways to plot promotion outcome and gender</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Plots like those in <strong>?@fig-promotion-bars</strong> might be attractive or not, depending on your taste. What they don’t accomplish is to make sure which is the response variable and which the explanatory variable.</p>
<p>The choice of response and explanatory variables depends, of course, on what you are trying to display. But everyday English gives a big hint. For instance, you might describe the question at hand as, “Does gender affect promotion decisions.” Here, the variable doing the affecting is <code>gender</code>, and the outcome is the <code>decision</code>.</p>
<p>Modeling decision as a function of gender is easy once you convert the response variable to a zero-one variable. Like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">zero_one</span>(decision, <span class="at">one=</span><span class="st">"promoted"</span>) <span class="sc">~</span> gender, <span class="at">data =</span> promotions)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coefficients</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept) genderfemale 
   0.8750000   -0.2916667 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mosaicModel<span class="sc">::</span><span class="fu">mod_eval</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gender model_output
1   male    0.8750000
2 female    0.5833333</code></pre>
</div>
</div>
<ol type="1">
<li>Explain what is the relationship between the model coefficients and the model outputs.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The coefficients tell how to calculate the model output. These coefficients say that the model output will be 0.875, but subtract 0.292 if the person is female.</p>
<p>The model outputs give the probability of being promoted for each of the two genders.</p>
</div>
</div>
<ol start="2" type="1">
<li>Make this plot and explain what the red lines show. (We don’t expect you to be able to write the command to generate such plots on your own, but we do expect you to be able to interpret them.)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_jitter</span>(<span class="fu">zero_one</span>(decision) <span class="sc">~</span> gender, <span class="at">height=</span><span class="fl">0.2</span>, <span class="at">width=</span><span class="fl">0.2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_errorbar</span>(model_output <span class="sc">+</span> model_output <span class="sc">~</span> gender, <span class="at">data=</span><span class="fu">mod_eval</span>(mod), </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span><span class="st">"red"</span>, <span class="at">inherit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">label_zero_one</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The red lines show the proportion of the people in each gender group who were promoted. The y-axis scale on the left refers to the zero-one encoding of <code>decision</code>, while the y-axis labels on the right make it easier to read off the numerical value of the proportion.</p>
</div>
</div>
<hr>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">19.3</h2>
<p>The <code>mosaicData::Whickham</code> data from comes from a survey of a thousand or so nurses in the UK in the 1970s. The data record the <code>age</code> of each nurse along with whether the nurse was still alive in a follow-up survey 20 years later (<code>outcome</code>).</p>
<p>Make this graph from the <code>Whickham</code> data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_jitter</span>(<span class="fu">zero_one</span>(outcome) <span class="sc">~</span> age, <span class="at">data =</span> Whickham, <span class="at">alpha=</span><span class="fl">0.3</span>, <span class="at">height=</span><span class="fl">0.1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">label_zero_one</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li><p>Explain in everyday language what the graph shows about the lives of humans.</p></li>
<li><p>Make the graph again, but leave out the <code>%&gt;% label_zero_one()</code>. Then explain what <code>label_zero_one()</code> does.</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>The graph shows that young nurses tended to be alive at the 20-year follow-up, older nurses not so much.</p></li>
<li><p><code>%&gt;% label_zero_one()</code> adds an axis on the left of the graph showing that in the zero-one tranform of <code>outcome</code>, “Alive” is assigned the value 1 and “Dead” the value 0.</p></li>
</ol>
</div>
</div>
<section id="solution-6" class="level3">
<h3 class="anchored" data-anchor-id="solution-6">Solution</h3>
<hr>
</section>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3">19.4</h2>
<p>About the summarization of models. Pipe the model fit into any of four functions:</p>
<ol type="i">
<li><code>%&gt;% coefficients()</code></li>
<li><code>%&gt;% regression_summary()</code></li>
<li><code>%&gt;% rsquared()</code></li>
<li><code>%&gt;% confint()</code></li>
</ol>
<p>REDO <code>confint()</code> so that the columns are named <code>lower</code>, <code>middle</code>, <code>upper</code></p>
<section id="solution-7" class="level3">
<h3 class="anchored" data-anchor-id="solution-7">Solution</h3>
<hr>
</section>
</section>
<section id="obj.-19.3" class="level2">
<h2 class="anchored" data-anchor-id="obj.-19.3">19.5 (Obj. 19.3)</h2>
<p>Calculation of a 95% coverage interval (or any other percent level interval) is straightforward with the right software. To illustrate, consider the efficiency of cars and light trucks in terms of CO_2 emissions per mile driven. We’ll use the <code>CO2city</code> variable in the <code>math300::MPG</code> data frame. The basic calculation using the <code>mosaic</code> package is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">df_stats</span>( <span class="sc">~</span> CO2city, <span class="at">data =</span> math300<span class="sc">::</span>MPG, <span class="fu">coverage</span>(<span class="fl">0.95</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  response   lower   upper
1  CO2city 276.475 684.525</code></pre>
</div>
</div>
<p>The following figure shows a violin plot of <code>CO2city</code> which has been annotated with various coverage intervals. Use the calculation above to identify which of the intervals corresponds to which coverage level.</p>
<ol type="1">
<li>50% coverage interval -A- (c)</li>
<li>75% coverage interval -A- (e)</li>
<li>90% coverage interval -A- (g)</li>
<li>100% coverage interval -A- (i). This extends from the min to the max, so you could have figured this out just from the figure.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/kangaroo-freeze-candy-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="obj-19.3" class="level2">
<h2 class="anchored" data-anchor-id="obj-19.3">19.6 (Obj 19.3)</h2>
<p>The two jitter + violin graphs below show the distribution of two different variables, X and Y. Which variable has more variability?</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/goat-take-linen-1-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/goat-take-linen-1-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is about the same level of variability in variable A and variable B. This surprises some people. Remember, the amount of variability has to do with the spread of <em>values</em> of the variable. In variable B, those values are have a 95% prediction interval of about 30 to 65, about the same as for variable A. There are two things about plot (b) that suggest to many people that there is more variability in variable B.</p>
<ol type="1">
<li>The larger horizontal spread of the dots. Note that variable B is shown along the vertical axis. The horizontal spread imposed by jittering is completely arbitrary: the only values that count are on the y axis.<br>
</li>
<li>The scalloped, irregular edges of the violin plot.</li>
</ol>
<p>On the other hand, some people look at the clustering of the data points in graph (b) into several discrete values, creating empty spaces in between. To them, this clustering implies less variability. And, in a way, it does. But the <em>statistical</em> meaning of variability has to do with the overall spread of the points, not whether they are restricted to discrete values.</p>
</div>
</div>
<hr>
</section>
<section id="objs.-19.3-19.4" class="level2">
<h2 class="anchored" data-anchor-id="objs.-19.3-19.4">19.7 (Objs. 19.3 &amp; 19.4)</h2>
<p>The graphs below show a violin plot of body mass index (BMI) for adults and children. One of the graphs shows a correct 95% coverage interval on BMI, the other does not.</p>
<p>Identify the incorrect graph and say what feature of the graph led to your answer.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/goat-hurt-painting-1-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="NTI-Lesson19_files/figure-html/goat-hurt-painting-1-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Graph (b) is correct. In graph (a), you can see that the interval fails to include a lot of the low BMI children and extends too high. For adults, the graph (a) interval extends too far low and doesn’t go high enough.</p>
</div>
</div>
<hr>
</section>
<section id="e" class="level2">
<h2 class="anchored" data-anchor-id="e">19.E</h2>
<p>There are two equivalent formats describing an interval numerically that are widely used:</p>
<ol type="i">
<li>Specify the lower and upper endpoints of the interval, e.g.&nbsp;7 to 13.</li>
<li>Specify the center and half-width of the interval, e.g.&nbsp;10 ± 3, which is just the same as 7 to 13.</li>
</ol>
<p>Complete the following table to show the equivalences between the two notations.</p>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> Interval </th>
   <th style="text-align:left;"> bottom-to-top </th>
   <th style="text-align:left;"> plus-or-minus </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> (a) </td>
   <td style="text-align:left;"> 3 to 11 </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> (b) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 108 ± 10 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> (c) </td>
   <td style="text-align:left;">  </td>
   <td style="text-align:left;"> 30 ± 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> (d) </td>
   <td style="text-align:left;"> 97 to  100 </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> (e) </td>
   <td style="text-align:left;"> -4 to  16 </td>
   <td style="text-align:left;">  </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="a">
<li>7 ± 4</li>
<li>98 to 118</li>
<li>29 to 31</li>
<li>98.5 ± 1.5</li>
<li>6 ± 10</li>
</ol>
<p>It’s a matter of judgement which format to use. The bottom-to-top notation highlights the range of the interval while the plus-or-minus notation emphasizes the center of the interval. As a rule of thumb, I suggest this:</p>
<ul>
<li>If the first two digits are different between the top and bottom of the interval, use the bottom-to-top notation. So, write 387 to 393. If the first two digits are the same, use plus-or-minus. For instancer, the ratio of the mass of the Earth to that of the Moon is 81.3005678 ± 0.0000027. This is easier to take in at a glance than the equivalent 81.3005651 - 81.3005708</li>
</ul>
</div>
</div>
<hr>
</section>
<section id="f" class="level2">
<h2 class="anchored" data-anchor-id="f">19.F</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Still in draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose there are other explanatory variables to be displayed. In that case, we will use color and faceting. If there are <em>no</em> explanatory variables, as in <code>y ~ 1</code>, we will jitter the data horizontally to avoid overplotting.]</p>
</div>
</div>
</section>
<section id="documenting-software" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="documenting-software">Documenting software</h2>
<ul>
<li>File creation date: 2022-11-29</li>
<li>R version 4.2.1 (2022-06-23)</li>
<li><code>tidyverse</code> package version: 1.3.2</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Violins versus boxes
</div>
</div>
<div class="callout-body-container callout-body">
<p>All of the graphical statistical annotations are human inventions. Each invention attempts to meet a need, but usually, the invention is a compromise between the statistical objective and the computational and graphical resources available. The <strong>box plot</strong> format is a case in point. The statistical goal of a box plot is to display the distribution of values of a variable. It was invented in a time when graphics were mostly drawn by hand and computers were not widely available. The computations behind a box plot produce a five-number summary: min, first quartile, median, third quartile, max. It’s straightforward (but tedious!) to do these by hand since they are based on sorting and counting. The drawing itself uses only straight lines, which are easy to draw by hand with only a pencil and a straightedge.</p>

<p>A violin plot requires hundreds or thousands of evaluations of the gaussian function along with post-processing. They are not feasible for a human; a computer is required. Similarly, drawing the detailed shape of the violin (<strong>?@fig-violin-intro</strong>) requires a computer.</p>
<p>The box plot has important deficiencies. It is appropriate only for uni-modal distributions and doesn’t give even a hint of possible bi-modality. The sharp boundaries of the box and endpoints of the whiskers suggest that even smooth density shapes have abrupt transitions. Points are marked as “outliers” in order to keep the whiskers from becoming absurdly long, but box plots of data with a normal (gaussian) distribution will produce such “outliers” whenever the sample size is large.</p>
<p>When it comes to computing power, we are today unimaginably rich compared to the generation that introduced box plots. In a sense, we are so rich we can use expensive, well made products such as a violin. The box-plot generation was living in computational poverty. Not having the (computational) funds to buy a violin, they had to make do with primitive instruments they had to make do with the materials at hand, just as early blues mucisians, coming out of poverty, often had to build instruments such as a cigar-box guitar.</p>
</div>
</div>


<div class="no-row-height column-margin column-container"><div class="callout-margin-content">
<p><img src="www/cigar-box-guitar.png" class="img-fluid"></p>
<p>A cigar-box guitar</p>
</div></div></section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>