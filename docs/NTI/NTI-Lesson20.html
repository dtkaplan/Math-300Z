<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Danny Kaplan">
<meta name="dcterms.date" content="2022-11-29">

<title>Spring 2023 Math 300 Revisions - Math 300R NTI Lesson r (lesson &lt;- 20)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Spring 2023 Math 300 Revisions</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">Proposal</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../lessons.html">Lessons</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../layout.html">Site layout</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../objective-list.html">Objectives</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../LC-list.html">LCs</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Math 300R NTI Lesson 20</h1>
<p class="subtitle lead">title goes here</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Danny Kaplan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 29, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<p>20.1. Understand that gaming is a way of improving our skills and identifying potential opportunities and problems.</p>
<p>20.2 Characterize the “size” of a variable or of random noise using variance (or, equivalently, “standard deviation”).</p>
<p>20.3 Distinguish between a sample, a summary of a sample, and a sample of summaries of samples.</p>
</section>
<section id="reading" class="level2">
<h2 class="anchored" data-anchor-id="reading">Reading</h2>
<p>TBD</p>
</section>
<section id="lesson" class="level2">
<h2 class="anchored" data-anchor-id="lesson">Lesson</h2>
<div class="callout-note callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Setup
</div>
</div>
<div class="callout-body-container callout-body">
<p>The software for generating the simulations, and which contains a library of different scenarios, is in the package <code>{math300}</code>. The <code>{mosaic}</code> package contains functions for calculating statistics and <strong>iteration</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mosaic)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(math300)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout-tip callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Example
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Roll a die 1000 times. How often does each possible result appear?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Sim <span class="ot">&lt;-</span> <span class="fu">dag_make</span>(x <span class="sc">~</span> <span class="fu">each</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>Samp <span class="ot">&lt;-</span> <span class="fu">sample</span>(Sim, <span class="at">size=</span><span class="dv">100</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Samp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(x) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
      x count
  &lt;int&gt; &lt;int&gt;
1     1    17
2     2    17
3     3    16
4     4    17
5     5    17
6     6    16</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Generate 1000 rolls of the sum of two dice. How often does each possible result appear?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Sim <span class="ot">&lt;-</span> <span class="fu">dag_make</span>(x <span class="sc">~</span> <span class="fu">each</span>(<span class="fu">sum</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">2</span>, <span class="at">replace=</span><span class="cn">TRUE</span>))))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(Sim, <span class="at">size=</span><span class="dv">1000</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>Sample <span class="sc">%&gt;%</span>  </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(x) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">frac =</span> <span class="fu">n</span>()<span class="sc">/</span><span class="fu">nrow</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print.data.frame</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    x  frac
1   2 0.042
2   3 0.058
3   4 0.084
4   5 0.108
5   6 0.141
6   7 0.171
7   8 0.150
8   9 0.105
9  10 0.073
10 11 0.045
11 12 0.023</code></pre>
</div>
</div>
<p>Question: What do your results tell you about the possible results when summing 2 dice?</p>
<ol start="3" type="1">
<li>Do the same but for summing 6 dice.</li>
</ol>
<p>Question: What do your results tell you about the possible results when summing 6 dice? Do the data show you that it is possible to get a result of 36?</p>
<p>This illustrates something about “inference”: the data do not always point you directly to the truth.</p>
<p>Question: How would you modify the simulation to get a better handle on the truth.</p>
</div>
</div>
<div class="callout-note callout callout-style-default no-icon callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Measuring noise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a DAG where the X variable is simply noise: <code>exo()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Sim <span class="ot">&lt;-</span> <span class="fu">dag_make</span>(x <span class="sc">~</span> <span class="fu">exo</span>())</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>Sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(Sim, <span class="at">size=</span><span class="dv">100</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>Sample <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="fu">sd</span>(x), <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `sd(x)` `mean(x)`
    &lt;dbl&gt;     &lt;dbl&gt;
1    1.09   -0.0794</code></pre>
</div>
</div>
<ul>
<li>The argument to <code>exo()</code> sets the size of the noise. Confirm that this claim is true.</li>
</ul>
</div>
</div>
<p>Sometimes we will want to repeat a simulation over and over again, collecting the results. Use <code>do()</code> for this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># one trial</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>Sim <span class="ot">&lt;-</span> <span class="fu">dag_make</span>(x <span class="sc">~</span> <span class="fu">exo</span>())</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(Sim, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">sd</span>(x), <span class="fu">mean</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `sd(x)` `mean(x)`
    &lt;dbl&gt;     &lt;dbl&gt;
1   0.929    0.0550</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># five trials</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  {<span class="fu">sample</span>(Sim, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">s =</span> <span class="fu">sd</span>(x), <span class="at">m =</span> <span class="fu">mean</span>(x))}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
      s        m  .row .index
  &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;
1 1.05   0.158       1      1
2 0.970  0.00189     1      2
3 0.915  0.0641      1      3
4 0.897 -0.104       1      4
5 1.03  -0.0682      1      5</code></pre>
</div>
</div>
<ul>
<li>Not all the rows are the same. Why not?</li>
<li>None of the standard deviations are exactly 1. Does this mean the simulation is not working?</li>
</ul>
<p>A typical problem in statistical inference is to determine, from just one trial, whether the results are consistent or not with a proposed mechanism.</p>
</section>
<section id="learning-checks" class="level2">
<h2 class="anchored" data-anchor-id="learning-checks">Learning Checks</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Only for use in drafting questions
</div>
</div>
<div class="callout-body-container callout-body">
<p>20.1. Understand that gaming is a way of improving our skills and identifying potential opportunities and problems.</p>
<p>20.2 Characterize the “size” of a variable or of random noise using variance (or, equivalently, “standard deviation”).</p>
<p>20.3 Distinguish between a sample, a summary of a sample, and a sample of summaries of samples.</p>
</div>
</div>
<hr>
</section>
<section id="a" class="level2">
<h2 class="anchored" data-anchor-id="a">20.A</h2>
<p>You’re having a conversation about your statistics course with your engineer aunt at Thanksgiving. You tell her about how the course uses gaming (e.g.&nbsp;simulated data from DAGs) to develop an understanding of statistical methodology. She says (sensibly), “What? Simulated data? Isn’t statistics supposed to be about real data? It’s not a game.”</p>
<ol type="1">
<li><p>Write a paragraph-long response to your aunt explaining the point of gaming in learning statistics. Your paragraph should make a compelling case for gaming.</p></li>
<li><p>Write another paragraph that expresses any concerns you have about using games in a course that’s supposed to be about methods for extracting information about the world from real data.</p></li>
</ol>
<hr>
</section>
<section id="b" class="level2">
<h2 class="anchored" data-anchor-id="b">20.B</h2>
<p>Write statements using the computer commands covered in the first half of the course to calculate the <strong>size</strong> of the variability of these quantities:</p>
<ol type="1">
<li><p>The <code>age</code> variable from the <code>Cherry_race_longitudinal</code> data frame.</p></li>
<li><p>The <code>Height</code> variable from the <code>NHANES</code> data frame.</p></li>
<li><p>Compute the body-mass index from the formula <span class="math inline">\(\text{BMI} = \frac{w^2}/h\)</span> where <span class="math inline">\(w\)</span> is the person’s weight and <span class="math inline">\(h\)</span> is the person’s height. Then calculate the <strong>size</strong> of the variability of the BMI you calculate from the <code>NHANES</code> data.</p></li>
</ol>
<hr>
</section>
<section id="c" class="level2">
<h2 class="anchored" data-anchor-id="c">20.C</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show pictures of data together with violins. Ask students to estimate the “size” of the variation and to mark on the graph an annotation reflecting the “size.”</p>
<p>Is “size” a single number or a pair of numbers?</p>
<p>Contrast “size” with the coverage interval: why is one of them two numbers and the other just a single number.</p>
</div>
</div>
<hr>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">20.1</h2>
<p><strong>?@sec-size-of-variable</strong> (in the reading for this variable) describes two very closely related summary quantities used to measures of the “size” of a variable: a) the variance and b) the “standard deviation” (which is the square root of the variance).</p>
<ol type="i">
<li>Using software, what is the variance of the XXX variable in the YYY data frame? Make sure to include the <em>units</em>.</li>
<li>What is the “standard deviation” of the XXX variable? Calculate this in two different ways: i. “by-hand” taking of the square root of the variance; ii. using the <code>sd()</code> software directly.</li>
</ol>
<p>[Repeat for a number of variables from different data frames.]</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="d" class="level2">
<h2 class="anchored" data-anchor-id="d">20.D</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>In arithmetic notation, parentheses are used to group operations. So, <span class="math inline">\(4*(3+2)\)</span> is different from <span class="math inline">\(4*3 + 2\)</span>. With <code>do()</code>, a similar logic applies, but we use curly braces—not parentheses—for the grouping. Another difference is that with <code>do()</code> and summarization, some configurations may not work at all because using braces or not will produce different data frames with different names.</p>
<ol type="1">
<li>Try the following two commands, which differ in how curly braces are used.</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>)} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>One command produces an error message and the other doesn’t. Explain what’s wrong with the erroneous command.</p>
<ol start="2" type="1">
<li>Try these two statements. Again, one will work and the other won’t. Diagnose the</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>{ <span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))} } <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz=</span><span class="fu">sd</span>(m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         sz
1 0.1665197</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sz
1 NA
2 NA
3 NA
4 NA
5 NA</code></pre>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="e" class="level2">
<h2 class="anchored" data-anchor-id="e">20.E</h2>
<p>Write single-line computer statements that will do the following (related) tasks:</p>
<ol type="1">
<li><p>Draw a sample of size 5 from the <code>mosaicData::TenMileRace</code> data</p></li>
<li><p>Draw a sample (but now of size 100) and compute the “size” of variation of the <code>net</code> variable (which gives the net time to complete the race, start line to finish line).</p></li>
<li><p>Carry out 300 trials of (2) using the <code>do()</code> operator. (The result should be a data frame with entries that vary.) Note: Surround the statement for a single trial with curly braces: <code>{</code> and <code>}</code>. Also, arrange for the name of the column in the overall result to be <code>sz</code>. This will appear in the <code>summarize()</code> command.</p></li>
<li><p>Add on to (3) the computations needed to calculate the mean and the standard deviation of the trials? Note: Surround the statement from (3) with a pair of curly braces so that the <code>summarize()</code> command will look at all 300 trials as a single data frame.</p>
<ol type="i">
<li><p>Is the mean thus calculated a single number comprising all trials or a number for each trial? Briefly justify your answer in terms of what the mean of the trials should be about.</p></li>
<li><p>Eexplain what the standard deviation of the trials captures and why it’s different from the standard deviation on one trial (as from (2)).</p></li>
</ol></li>
<li><p>Repeat (4), but now with a sample size of 400 instead of 100. With the larger sample size, how do the mean and the standard deviation compare to what you got with a sample size of 100.</p></li>
<li><p>Repeat (4) but this time use 1200 trials instead of 300. With more trials, how do the mean and standard deviation compare to what you got with 300 trials?</p></li>
</ol>
<p>::: {.callout-note} ## Solution</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sample of size 100 from TenMileRace</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     state time  net age sex orig.id
4885    DC 5425 5236  25   F    4885
5006    DC 6330 5894  25   F    5006
7106    MD 7024 6859  36   F    7106
2855    NY 3647 3642  44   M    2855
6538    VA 7396 7011  32   F    6538</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        sz
1 1018.253</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">300</span>)<span class="sc">*</span> {<span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           sz
1   1009.2412
2   1080.4088
3   1076.7738
4   1037.6262
5    936.1272
6    995.6997
7    895.5608
8   1006.1889
9   1051.0661
10   799.8472
11   953.9587
12   985.8862
13   975.2823
14   869.7755
15   945.6848
16  1009.4801
17  1004.0570
18   907.5737
19  1060.0585
20  1051.8909
21  1005.5475
22   934.6241
23   821.5258
24   913.3310
25   913.1762
26   796.2751
27  1028.4195
28   921.1232
29   932.0399
30   808.8562
31  1054.6264
32   934.1953
33  1029.9414
34   940.3727
35   983.0229
36   961.2394
37   864.0049
38  1027.8732
39   997.0239
40   937.9659
41   962.1194
42   980.9509
43   909.5383
44   940.6860
45   830.9779
46   945.6262
47   938.0330
48   864.0883
49  1038.4482
50   914.9510
51  1017.9428
52   826.7827
53   865.6554
54   976.6800
55  1071.6430
56   966.1145
57   918.2089
58  1000.9689
59  1022.0730
60   973.3334
61   793.2800
62   975.8773
63   920.6931
64   975.4634
65  1056.1451
66   976.6221
67  1158.7964
68   867.4664
69  1047.3363
70  1022.3132
71   974.7377
72   884.8199
73   836.6617
74   962.7713
75   959.6849
76  1008.0555
77  1071.6863
78  1023.8964
79  1155.3710
80  1091.9595
81  1035.7381
82   986.9692
83   898.9379
84  1014.9450
85   936.3855
86   848.3864
87   848.1567
88  1023.6363
89  1043.8851
90   928.5409
91  1012.8730
92  1035.7213
93  1137.8530
94  1047.3587
95   930.2658
96  1040.0849
97   957.8035
98   869.6763
99   913.6973
100  890.8468
101  903.5271
102 1014.4305
103  915.7751
104 1049.4911
105  898.7698
106  898.6557
107  985.5365
108  832.7227
109 1012.2836
110  958.7534
111 1059.7042
112  872.4493
113 1093.3712
114 1005.2114
115  901.8604
116  950.6236
117  980.4132
118  816.3332
119 1034.4331
120  942.5698
121  914.1078
122 1003.4177
123  936.4748
124  952.1055
125  900.6898
126 1004.2186
127  805.5472
128  948.3356
129  938.8070
130 1040.6385
131  880.0175
132 1149.6420
133  923.1375
134  954.1567
135 1087.8328
136  902.7879
137  888.7876
138  990.5352
139  995.0679
140 1051.9897
141  997.2537
142 1031.1998
143 1041.7070
144  974.6964
145  936.4820
146  890.9031
147  997.8000
148  913.1186
149 1018.9110
150  919.7213
151 1097.0855
152  847.9868
153  935.8603
154  894.7459
155  834.0241
156  933.3015
157 1106.3504
158 1008.7301
159  938.5964
160 1088.8669
161  971.7746
162 1030.5763
163  934.2526
164 1003.9518
165 1010.2773
166  945.4323
167  919.8118
168  942.9875
169 1008.9996
170 1041.0529
171 1096.3182
172  922.8049
173  999.6727
174 1071.4121
175  947.8133
176  873.5218
177  851.4773
178  967.9924
179  821.2362
180 1001.1583
181  917.6957
182 1076.4044
183 1013.6176
184  906.2569
185  964.1698
186  910.1412
187 1080.9102
188  952.7444
189  990.3408
190  972.2411
191 1045.2739
192  903.4322
193  819.7990
194  994.9339
195  936.6365
196  876.4379
197  807.4809
198 1074.0191
199 1000.5393
200  861.7573
201  930.3602
202  889.8167
203  894.0057
204 1004.3008
205 1002.6039
206  884.3742
207  956.0467
208 1052.0412
209  994.3652
210 1040.6446
211 1096.6588
212  972.5306
213 1015.9175
214  965.3648
215  973.1470
216  844.3301
217  921.4419
218 1032.8226
219 1059.6224
220  935.0110
221  917.0129
222  883.5507
223 1037.4305
224  825.5281
225 1014.0070
226  983.4747
227 1058.7595
228  889.2972
229 1014.1845
230  871.9563
231  980.8193
232  939.4574
233 1002.4660
234  893.8260
235 1002.4629
236  919.9417
237  893.0585
238  935.8634
239  937.5459
240  922.2556
241  958.4362
242 1112.9653
243  862.6961
244  921.6117
245  920.9582
246  822.1217
247  970.7568
248 1065.7065
249  868.0343
250  947.0101
251  971.5025
252 1038.7532
253  987.7600
254  961.7646
255  964.7074
256 1139.1386
257  911.4628
258 1016.6597
259 1056.9211
260  971.9472
261  821.3213
262 1019.6135
263  867.1796
264 1104.3334
265  857.5102
266  878.5161
267  921.4474
268  936.1544
269 1063.7243
270  954.4185
271  874.3645
272  836.4004
273  908.2001
274  983.2935
275 1118.2780
276  941.5816
277 1127.5135
278 1040.2463
279  996.3490
280 1008.9344
281  858.1861
282  997.6924
283  939.2731
284 1044.2731
285 1075.8160
286 1058.7314
287 1005.5890
288 1113.5925
289  922.1158
290  963.1264
291 1163.6868
292 1049.5876
293 1001.8035
294  847.2920
295  886.5273
296  923.6066
297  974.7564
298  859.2654
299  991.8426
300  878.5662</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>{<span class="fu">do</span>(<span class="dv">300</span>)<span class="sc">*</span> {<span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))}} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(sz), <span class="at">s=</span><span class="fu">sd</span>(sz))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        m       s
1 964.737 78.9397</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>{<span class="fu">do</span>(<span class="dv">300</span>)<span class="sc">*</span> {<span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">400</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))}} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(sz), <span class="at">s=</span><span class="fu">sd</span>(sz))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         m        s
1 967.3298 39.10282</code></pre>
</div>
</div>
<ol start="5" type="1">
<li><p>Using a sample size that’s four times larger doesn’t affect the mean, but it reduces the standard deviation by a factor of two.</p></li>
<li><p>Increasing the number of trials does have any noticeable effect on either the mean or standard deviation.</p></li>
</ol>
<hr>
</section>
<section id="e-1" class="level2">
<h2 class="anchored" data-anchor-id="e-1">20.E</h2>
<p>Throughout this course, you’re going to be using <code>lm()</code> to build models. Often, to demonstrate “<strong>sampling variation</strong>.” you will use <code>sample()</code> on a dataset or a DAG to generate a random sample and then send the result as the <code>data=</code> argument to <code>lm()</code>,</p>
<p>Here are three computer commands that use the <code>data=</code> argument in different ways. One of them doesn’t work at all. Which one?</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(mtcars, <span class="at">size=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data=</span>.)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(mtcars, <span class="at">size=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data=</span><span class="fu">sample</span>(mtcars, <span class="at">size=</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>::: {.callout-warning} ## In draft</p>
<p>This problem would be come irrelevant if the <code>fitmodel()</code> command described in the [Lesson 19 NTI]{../NTI/NTI-Lesson19.html} is being used.</p>
</section>
<section id="documenting-software" class="level2">
<h2 class="anchored" data-anchor-id="documenting-software">Documenting software</h2>
<ul>
<li>File creation date: 2022-11-29</li>
<li>R version 4.2.1 (2022-06-23)</li>
<li><code>tidyverse</code> package version: 1.3.2</li>
<li><code>mosaic</code> package version: 1.8.4</li>
<li><code>math300</code> package version: 0.1.0.9000</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>