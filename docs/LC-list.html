<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Spring 2023 Math 300 Revisions - List of learning checks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Spring 2023 Math 300 Revisions</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lessons.html">
 <span class="menu-text">Lessons</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./layout.html">
 <span class="menu-text">Site layout</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./objective-list.html">
 <span class="menu-text">Objectives</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./LC-list.html" aria-current="page">
 <span class="menu-text">LCs</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">List of learning checks</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This list is assembled from the individual-lesson learning check files in the LC/ directory. Make any changes in that directory.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft: Data, temporarily
</div>
</div>
<div class="callout-body-container callout-body">
<p>Several of the problems refer to datasets in the <code>LC/data</code> subdirectory and documented in <code>LC/data/explain.qmd</code>. These should eventually be moved to the <code>math300</code> package. [Actually, not so many. Several of the examples from <em>CSP</em> refer to csv files, but those data are also available through the <code>openintro</code> or other packages.]</p>
</div>
</div>
<section id="non-technical-resources" class="level2">
<h2 class="anchored" data-anchor-id="non-technical-resources">Non-technical resources</h2>
<p>These are resources that can be used for an essay/reading exercise or class discussion.</p>
<section id="pudding.cool" class="level3">
<h3 class="anchored" data-anchor-id="pudding.cool"><code>pudding.cool</code></h3>
<p>Examples:</p>
<ul>
<li><a href="https://pudding.cool/2022/08/censorship/">Chinese censorship of the <em>Big Bang Theory</em></a></li>
<li><a href="https://pudding.cool/2018/08/pockets/">Comparing pocket sizes on women’s and men’s clothing</a></li>
<li><a href="https://pudding.cool/2022/06/streaming/">How artists get paid from music streaming</a></li>
<li><a href="https://pudding.cool/2022/04/random/">Randomness and age</a>. Perhaps suitable for Lesson 38 on “false discovery.”</li>
<li><a href="https://journal-doi.org/10.731/pcbi.1007742/">Coughing and the Academy awards</a> (The link was through &lt;pudding.cool&gt;.)</li>
<li><a href="https://pudding.cool/2022/02/redraft/">NBA draft</a></li>
<li><a href="https://pudding.cool/2022/02/plain/">Writing plainly</a></li>
<li>many others!</li>
</ul>
</section>
<section id="nyt-whats-going-on-with-this-graph" class="level3">
<h3 class="anchored" data-anchor-id="nyt-whats-going-on-with-this-graph">NYT “What’s going on with this graph?”</h3>
<p><a href="https://www.nytimes.com/column/whats-going-on-in-this-graph">Link to index</a></p>
<ul>
<li><a href="https://www.nytimes.com/2022/10/06/learning/whats-going-on-in-this-graph-oct-19-2022.html">Foreign born people as a fraction of the US Population</a></li>
<li><a href="https://www.nytimes.com/2022/09/15/learning/whats-going-on-in-this-graph-sept-21-2022.html">Tree rings and droughts</a></li>
<li>many others!</li>
</ul>
</section>
<section id="exercises-from-cps" class="level3">
<h3 class="anchored" data-anchor-id="exercises-from-cps">Exercises from <em>CPS</em></h3>
<ul>
<li>Section 29.6 Exercises
<ol type="1">
<li>Linear and nonlinear correlations</li>
<li>R<sup>2</sup></li>
</ol></li>
</ul>
</section>
</section>
<section id="lesson-19" class="level2">
<h2 class="anchored" data-anchor-id="lesson-19">Lesson 19</h2>
</section>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<p>The <code>math300</code> package will be needed for lessons 20 through 39.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(math300)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moderndive)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(NHANES)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">19.1</h2>
<p>Consider the <code>moderndive::evals</code> data that records students’ evaluations (<code>score</code>, on a 1-5 scale) of the professors in each of several courses (the course <code>ID</code>), as well as the <code>age</code>, “average beauty rating” (<code>bty_avg</code>) of the professor, enrollment in the course (<code>cls_students</code>) and the level o the course (<code>cls_level</code>). Each row in the data frame is an individual course section.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">ID</th>
<th style="text-align: right;">score</th>
<th style="text-align: right;">age</th>
<th style="text-align: right;">bty_avg</th>
<th style="text-align: right;">cls_students</th>
<th style="text-align: left;">cls_level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">329</td>
<td style="text-align: right;">2.7</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">2.333</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">upper</td>
</tr>
<tr class="even">
<td style="text-align: right;">313</td>
<td style="text-align: right;">4.2</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">2.667</td>
<td style="text-align: right;">86</td>
<td style="text-align: left;">upper</td>
</tr>
<tr class="odd">
<td style="text-align: right;">430</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">5.833</td>
<td style="text-align: right;">120</td>
<td style="text-align: left;">lower</td>
</tr>
<tr class="even">
<td style="text-align: right;">95</td>
<td style="text-align: right;">4.2</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">4.333</td>
<td style="text-align: right;">33</td>
<td style="text-align: left;">upper</td>
</tr>
<tr class="odd">
<td style="text-align: right;">209</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">3.667</td>
<td style="text-align: right;">34</td>
<td style="text-align: left;">upper</td>
</tr>
<tr class="even">
<td style="text-align: right;">442</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">3.333</td>
<td style="text-align: right;">39</td>
<td style="text-align: left;">lower</td>
</tr>
<tr class="odd">
<td style="text-align: right;">351</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">3.333</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">lower</td>
</tr>
<tr class="even">
<td style="text-align: right;">317</td>
<td style="text-align: right;">3.7</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">6.500</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">upper</td>
</tr>
<tr class="odd">
<td style="text-align: right;">444</td>
<td style="text-align: right;">4.1</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">4.500</td>
<td style="text-align: right;">111</td>
<td style="text-align: left;">lower</td>
</tr>
<tr class="even">
<td style="text-align: right;">315</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">6.000</td>
<td style="text-align: right;">88</td>
<td style="text-align: left;">upper</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The following commands model <code>score</code> versus <code>age</code> and plots the data as a point plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(score <span class="sc">~</span> age, <span class="at">data =</span> moderndive<span class="sc">::</span>evals) <span class="sc">%&gt;%</span> <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept)          age 
 4.461932354 -0.005938225 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> <span class="fu">gf_point</span>(score <span class="sc">~</span> age, <span class="at">alpha=</span><span class="fl">0.2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Explain why some of the dots are darker than others?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>All the ages have integer values—e.g., 43, 44, 45—so the dots line up in vertical lines.</p>
<p>Similarly, the scores have values only to one decimal place—e.g., 3.1, 3.2, 3.3—so the dots line up in horizontal lines. If there are two or more rows in <code>evals</code> that have the same age and score, the dots will be plotted over one another. Since transparency (<code>alpha = 0.2</code>) is being used, points where there is a lot of overplotting will appear darker.</p>
</div>
</div>
<ol start="2" type="1">
<li>Remake the plot, but using <code>gf_jitter()</code> instead of <code>gf_point()</code>. Explain what’s different about the jittered plot. (Hint: Almost all of the dots are the same lightness.)</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> <span class="fu">gf_jitter</span>(score <span class="sc">~</span> age, <span class="at">alpha=</span><span class="fl">0.2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>“Jittering” means to shift each dot by a small random amount. This reduces the number of instances where dots are overplotted.</p>
</div>
</div>
<ol start="3" type="1">
<li>Now make a jitter plot of score versus class level (<code>cls_level</code>).
<ol type="a">
<li>What do the tick-mark labels on the horizontal axis describe? Are they numerical?</li>
<li>To judge from the plot, are their more lower-level than upper-level courses? Explain briefly what graphical feature lets you answer this question at a glance.</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> <span class="fu">gf_jitter</span>(score <span class="sc">~</span> cls_level)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="a">
<li>The tick-mark labels are the levels of the categorical variable <code>cls_level</code>. The are words, not numbers.</li>
<li>There are many more dots in the right column than in the left. Since <code>lower</code> level class are shown in the left column, there are fewer lower-level courses than upper-level courses.</li>
</ol>
</div>
</div>
<ol start="4" type="1">
<li><p>The two columns of points in the plot you made in (3) are not separated by very much empty space. You can fix this by giving <code>gf_jitter()</code> an argument <code>width=0.2</code>. Try different numerical values for <code>width</code> and report which one you find most effective at making the two columns clearly separated while avoiding overplotting.</p></li>
<li><p>Are the scores, on average, different for the lower- vs upper-level classes? It’s hard to get more than a rough idea of the distribution of scores by looking at the “density” of points. The reason is that the number of points differs in the two columns. But there is an easy fix: add a layer to the graphic that shows the distribution (more or less like a histogram displays a distribution of values). You can do this by piping the jitter plot layer into a geom called a “violin,” like this:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>openintro<span class="sc">::</span>evals <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_jitter</span>(score <span class="sc">~</span> cls_level) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_violin</span>(<span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">alpha=</span><span class="fl">0.2</span>, <span class="at">color=</span><span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Explain how to read the violins.</p>
<hr>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">19.2</h2>
<p>The <code>openintro::promotions</code> data comes the the 1970s and records the gender of 38 people along with the result of a decision to promote (or not) the person. =</p>
<p>Chapter 2 of ModernDive suggests graphically depicting <code>decision</code> versus <code>gender</code> by using a bar plot. There are two ways to make the bar plot, depending on which variable you assign to the horizontal axis and which to the fill color.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span> decision, <span class="at">fill=</span><span class="sc">~</span> gender)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span> gender, <span class="at">fill=</span><span class="sc">~</span>decision)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-promotion-bars-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="LC-list_files/figure-html/fig-promotion-bars-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Two different ways to plot promotion outcome and gender</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div id="fig-promotion-bars-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="LC-list_files/figure-html/fig-promotion-bars-2.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Two different ways to plot promotion outcome and gender</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Plots like those in <strong>?@fig-promotion-bars</strong> might be attractive or not, depending on your taste. What they don’t accomplish is to make sure which is the response variable and which the explanatory variable.</p>
<p>The choice of response and explanatory variables depends, of course, on what you are trying to display. But everyday English gives a big hint. For instance, you might describe the question at hand as, “Does gender affect promotion decisions.” Here, the variable doing the affecting is <code>gender</code>, and the outcome is the <code>decision</code>.</p>
<p>Modeling decision as a function of gender is easy once you convert the response variable to a zero-one variable. Like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">zero_one</span>(decision, <span class="at">one=</span><span class="st">"promoted"</span>) <span class="sc">~</span> gender, <span class="at">data =</span> promotions)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coefficients</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept) genderfemale 
   0.8750000   -0.2916667 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mosaicModel<span class="sc">::</span><span class="fu">mod_eval</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  gender model_output
1   male    0.8750000
2 female    0.5833333</code></pre>
</div>
</div>
<ol type="1">
<li>Explain what is the relationship between the model coefficients and the model outputs.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The coefficients tell how to calculate the model output. These coefficients say that the model output will be 0.875, but subtract 0.292 if the person is female.</p>
<p>The model outputs give the probability of being promoted for each of the two genders.</p>
</div>
</div>
<ol start="2" type="1">
<li>Make this plot and explain what the red lines show. (We don’t expect you to be able to write the command to generate such plots on your own, but we do expect you to be able to interpret them.)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>promotions <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_jitter</span>(<span class="fu">zero_one</span>(decision) <span class="sc">~</span> gender, <span class="at">height=</span><span class="fl">0.2</span>, <span class="at">width=</span><span class="fl">0.2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_errorbar</span>(model_output <span class="sc">+</span> model_output <span class="sc">~</span> gender, <span class="at">data=</span><span class="fu">mod_eval</span>(mod), </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span><span class="st">"red"</span>, <span class="at">inherit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">label_zero_one</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The red lines show the proportion of the people in each gender group who were promoted. The y-axis scale on the left refers to the zero-one encoding of <code>decision</code>, while the y-axis labels on the right make it easier to read off the numerical value of the proportion.</p>
</div>
</div>
<hr>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">19.3</h2>
<p>The <code>mosaicData::Whickham</code> data from comes from a survey of a thousand or so nurses in the UK in the 1970s. The data record the <code>age</code> of each nurse along with whether the nurse was still alive in a follow-up survey 20 years later (<code>outcome</code>).</p>
<p>Make this graph from the <code>Whickham</code> data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_jitter</span>(<span class="fu">zero_one</span>(outcome) <span class="sc">~</span> age, <span class="at">data =</span> Whickham, <span class="at">alpha=</span><span class="fl">0.3</span>, <span class="at">height=</span><span class="fl">0.1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">label_zero_one</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li><p>Explain in everyday language what the graph shows about the lives of humans.</p></li>
<li><p>Make the graph again, but leave out the <code>%&gt;% label_zero_one()</code>. Then explain what <code>label_zero_one()</code> does.</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>The graph shows that young nurses tended to be alive at the 20-year follow-up, older nurses not so much.</p></li>
<li><p><code>%&gt;% label_zero_one()</code> adds an axis on the left of the graph showing that in the zero-one tranform of <code>outcome</code>, “Alive” is assigned the value 1 and “Dead” the value 0.</p></li>
</ol>
</div>
</div>
<section id="solution-6" class="level3">
<h3 class="anchored" data-anchor-id="solution-6">Solution</h3>
<hr>
</section>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3">19.4</h2>
<p>About the summarization of models. Pipe the model fit into any of four functions:</p>
<ol type="i">
<li><code>%&gt;% coefficients()</code></li>
<li><code>%&gt;% broom::tidy()</code></li>
<li><code>%&gt;% rsquared()</code></li>
<li><code>%&gt;% confint()</code></li>
</ol>
<p>REDO <code>confint()</code> so that the columns are named <code>lower</code>, <code>middle</code>, <code>upper</code></p>
<section id="solution-7" class="level3">
<h3 class="anchored" data-anchor-id="solution-7">Solution</h3>
<hr>
</section>
</section>
<section id="obj.-19.3" class="level2">
<h2 class="anchored" data-anchor-id="obj.-19.3">19.5 (Obj. 19.3)</h2>
<p>Calculation of a 95% coverage interval (or any other percent level interval) is straightforward with the right software. To illustrate, consider the efficiency of cars and light trucks in terms of CO_2 emissions per mile driven. We’ll use the <code>CO2city</code> variable in the <code>math300::MPG</code> data frame. The basic calculation using the <code>mosaic</code> package is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">df_stats</span>( <span class="sc">~</span> CO2city, <span class="at">data =</span> math300<span class="sc">::</span>MPG, <span class="fu">coverage</span>(<span class="fl">0.95</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  response   lower   upper
1  CO2city 276.475 684.525</code></pre>
</div>
</div>
<p>The following figure shows a violin plot of <code>CO2city</code> which has been annotated with various coverage intervals. Use the calculation above to identify which of the intervals corresponds to which coverage level.</p>
<ol type="1">
<li>50% coverage interval -A- (c)</li>
<li>75% coverage interval -A- (e)</li>
<li>90% coverage interval -A- (g)</li>
<li>100% coverage interval -A- (i). This extends from the min to the max, so you could have figured this out just from the figure.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/kangaroo-freeze-candy-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<hr>
</section>
<section id="obj-19.3" class="level2">
<h2 class="anchored" data-anchor-id="obj-19.3">19.6 (Obj 19.3)</h2>
<p>The two jitter + violin graphs below show the distribution of two different variables, X and Y. Which variable has more variability?</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/goat-take-linen-1-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/goat-take-linen-1-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is about the same level of variability in variable A and variable B. This surprises some people. Remember, the amount of variability has to do with the spread of <em>values</em> of the variable. In variable B, those values are have a 95% prediction interval of about 30 to 65, about the same as for variable A. There are two things about plot (b) that suggest to many people that there is more variability in variable B.</p>
<ol type="1">
<li>The larger horizontal spread of the dots. Note that variable B is shown along the vertical axis. The horizontal spread imposed by jittering is completely arbitrary: the only values that count are on the y axis.<br>
</li>
<li>The scalloped, irregular edges of the violin plot.</li>
</ol>
<p>On the other hand, some people look at the clustering of the data points in graph (b) into several discrete values, creating empty spaces in between. To them, this clustering implies less variability. And, in a way, it does. But the <em>statistical</em> meaning of variability has to do with the overall spread of the points, not whether they are restricted to discrete values.</p>
</div>
</div>
<hr>
</section>
<section id="objs.-19.3-19.4" class="level2">
<h2 class="anchored" data-anchor-id="objs.-19.3-19.4">19.7 (Objs. 19.3 &amp; 19.4)</h2>
<p>The graphs below show a violin plot of body mass index (BMI) for adults and children. One of the graphs shows a correct 95% coverage interval on BMI, the other does not.</p>
<p>Identify the incorrect graph and say what feature of the graph led to your answer.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/goat-hurt-painting-1-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/goat-hurt-painting-1-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Graph (b) is correct. In graph (a), you can see that the interval fails to include a lot of the low BMI children and extends too high. For adults, the graph (a) interval extends too far low and doesn’t go high enough.</p>
</div>
</div>
<hr>
</section>
<section id="e" class="level2">
<h2 class="anchored" data-anchor-id="e">19.E</h2>
<p>There are two equivalent formats describing an interval numerically that are widely used:</p>
<ol type="i">
<li>Specify the lower and upper endpoints of the interval, e.g.&nbsp;7 to 13.</li>
<li>Specify the center and half-width of the interval, e.g.&nbsp;10 ± 3, which is just the same as 7 to 13.</li>
</ol>
<p>Complete the following table to show the equivalences between the two notations.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">Interval</th>
<th style="text-align: left;">bottom-to-top</th>
<th style="text-align: left;">plus-or-minus</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(a)</td>
<td style="text-align: left;">3 to 11</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">(b)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">108 ± 10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">(c)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">30 ± 1</td>
</tr>
<tr class="even">
<td style="text-align: left;">(d)</td>
<td style="text-align: left;">97 to 100</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">(e)</td>
<td style="text-align: left;">-4 to 16</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="a">
<li>7 ± 4</li>
<li>98 to 118</li>
<li>29 to 31</li>
<li>98.5 ± 1.5</li>
<li>6 ± 10</li>
</ol>
<p>It’s a matter of judgement which format to use. The bottom-to-top notation highlights the range of the interval while the plus-or-minus notation emphasizes the center of the interval. As a rule of thumb, I suggest this:</p>
<ul>
<li>If the first two digits are different between the top and bottom of the interval, use the bottom-to-top notation. So, write 387 to 393. If the first two digits are the same, use plus-or-minus. For instancer, the ratio of the mass of the Earth to that of the Moon is 81.3005678 ± 0.0000027. This is easier to take in at a glance than the equivalent 81.3005651 - 81.3005708</li>
</ul>
</div>
</div>
<hr>
</section>
<section id="f" class="level2">
<h2 class="anchored" data-anchor-id="f">19.F</h2>
</section>
<section id="lesson-20" class="level2">
<h2 class="anchored" data-anchor-id="lesson-20">Lesson 20</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Only for use in drafting questions
</div>
</div>
<div class="callout-body-container callout-body">
<p>20.1. Understand that gaming is a way of improving our skills and identifying potential opportunities and problems.</p>
<p>20.2 Characterize the “size” of a variable or of random noise using variance (or, equivalently, “standard deviation”).</p>
<p>20.3 Distinguish between a sample, a summary of a sample, and a sample of summaries of samples.</p>
</div>
</div>
<hr>
</section>
<section id="a" class="level2">
<h2 class="anchored" data-anchor-id="a">20.A</h2>
<p>You’re having a conversation about your statistics course with your engineer aunt at Thanksgiving. You tell her about how the course uses gaming (e.g.&nbsp;simulated data from DAGs) to develop an understanding of statistical methodology. She says (sensibly), “What? Simulated data? Isn’t statistics supposed to be about real data? It’s not a game.”</p>
<ol type="1">
<li><p>Write a paragraph-long response to your aunt explaining the point of gaming in learning statistics. Your paragraph should make a compelling case for gaming.</p></li>
<li><p>Write another paragraph that expresses any concerns you have about using games in a course that’s supposed to be about methods for extracting information about the world from real data.</p></li>
</ol>
<hr>
</section>
<section id="b" class="level2">
<h2 class="anchored" data-anchor-id="b">20.B</h2>
<p>Write statements using the computer commands covered in the first half of the course to calculate the <strong>size</strong> of the variability of these quantities:</p>
<ol type="1">
<li><p>The <code>age</code> variable from the <code>Cherry_race_longitudinal</code> data frame.</p></li>
<li><p>The <code>Height</code> variable from the <code>NHANES</code> data frame.</p></li>
<li><p>Compute the body-mass index from the formula <span class="math inline">\(\text{BMI} = \frac{w^2}/h\)</span> where <span class="math inline">\(w\)</span> is the person’s weight and <span class="math inline">\(h\)</span> is the person’s height. Then calculate the <strong>size</strong> of the variability of the BMI you calculate from the <code>NHANES</code> data.</p></li>
</ol>
<hr>
</section>
<section id="c" class="level2">
<h2 class="anchored" data-anchor-id="c">20.C</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Show pictures of data together with violins. Ask students to estimate the “size” of the variation and to mark on the graph an annotation reflecting the “size.”</p>
<p>Is “size” a single number or a pair of numbers?</p>
<p>Contrast “size” with the coverage interval: why is one of them two numbers and the other just a single number.</p>
</div>
</div>
<hr>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4">20.1</h2>
<p><strong>?@sec-size-of-variable</strong> (in the reading for this variable) describes two very closely related summary quantities used to measures of the “size” of a variable: a) the variance and b) the “standard deviation” (which is the square root of the variance).</p>
<ol type="i">
<li>Using software, what is the variance of the XXX variable in the YYY data frame? Make sure to include the <em>units</em>.</li>
<li>What is the “standard deviation” of the XXX variable? Calculate this in two different ways: i. “by-hand” taking of the square root of the variance; ii. using the <code>sd()</code> software directly.</li>
</ol>
<p>[Repeat for a number of variables from different data frames.]</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="d" class="level2">
<h2 class="anchored" data-anchor-id="d">20.D</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>In arithmetic notation, parentheses are used to group operations. So, <span class="math inline">\(4*(3+2)\)</span> is different from <span class="math inline">\(4*3 + 2\)</span>. With <code>do()</code>, a similar logic applies, but we use curly braces—not parentheses—for the grouping. Another difference is that with <code>do()</code> and summarization, some configurations may not work at all because using braces or not will produce different data frames with different names.</p>
<ol type="1">
<li>Try the following two commands, which differ in how curly braces are used.</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>)} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>One command produces an error message and the other doesn’t. Explain what’s wrong with the erroneous command.</p>
<ol start="2" type="1">
<li>Try these two statements. Again, one will work and the other won’t. Diagnose the</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>{ <span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))} } <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz=</span><span class="fu">sd</span>(m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         sz
1 0.3015075</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> {<span class="fu">sample</span>(Galton, <span class="at">size=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(height))} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(m))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sz
1 NA
2 NA
3 NA
4 NA
5 NA</code></pre>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="e-1" class="level2">
<h2 class="anchored" data-anchor-id="e-1">20.E</h2>
<p>Write single-line computer statements that will do the following (related) tasks:</p>
<ol type="1">
<li><p>Draw a sample of size 5 from the <code>mosaicData::TenMileRace</code> data</p></li>
<li><p>Draw a sample (but now of size 100) and compute the “size” of variation of the <code>net</code> variable (which gives the net time to complete the race, start line to finish line).</p></li>
<li><p>Carry out 300 trials of (2) using the <code>do()</code> operator. (The result should be a data frame with entries that vary.) Note: Surround the statement for a single trial with curly braces: <code>{</code> and <code>}</code>. Also, arrange for the name of the column in the overall result to be <code>sz</code>. This will appear in the <code>summarize()</code> command.</p></li>
<li><p>Add on to (3) the computations needed to calculate the mean and the standard deviation of the trials? Note: Surround the statement from (3) with a pair of curly braces so that the <code>summarize()</code> command will look at all 300 trials as a single data frame.</p>
<ol type="i">
<li><p>Is the mean thus calculated a single number comprising all trials or a number for each trial? Briefly justify your answer in terms of what the mean of the trials should be about.</p></li>
<li><p>Eexplain what the standard deviation of the trials captures and why it’s different from the standard deviation on one trial (as from (2)).</p></li>
</ol></li>
<li><p>Repeat (4), but now with a sample size of 400 instead of 100. With the larger sample size, how do the mean and the standard deviation compare to what you got with a sample size of 100.</p></li>
<li><p>Repeat (4) but this time use 1200 trials instead of 300. With more trials, how do the mean and standard deviation compare to what you got with 300 trials?</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sample of size 100 from TenMileRace</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     state time  net age sex orig.id
7127    VA 4820 4796  37   F    7127
1870    VA 5928 5518  36   M    1870
4531    MD 5563 5563  23   F    4531
1356    MD 5250 5090  33   M    1356
2003    MD 5875 5435  37   M    2003</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        sz
1 951.0684</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">300</span>)<span class="sc">*</span> {<span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           sz
1    972.5812
2    824.8592
3    821.5586
4    938.5612
5    939.4491
6    928.3224
7    965.7778
8    992.9269
9    992.3919
10  1080.1513
11   943.7595
12  1037.2753
13  1012.8912
14   996.0352
15  1079.2897
16   899.4723
17   906.8983
18   862.4734
19   924.8717
20  1039.7077
21   964.8859
22   912.1430
23   955.7692
24  1079.1801
25   945.2650
26  1001.7177
27   955.8785
28   934.3646
29   990.0511
30   962.5995
31   967.1691
32  1097.1731
33   907.0343
34   993.1500
35   937.3869
36   939.2032
37   907.1917
38   936.3380
39   936.3048
40  1053.9427
41   903.9515
42  1122.2634
43  1029.8397
44   926.2964
45  1103.9172
46   975.8339
47  1083.2056
48   938.3758
49   899.2549
50   992.7765
51   990.9264
52   813.2843
53  1102.1025
54   755.8189
55  1008.5489
56   913.3470
57  1055.8151
58  1006.8449
59   826.4333
60  1007.9796
61   988.5770
62  1016.8350
63   967.5634
64   932.8218
65   949.6178
66   935.0267
67   899.5244
68   815.5198
69   933.8537
70  1017.0440
71   779.8278
72   867.1942
73  1004.3558
74  1005.0899
75  1118.5752
76   866.4319
77  1040.7873
78  1025.7857
79   967.3428
80   971.8905
81  1029.6817
82  1001.2666
83   858.4597
84   910.2976
85   950.5084
86   963.3022
87   967.6966
88   956.6273
89   843.8254
90  1029.6041
91   951.6543
92  1042.9482
93   874.5089
94   909.2968
95   962.3898
96  1074.9379
97   881.3408
98   936.6853
99   895.3177
100  975.7541
101  972.2259
102 1010.0560
103  789.2095
104 1132.4296
105  969.5747
106  957.4232
107 1014.8825
108  857.2816
109 1103.3705
110  851.8963
111 1002.6471
112  819.0540
113  982.2953
114  915.8515
115  996.1651
116  855.4621
117  878.6094
118  912.6942
119 1030.0310
120  825.6659
121 1005.7683
122 1031.5542
123 1126.4620
124 1100.2412
125  915.7616
126  921.1658
127  999.6651
128  978.5067
129  844.5894
130  955.6868
131  947.4918
132  963.0174
133  952.6687
134 1074.9521
135  950.0944
136  844.6555
137 1066.3125
138  980.3699
139 1119.9149
140 1037.1454
141  949.1217
142 1094.5156
143  975.7513
144  813.0390
145  814.3828
146  949.0838
147  861.1970
148  955.8846
149  975.3213
150  882.5769
151  933.1666
152  806.5156
153  827.7887
154  930.9380
155  944.4835
156 1026.5458
157 1112.7747
158 1038.9871
159  835.5357
160  921.8688
161  927.8762
162  928.4328
163  771.5887
164 1093.4424
165 1125.0387
166  864.7831
167  857.8454
168  903.1473
169  957.3963
170  860.0105
171  886.2518
172  914.7956
173  993.6665
174  857.3370
175  830.1747
176 1003.2101
177 1096.0726
178  971.3859
179  970.9167
180  907.7088
181  982.6391
182  930.2694
183  950.4383
184  956.4709
185  957.9360
186  938.9992
187  902.7469
188  997.7660
189  952.0713
190  850.9500
191  900.8205
192  996.3816
193  978.8046
194  955.1345
195 1019.0840
196  907.4728
197 1107.4039
198  956.8556
199 1005.5707
200  954.7452
201 1051.8599
202  927.9475
203  835.2828
204  983.7366
205  935.3973
206  943.8083
207  921.2009
208  859.0696
209  950.8036
210 1013.8412
211 1012.3216
212  934.2267
213  856.8701
214  939.1951
215 1050.0359
216  946.4714
217 1043.4746
218  934.7167
219  958.0577
220  938.1260
221  959.8289
222 1023.2610
223  944.8401
224 1126.1726
225 1036.0903
226  888.6611
227  874.7365
228  798.1713
229 1143.1490
230  969.9378
231  957.8012
232 1073.4201
233  917.0050
234  891.6083
235 1028.5489
236  971.0936
237 1045.8578
238 1068.3065
239  973.8031
240 1103.5208
241  978.3619
242 1074.7413
243 1011.4880
244  963.8257
245  891.8563
246  988.9697
247 1073.4325
248 1183.1512
249  945.7524
250 1086.4373
251  793.2965
252  972.1942
253 1032.7620
254  926.8040
255  944.1331
256  940.1985
257 1089.3612
258  921.3067
259 1104.1693
260  863.2042
261 1023.1090
262  889.9317
263 1134.5078
264  971.4643
265 1038.0073
266  969.7236
267  982.1654
268 1022.1162
269  910.0159
270 1019.7098
271  910.3500
272  953.3862
273  961.2607
274  854.7824
275  908.5864
276  877.5796
277  904.0877
278  980.0922
279  942.7869
280 1079.1974
281  947.2121
282  896.4217
283  953.9140
284  786.3968
285 1111.9730
286 1189.9003
287  909.4212
288 1013.4597
289  835.7166
290  985.0277
291 1030.3573
292 1005.7200
293  932.0799
294  910.6702
295  965.9356
296  812.0218
297  910.2485
298 1055.7511
299  988.8919
300  891.1537</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>{<span class="fu">do</span>(<span class="dv">300</span>)<span class="sc">*</span> {<span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))}} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(sz), <span class="at">s=</span><span class="fu">sd</span>(sz))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         m       s
1 970.0165 85.8338</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>{<span class="fu">do</span>(<span class="dv">300</span>)<span class="sc">*</span> {<span class="fu">sample</span>(TenMileRace, <span class="at">size=</span><span class="dv">400</span>) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">sz =</span> <span class="fu">sd</span>(net))}} <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(sz), <span class="at">s=</span><span class="fu">sd</span>(sz))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         m        s
1 965.6244 36.77361</code></pre>
</div>
</div>
<ol start="5" type="1">
<li><p>Using a sample size that’s four times larger doesn’t affect the mean, but it reduces the standard deviation by a factor of two.</p></li>
<li><p>Increasing the number of trials does have any noticeable effect on either the mean or standard deviation.</p></li>
</ol>
<hr>
<section id="e-2" class="level2">
<h2 class="anchored" data-anchor-id="e-2">20.E</h2>
<p>Throughout this course, you’re going to be using <code>lm()</code> to build models. Often, to demonstrate “<strong>sampling variation</strong>.” you will use <code>sample()</code> on a dataset or a DAG to generate a random sample and then send the result as the <code>data=</code> argument to <code>lm()</code>,</p>
<p>Here are three computer commands that use the <code>data=</code> argument in different ways. One of them doesn’t work at all. Which one?</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(mtcars, <span class="at">size=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data=</span>.)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(mtcars, <span class="at">size=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data=</span><span class="fu">sample</span>(mtcars, <span class="at">size=</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>This problem would be come irrelevant if the <code>fitmodel()</code> command described in the [Lesson 19 NTI]{../NTI/NTI-Lesson19.html} is being used.</p>
<section id="lesson-21" class="level2">
<h2 class="anchored" data-anchor-id="lesson-21">Lesson 21</h2>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5">21.1</h2>
<p>The following command will generate a data frame with 1000 rows from <code>dag00</code> and calculate the variance of the <code>x</code> and <code>y</code> variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(dag00, <span class="at">size=</span><span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">vx =</span> <span class="fu">var</span>(x), <span class="at">vy =</span> <span class="fu">var</span>(y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
     vx    vy
  &lt;dbl&gt; &lt;dbl&gt;
1  3.78  1.04</code></pre>
</div>
</div>
<p>Compare this result to the DAG tilde expressions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>dag00</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
x ~ eps(2) + 5

[[2]]
y ~ eps(1) - 7

attr(,"class")
[1] "list"      "dagsystem"</code></pre>
</div>
</div>
<p>In the tilde expressions, <code>eps(2)</code> means to generate noise of magnitude 2.0.</p>
<ol type="1">
<li>Is the argument to <code>eps()</code> specified in terms of the variance or the standard deviation?</li>
<li>The tilde expression for <code>x</code> specifies that the constant <code>5</code> is to be added to <code>eps(2)</code>. Similarly, the constant <code>-7</code> is added to <code>y</code>. How do these constants relate to the calculated magnitudes of <code>x</code> and <code>y</code>?</li>
</ol>
<section id="solution-13" class="level3">
<h3 class="anchored" data-anchor-id="solution-13">Solution</h3>
<ol type="1">
<li>The standard deviation. For instance, <code>x</code> has noise of magnitude 2. The variance of <code>x</code> is 4, the square of 2.</li>
<li>The standard deviation (and therefore the variance) ignore such added constants.</li>
</ol>
<hr>
</section>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6">21.2</h2>
<p><strong>?@sec-signal-and-noise</strong> introduces the idea that variables consist of components. A simple breakdown is into two components: i. the part of the variable that is determined by other variables in the system (“signal”) and ii. the random part of the variable (“noise”). The section uses <code>dag01</code> as an illustration of how a variable can be partly determined and partly random noise.</p>
<ol type="i">
<li><p>Write and execute a command that will generate 500 rows of simulated data from <code>dag01</code> and will calculate the standard deviation of <code>x</code> and of <code>y</code>.</p></li>
<li><p>What’s the magnitude of <code>x</code> in the simulated data? What’s the magnitude of <code>y</code>?</p></li>
<li><p>Does this change if you use data with 1000 or 20000 rows?</p></li>
</ol>
<section id="solution-14" class="level3">
<h3 class="anchored" data-anchor-id="solution-14">Solution</h3>
<ol type="i">
<li><code>sample(dag01, size=500) %&gt;% summarize(sx = sd(x), sy=sd(y))</code></li>
<li>The standard deviation of <code>x</code> is about 1, the standard deviation of <code>y</code> is about 1.8.</li>
<li>No, the values are roughly the same regardless of the size of the sample.</li>
</ol>
<hr>
</section>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7">21.3</h2>
<p>[DRAW several DAG-like graphs, one of which should be undirected in all edges, one should be undirected on one or two edges (but not all), and one should be cyclic and another acyclic.]</p>
<p>Referring to the graphs in the figure, say which ones are DAGs. If a graph is not a DAG, say whether that’s because it’s not <strong>directed</strong> or because it’s not <strong>cyclic</strong>.</p>
<section id="solution-15" class="level3">
<h3 class="anchored" data-anchor-id="solution-15">Solution</h3>
</section>
</section>
<section id="a-1" class="level2">
<h2 class="anchored" data-anchor-id="a-1">21.A</h2>
<p>A DAG (directed acyclic graph) is a mathematical object used to state hypothetical causal relationships between variables. Explain briefly (e.g.&nbsp;a few sentences overall) what each of the words “directed,” “acyclic,” and “graph” mean in the context of a DAG.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>A graph is a relationship between discrete elements (called “nodes” abstraction) each of which for us represents a hypothetical quantity, that is, a variable. In addition to the nodes, the graph contains edges which represent the connections between variables.</p></li>
<li><p>A directed graph is one whose arrows have a direction. For instance <span class="math inline">\(A \rightarrow B \leftarrow C\)</span> means that <span class="math inline">\(A\)</span> and <span class="math inline">\(C\)</span> together cause <span class="math inline">\(B\)</span>, but <span class="math inline">\(B\)</span> has no influence on <span class="math inline">\(A\)</span> and <span class="math inline">\(C\)</span>.</p></li>
<li><p>An acyclic graph is one where it is impossible to start on any given node and, by following the directed edges, return back to that node.</p></li>
</ol>
</div>
</div>
<hr>
</section>
<section id="b-1" class="level2">
<h2 class="anchored" data-anchor-id="b-1">21.B</h2>
<p>Draw these DAGs:</p>
<ol type="1">
<li><p>“April showers bring May flowers.”</p></li>
<li><p>“Price of a rug is determined by the size and the quality of materials.”</p></li>
<li><p>“The weight of an automobile is reflected in the MPG fuel economy, as is the speed of the car, and inflation level of the tires.”</p></li>
<li><p>“Plants tend to grow in the direction of the sunlight.”</p></li>
<li><p>“An ice-cream shop owner needs to plan staffing based on the season, day of the week, and holidays.”</p></li>
</ol>
<hr>
</section>
<section id="c-1" class="level2">
<h2 class="anchored" data-anchor-id="c-1">21.C</h2>
<hr>
</section>
<section id="section-8" class="level2">
<h2 class="anchored" data-anchor-id="section-8">21.4</h2>
<p>Generate simulated data from <code>dag01</code> with 1000 rows. Fit the regression model <code>y ~ x</code> to the data and examine the coefficients.</p>
<ol type="1">
<li><p>How do the coefficients relate to the tilde expressions that define <code>dag01</code>?</p></li>
<li><p>Instead of using the regression model <code>y ~ x</code>, where <code>y</code> is the response variable, try the regression model <code>x ~ y</code>. Do the coefficients from <code>x ~ y</code> correspond in any simple way to the tilde expressions that define <code>dag01</code>?</p></li>
</ol>
<section id="solution-17" class="level3">
<h3 class="anchored" data-anchor-id="solution-17">Solution</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">1000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(y <span class="sc">~</span> x, <span class="at">data =</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x, data = .)

Coefficients:
(Intercept)            x  
      4.018        1.507  </code></pre>
</div>
</div>
<p>The intercept corresponds to the additive constant (4) in the <code>y</code> tilde expression. The <code>x</code> coefficient corresponds to the multiplier on <code>x</code> in the tilde expression.</p>
<p>The formula for <code>x</code> isn’t reflected by the coefficients.</p>
<p>Using <code>x</code> as the response variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">10000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(x <span class="sc">~</span> y, <span class="at">data =</span> .)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = x ~ y, data = .)

Coefficients:
(Intercept)            y  
     -1.850        0.462  </code></pre>
</div>
</div>
<p>These coefficients do not appear in the <code>dag01</code> tilde expressions.</p>
<hr>
</section>
</section>
<section id="objective-21.2" class="level2">
<h2 class="anchored" data-anchor-id="objective-21.2">21.5 (Objective 21.2)</h2>
<p>You are trying to understand why automobile fuel economy varies from model to model. Using the <code>mtcars</code> data frame (documentation at <code>help("mtcars")</code>) …</p>
<ol type="i">
<li>What’s an appropriate choice of a response variable?</li>
<li>Pick two explanatory variables of interest to you. Build an appropriate model from the data, extracting the <code>coefficients()</code> of the model. Explain what the coefficients mean in everyday terms that your cylinder-head uncle would approve of.</li>
<li>Which of the other variables are covariates? iv.Pick a covariate that your intuition suggests would be important. Include that covariate in the model from (ii) and say whether the covariate shows up as important in the model coefficients.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol start="3" type="i">
<li>All of the other variables are covariates. A covariate is merely a potential explanatory variable that you are not directly interested in. Of course, not all covariates play an important role in the system.</li>
</ol>
</div>
</div>
<hr>
</section>
<section id="obj-21.3" class="level2">
<h2 class="anchored" data-anchor-id="obj-21.3">21.6 (Obj 21.3)</h2>
<p>Generate a sample of size <span class="math inline">\(n=100\)</span> from <code>dag03</code>. Use the data to construct a model of <code>y</code> versus <code>x</code>. But instead of using <code>coefficients()</code> to look at the model coefficients, use <code>confint()</code>. While <code>coefficients()</code> reports a single value for each coefficient, <code>confint()</code> reports a plausible interval for coefficients that is consistent with the data.</p>
<ol type="i">
<li>For <span class="math inline">\(n=100\)</span>, how wide is the interval reported by <code>confint()</code> on the <code>x</code> coefficient.</li>
<li>Repeat the process of sampling and modeling, but this time use <span class="math inline">\(n=400\)</span>. How wide is the interval reported by <code>confint()</code> on the <code>x</code> coefficient.</li>
<li>Again repeat the process of sampling and modeling, this time using <span class="math inline">\(n=1600\)</span>. iv. Does the interval reported depend systematically on the size <span class="math inline">\(n\)</span> of the sample? Describe what pattern you see.</li>
</ol>
<hr>
</section>
<section id="section-9" class="level2">
<h2 class="anchored" data-anchor-id="section-9">21.7</h2>
<p>A short report from the British Broadcasting Company (BBC) was headlined “<a href="https://www.bbc.com/news/business-47106711">Millennials’ pay ‘scarred’ by the 2008 banking crisis</a>.”</p>
<blockquote class="blockquote">
<p>Pay for workers in their 30s is still 7% below the level at which it peaked before the 2008 banking crisis, research has suggested. The Resolution Foundation think tank said people who were in their 20s at the height of the recession a decade ago were worst hit by the pay squeeze. It suggested the crisis had a lasting “scarring” effect on their earnings.</p>
</blockquote>
<blockquote class="blockquote">
<p>The foundation said people in their 30s who wanted to earn more should move to a different employer. The research found those who stayed in the same job in 2018 had real wage growth of 0.5%, whereas those who found a different employer saw an average increase of 4.5%.</p>
</blockquote>
<p>The phrase “should move” in the second paragraph of the report suggests causation. A corresponding DAG would look like this:</p>
<ul>
<li>move_to_new_employer <span class="math inline">\(\rightarrow\)</span> higher_wage</li>
</ul>
<p>For the sake of discussion, let’s add two more variables to the DAG:</p>
<ul>
<li>effectiveness—standing for how productive the employee is.</li>
<li>qualifications—standing for whether the employee is a good candidate attractive to potential new employers.</li>
</ul>
<p>Construct a DAG with all four variables that represent plausible causal connections between them. The DAG should not contain a direct causal connection between move_to_new_employer and higher_wage.</p>
<p>If the world worked this way, would it necessarily be good advice to switch to a new employer with the aim of earning a higher wage?</p>
</section>
<section id="lesson-22" class="level2">
<h2 class="anchored" data-anchor-id="lesson-22">Lesson 22</h2>
</section>
<section id="obj-20.3" class="level2">
<h2 class="anchored" data-anchor-id="obj-20.3">22.1 (<strong>Obj 20.3</strong>)</h2>
<p>Consider these three data frames:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>One <span class="ot">&lt;-</span> <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>Two <span class="ot">&lt;-</span> <span class="fu">do</span>(<span class="dv">10</span>) <span class="sc">*</span> {</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(y <span class="sc">~</span> x, <span class="at">data =</span> <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coefficients</span>()</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>Three <span class="ot">&lt;-</span> Two <span class="sc">%&gt;%</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mx =</span> <span class="fu">mean</span>(x), <span class="at">sx =</span> <span class="fu">sd</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Both <code>One</code> and <code>Two</code> have columns called <code>x</code>, but they stand for different things. Explain what the unit of observation is and what the values in <code>x</code> represent..</li>
<li><code>Three</code> does not have a column named <code>x</code>, but it is a summary of the <code>x</code> column from <code>Two</code>. What kind of summary.</li>
</ol>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>In <code>One</code>, the <code>x</code> column contains the simulated of the <code>x</code> variable from <code>dag01</code>. The unit of observation is a single case, for instance a person for whom observations were made of <code>x</code> and <code>y</code>. The simulation involves generating 25 rows of data: one row for each of 25 people.</li>
<li>In <code>Two</code>, the <code>x</code> column is the regression coefficient on <code>x</code> from the simulation. Each row of <code>Two</code> corresponds to one trial in which regression is being performed on a sample of size 25 of simulated data from <code>dag01</code>.</li>
<li><code>Three</code> is a summary of the 10 trials in <code>Two</code>. The columns, named <code>mx</code> and <code>sx</code>, tell about the distribution of <code>x</code> across all the trials.</li>
</ol>
</div>
</div>
<hr>
</section>
<section id="obj-21.3-1" class="level2">
<h2 class="anchored" data-anchor-id="obj-21.3-1">22.2 (Obj 21.3)</h2>
<p><strong>Part 1</strong></p>
<p>You are going to write a <em>procedure</em> that automates the following process:</p>
<ol type="i">
<li>sampling from a DAG, specifically <code>dag01</code>, using <code>sample()</code> with a size of 25.</li>
<li>fitting a model <code>y ~ x</code> using <code>lm()</code></li>
<li>reporting the coefficient on <code>x</code> using <code>coefficients()</code>.</li>
</ol>
<p>Call the procedure <code>proc1()</code>.</p>
<p>To do this fill in the following template in your Rmd document:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>proc1 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># your statements go here</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Once you have <code>proc1()</code> ready, you can carry out the procedure by giving a simple command:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">proc1</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Part 2</strong></p>
<p>Now that you have <code>proc1()</code> ready and have tried it out, you are going to run the procedure 100 times repeatedly and look at the distribution in the <code>x</code> coefficient.</p>
<p>Of course, you could laboriously give the command <code>proc1()</code> 5 times, and write down the <code>x</code> coefficient each time. Far better, though, to automate the process of repeating and collecting the <code>x</code> coefficient.</p>
<p>You can do this easily by using <code>do(5)</code> in conjunction with <code>proc1()</code>.</p>
<ol type="1">
<li><p>What’s the form in which the coefficients are collected when using <code>do()</code>?</p></li>
<li><p>Is the <code>x</code> coefficient the same from trial to trial? Explain why or why not.</p></li>
<li><p>Change your statement to run 100 trials rather than just 5, and to store the collected results in a data frame called <code>Trials</code>. Use appropriate graphics to display the distribution of the <code>x</code> coefficient. Summarize the distribution in a sentence or two.</p></li>
<li><p>Create a consise summary of the <code>x</code> column of <code>Trials</code> using <code>summarize()</code> with <code>sd(x)</code> to calculate the standard deviation. Compare the size of the standard deviation to the graphical display in (3).</p></li>
</ol>
<section id="solution-20" class="level3">
<h3 class="anchored" data-anchor-id="solution-20">Solution</h3>
<p><strong>Part 1</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>proc1 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  Dat <span class="ot">&lt;-</span> <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  Mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x, <span class="at">data =</span> Dat)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coefficients</span>(Mod)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or, more concisely ::: {.cell}</p>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>proc1 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(dag01, <span class="at">size=</span><span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lm</span>(y <span class="sc">~</span> x, <span class="at">data =</span> .) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coefficients</span>()</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</div>
</div>
<p><strong>Part 2</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">do</span>(<span class="dv">5</span>) <span class="sc">*</span> <span class="fu">proc1</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Intercept        x
1  4.048530 1.770314
2  3.693512 1.475927
3  4.105278 1.297085
4  4.250074 1.639121
5  3.934672 1.201477</code></pre>
</div>
</div>
<ol type="1">
<li><p>The results of the five trials are collected into a data frame.</p></li>
<li><p>The <code>x</code> coefficients varies from trial to trial.</p></li>
</ol>
<p>Collect 100 trials</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="ot">&lt;-</span> <span class="fu">do</span>(<span class="dv">100</span>) <span class="sc">*</span> <span class="fu">proc1</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>An appropriate graphical display of the trials:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Trials, <span class="fu">aes</span>(x)) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">alpha=</span><span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The <code>x</code> coefficient varies from near 0.5 to near 2.5 in a bell-shaped form.</p>
<ol start="4" type="1">
<li>Summarize the trials by the standard deviation.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">s =</span> <span class="fu">sd</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          s
1 0.2084765</code></pre>
</div>
</div>
<p>The standard deviation is about 1/4 the width of the distribution.</p>
</section>
<section id="lesson-23" class="level2">
<h2 class="anchored" data-anchor-id="lesson-23">Lesson 23</h2>
</section>
<section id="section-10" class="level2">
<h2 class="anchored" data-anchor-id="section-10">23.1</h2>
<p>Vocabulary: Sampling distribution, standard error, sampling variability, sample size</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="section-11" class="level2">
<h2 class="anchored" data-anchor-id="section-11">23.2</h2>
<p>In LC 22.2, using <code>do(100)</code>, you displayed the sampling distribution on the <code>x</code> coefficient of the model <code>y ~ x</code> applied to data simulated from <code>dag01</code>. Among other things, you calculated the standard deviation of the sampling distribution. Copy over the <code>proc1()</code> you wrote for LC 22.2 into your Rmd document for this lesson.</p>
<p>Calculate the standard deviation of the sampling distribution in each of these situations.</p>
<table class="table">
<thead>
<tr class="header">
<th>Number of trials</th>
<th>Sample size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>do(100)</code></td>
<td><code>size=25</code></td>
</tr>
<tr class="even">
<td><code>do(100)</code></td>
<td><code>size=100</code></td>
</tr>
<tr class="odd">
<td><code>do(100)</code></td>
<td><code>size=400</code></td>
</tr>
<tr class="even">
<td><code>do(500)</code></td>
<td><code>size=25</code></td>
</tr>
<tr class="odd">
<td><code>do(500)</code></td>
<td><code>size=100</code></td>
</tr>
<tr class="even">
<td><code>do(500)</code></td>
<td><code>size=400</code></td>
</tr>
</tbody>
</table>
<p>In each case, the standard deviation is somewhat random, since new simulated data is collected from <code>dag01</code> each time. Nonetheless, there is a systematic pattern to how the standard deviation varies with the number of trials and with the sample size.</p>
<ol type="1">
<li><p>Describe how the standard deviation of the sampling distribution of the <code>x</code> coefficient varies with sample size. The general trend should be easy to see.</p></li>
<li><p>Does the standard deviation of the sampling distribution depend on the number of trials?</p></li>
<li><p>Going back to your results from (1), try to find a simple quantitative relationship that describes how the standard deviation depends on sample size. State that relationship in words.</p></li>
</ol>
<hr>
</section>
<section id="section-12" class="level2">
<h2 class="anchored" data-anchor-id="section-12">23.3</h2>
<p>We’re going to build models of prices of books based on the <code>moderndive::amazon_books</code> data frame. For each model, you will calculate the confidence interval of one or more coefficients in two ways:</p>
<ol type="i">
<li>Directly, using <code>confint()</code>.</li>
<li>Indirectly, using <code>broom::tidy()</code></li>
</ol>
<p><strong>Model 1</strong>.</p>
<ol type="1">
<li><p>Model <code>list_price</code> versus <code>amazon_price</code>. Calculate the confidence intervals on the intercept and on the <code>amazon_price</code> coefficient.</p></li>
<li><p>Interpret the <code>amazon_price</code> coefficient in everyday words.</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution to part 1.
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(list_price <span class="sc">~</span> amazon_price, <span class="at">data =</span> amazon_books) <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                2.5 %   97.5 %
(Intercept)  3.716532 5.122737
amazon_price 1.049308 1.127471</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(list_price <span class="sc">~</span> amazon_price, <span class="at">data =</span> amazon_books) <span class="sc">%&gt;%</span> broom<span class="sc">::</span><span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term         estimate std.error statistic   p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)      4.42    0.357       12.4 5.22e- 29
2 amazon_price     1.09    0.0199      54.8 2.82e-165</code></pre>
</div>
</div>
<ol type="1">
<li><p>You can read the confidence interval directly from the <code>confint()</code> report. For the regression report, calculate the confidence interval as the estimate <span class="math inline">\(\pm 2\)</span> times the “standard error.”</p></li>
<li><p>Just to look at the <code>amazon_price()</code> coefficient, the list price is about 8% higher than the Amazon price. Here, “about” means 5% to 13%. But don’t forget the intercept. The list price is, on average, about $4.50 higher than the 1.08 multiplier on the Amazon price.</p></li>
</ol>
</div>
</div>
<p><strong>Model 2</strong>.</p>
<ol start="3" type="1">
<li>Model <code>list_price</code> versus <code>amazon_price</code>, including <code>hard_paper</code> as a covariate.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(list_price <span class="sc">~</span> amazon_price <span class="sc">+</span> hard_paper, <span class="at">data =</span> amazon_books) <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                2.5 %   97.5 %
(Intercept)  3.028400 4.466996
amazon_price 1.042536 1.117826
hard_paperH  1.786977 3.882884</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(list_price <span class="sc">~</span> amazon_price <span class="sc">+</span> hard_paper, <span class="at">data =</span> amazon_books) <span class="sc">%&gt;%</span> broom<span class="sc">::</span><span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term         estimate std.error statistic   p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)      3.75    0.366      10.3  1.62e- 21
2 amazon_price     1.08    0.0191     56.5  9.65e-169
3 hard_paperH      2.83    0.533       5.32 1.93e-  7</code></pre>
</div>
</div>
<p>A hardcover costs about $2 to $4 more than a paperback.</p>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note in draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Return to this example in the prediction lesson, to show how the confidence interval and the prediction interval are different.</p>
<p>Maybe also use it in one of the side-exercises on interaction terms. (The plan is not to strongly emphasize interaction terms but to refer to them in the occasional exercise.)</p>
</div>
</div>
<hr>
</section>
<section id="objective-23.1" class="level2">
<h2 class="anchored" data-anchor-id="objective-23.1">23.4 (Objective 23.1)</h2>
<p>We’re going to work with a very short dataset so that you can see directly what <strong>resampling</strong> a data frame does. (Ordinarily, you use resampling on an entire dataset, but here we are trying to make a point about the mechanism of resampling.)</p>
<ol type="1">
<li>Create a data frame <code>Five</code> that consists of the first five rows of <code>moderndive::mythbusters_yawn</code>. (Hint: Use <code>head()</code>.) Put the code for doing this into your Rmd homework paper. Note that <code>Five</code> contains the data from subjects 1 through 5.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>Five <span class="ot">&lt;-</span> mythbusters_yawn <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ol start="2" type="1">
<li><p>Use <code>resample()</code> to generate a new data frame from <code>Five</code>. At this point, you are just going to look at the result, processing it “by eye.” How many distinct human subjects are reported in the resampled data? (Your answer will likely differ from your classmates’, since resampling is done at random.)</p></li>
<li><p>Repeat (2) ten times. Each time, count the number of distinct human subjects.</p>
<ol type="i">
<li>Report those ten numbers on your write-up.</li>
<li>There will usually be one or more subjects repeated in the output. Look at these repeats carefully to check whether the variables have the same value for all the repeats or whether sometimes a repeated subject has different values for <code>group</code> or <code>yawn</code>.</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Most of the time there will be 2, 3, or 4 distinct subject. The balance of the five rows will be repeats of other subjects. When a subject is repeated, the entire row is identical for all instances of that subject.</p>
</div>
</div>
<p><strong>Going further</strong> (optional). It’s pretty easy to automate the process of generating the resample and counting the number of distinct human subjects. Like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>{<span class="fu">resample</span>(Five) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Using <code>do(1000)</code>, carry out 1000 trials of this process, saving the overall results in a data frame named <code>Trials</code>. What is the mean number of unique human subjects across the 1000 trials? What fraction is this of the five subjects.</p>
<p>Do the same again, but instead of using <code>Five</code>, use the whole <code>mythbusters_yawn</code> data frame (which has 50 rows). What fraction of the 50 human subjects, on average, shows up in the resamples?</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="ot">&lt;-</span> <span class="fu">do</span>(<span class="dv">1000</span>) <span class="sc">*</span> {<span class="fu">resample</span>(mythbusters_yawn) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()}</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>Trials <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mn =</span> <span class="fu">mean</span>(result)<span class="sc">/</span><span class="fu">nrow</span>(mythbusters_yawn))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       mn
1 0.63526</code></pre>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="objective-23.1-1" class="level2">
<h2 class="anchored" data-anchor-id="objective-23.1-1">23.5 (Objective 23.1)</h2>
<p>Return to the <code>amazon_books</code> data frame and the model <code>list_price ~ amazon_price</code>. In Exercise 23.3 you used the regression report to calculate the confidence intervals on the intercept and on the <code>amazon_price</code> coefficient. Now you are going to repeat the calculation in a different way, using randomization, a process called “<strong>bootstrapping</strong>”.</p>
<p>The basic process is to train a model using <em>resampled</em> data, like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(list_price <span class="sc">~</span> amazon_price, <span class="at">data =</span> <span class="fu">resample</span>(amazon_books)) <span class="sc">%&gt;%</span> <span class="fu">coefficients</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept) amazon_price 
    3.748436     1.129395 </code></pre>
</div>
</div>
<p>Then, using <code>do(500)</code>, carry out 500 trials, saving the result in a data frame named <code>Trials</code>.</p>
<p>Process <code>Trials</code> to calculate both the mean and the standard deviation of the intercept and <code>amazon_price</code> columns. How do those results compare to the “standard error” results from the same model (without resampling) as you found in LC 23.3?</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>SOMETHING IS WRONG HERE. The means are about the same as from the regression report (as they should be) but the standard deviations are 3-4 times larger. WHAT GIVES?</p>
<p>THE PROBLEM IS a handful of books where the Amazon price is very different from the list price, because the book itself is very expensive (e.g.&nbsp;$100). Remedy</p>
<ol type="1">
<li>Switch to another data example, maybe doing both the regression report and the bootstrapping in one exercise.</li>
<li>This is an object lesson in outliers. Since the dollar discount is presumably <em>proportional</em> to the price, we should have used log transforms.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>Trials <span class="ot">&lt;-</span> <span class="fu">do</span>(<span class="dv">500</span>) <span class="sc">*</span> {<span class="fu">lm</span>(list_price <span class="sc">~</span> amazon_price, <span class="at">data =</span> <span class="fu">resample</span>(amazon_books)) <span class="sc">%&gt;%</span> <span class="fu">coefficients</span>()}</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>Trials <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">m1 =</span> <span class="fu">mean</span>(Intercept), </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">m2 =</span> <span class="fu">mean</span>(amazon_price), </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sintercept =</span> <span class="fu">sd</span>(Intercept), </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">samazon_price =</span> <span class="fu">sd</span>(amazon_price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        m1       m2 sintercept samazon_price
1 4.154913 1.109362  0.8972471      0.078366</code></pre>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="lesson-24" class="level2">
<h2 class="anchored" data-anchor-id="lesson-24">Lesson 24</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Just to help when writing problems
</div>
</div>
<div class="callout-body-container callout-body">
<p>24.1 Estimate an effect size from a regression model of one and two variables.</p>
<p>24.2 Construct a confidence interval on the effect size.</p>
<p>24.3. Gaming: Evaluate whether confidence interval indicates that estimated effect size is consistent with simulation.</p>
</div>
</div>
</section>
<section id="objective-24.1" class="level2">
<h2 class="anchored" data-anchor-id="objective-24.1">24.1 (Objective 24.1)</h2>
<p>What are the two settings for decision making that we cover in this course?</p>
<p>Give an example of each.</p>
<section id="solution-27" class="level3">
<h3 class="anchored" data-anchor-id="solution-27">Solution</h3>
<ol type="1">
<li>Prediction and (2) Relationship</li>
</ol>
<ol type="i">
<li><p>What will be the sales price of this house? <em>“This house” is a shorthand way of saying “a house with these attributes.” The sales price will be the output of a prediction function that takes the various attributes as input and produces a sales price as output.</em></p></li>
<li><p>If I look for a house with an additional bathroom, how much will that change the sales price? <em>This asks for the relationship between number of bathrooms and sales price.</em></p></li>
</ol>
<hr>
</section>
</section>
<section id="objective-24.1-1" class="level2">
<h2 class="anchored" data-anchor-id="objective-24.1-1">24.2 (Objective 24.1)</h2>
<p>For each of these research questions, say whether it is a prediction setting or a relationship setting.</p>
<ol type="i">
<li>What’s the risk of falling ill?</li>
<li>How will the risk of falling ill change if we eat more broccholi?</li>
<li>Is there any reason to believe, based on the evidence at hand, that we should look more deeply into the possible benefits of broccholi?</li>
</ol>
<section id="solution-28" class="level3">
<h3 class="anchored" data-anchor-id="solution-28">Solution</h3>
<ol type="i">
<li>Prediction</li>
<li>Relationship</li>
<li>Relationship</li>
</ol>
<hr>
<p>SOME IDEAS FOR EXERCISE MODES</p>
<ol type="a">
<li><p>Use <code>mod_plot()</code> and look at the slope of lines and offsets. Compare to the model coefficients.</p></li>
<li><p>Generate data from a DAG and look at the confidence interval on the effect size. Then make new samples and see if the effect size in those samples is consistent with the confidence interval.</p></li>
<li><p>In text, maybe look at the confidence intervals across new samples and show that they tend to overlap. Only a few of them don’t touch a common line. This is basically just a review of confidence intervals, but why not?</p></li>
<li><p>Interaction. Show that when there is an interaction term, the effect size (as calculated by <code>mod_effect()</code>) is not constant, as it is for models with purely linear terms.</p></li>
</ol>
</section>
</section>
<section id="lc-24.1" class="level2">
<h2 class="anchored" data-anchor-id="lc-24.1">LC 24.1</h2>
<p>The <a href="https://github.com/DS-USAFA/Computational-Probability-and-Statistics/blob/main/data/Stanford_heart_study.csv"><em>Computational Probability and Statistics</em></a> text describes an early study on human-to-human heart transplantation:</p>
<blockquote class="blockquote">
<p>“The Stanford University Heart Transplant Study was conducted to determine whether an experimental heart transplant program increased lifespan. Each patient entering the program was designated an official heart transplant candidate, meaning that he was gravely ill and would most likely benefit from a new heart. Some patients got a transplant and some did not. The variable indicates which group the patients were in; patients in the treatment group got a transplant and those in the control group did not. [[Not in data set: Another variable called [MISSING] was used to indicate whether or not the patient was alive at the end of the study.]]”</p>
</blockquote>
<p>The data frame is called <code>Transplants</code>. [NEED TO MOVE TO PACKAGE]</p>
<div class="cell">

</div>
<p>You’re going to build a model of <code>outcome</code> vs <code>group</code> based on the data in <code>Transplants</code>. The <code>outcome</code> variable has levels <code>"Dead"</code> and <code>"Alive"</code>, that is, it is a two-level categorical variable. Consequently, the model output will be the <strong>probability</strong> that the transplant candidate was alive at the end of the study.</p>
<ol type="1">
<li>Build a model <code>outcome == "Alive" ~ group</code> from the <code>Transplants</code> data. Pay close attention to the left-hand side of the tilde expression: it is a calculation that produces a 1 if <code>outcome</code> is <code>"Alive"</code> and zero otherwise. Notice the <strong>double equal signs</strong> and the quotes around <code>"Alive"</code>.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(outcome <span class="sc">==</span> <span class="st">"Alive"</span> <span class="sc">~</span> group, <span class="at">data =</span> Transplants)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ol start="2" type="1">
<li><p>The sole explanatory variable here, <code>group</code> also is categorical. It has levels <code>"Control"</code> and <code>"Treatment"</code>.</p>
<ol type="i">
<li>Using <code>eval_mod()</code>, find the probability of being alive at the end of the study for the Control group and for the treatment group.</li>
<li>The two probabilities in (ii) do not add up to zero. Explain why.</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(mod, <span class="at">group=</span><span class="st">"Treatment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      group model_output
1 Treatment    0.3478261</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(mod, <span class="at">group=</span><span class="st">"Control"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    group model_output
1 Control    0.1176471</code></pre>
</div>
</div>
</div>
</div>
<ol start="3" type="1">
<li><p>Find the effect size of the treatment. All you need is your results from (2)?</p></li>
<li><p>Use <code>mod_effect(</code>modelname<code>, ~ group)</code> to calculate the effect size.</p>
<ol type="i">
<li>Is the result consistent with what you found in (3).</li>
<li>Explain in everyday language what this effect size means.</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_effect</span>(mod, <span class="sc">~</span> group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     change     group to_group
1 -0.230179 Treatment  Control</code></pre>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="section-13" class="level2">
<h2 class="anchored" data-anchor-id="section-13">24.2</h2>
<p>Effect sizes generally come with <em>units</em> and you have to take into account the units in order to know if the effect is important or not.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Move the <code>Loans</code> data into the <code>math300</code> package. But for now …</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>Loans <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/loans.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A case in point is provided by the <code>Loans</code> data frame, which records dozens of variables on each of 10,000 loans made through the Lending Club. The interest rate at which the loans are made varies substantially from loan to loan. Presumably, higher interest rates reflect a higher perception of risk of default (which would lead to the lender losing his or her money).</p>
<p>Here’s a model of the interest rate. (This is for the borrowers who have a low debt-to-income percent; we won’t worry about the few very high debt-to-income cases.) We’re only interested in this problem with the effect size, which is the same as the coefficients on the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(interest_rate <span class="sc">~</span> homeownership <span class="sc">+</span> debt_to_income <span class="sc">+</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>            account_never_delinq_percent <span class="sc">+</span> verified_income, </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> Loans <span class="sc">%&gt;%</span> <span class="fu">filter</span>(debt_to_income<span class="sc">&lt;</span><span class="dv">50</span>))</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>mod <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                     2.5 %      97.5 %
(Intercept)                    15.31467948 17.26502804
homeownershipOWN                0.16056412  0.73009641
homeownershipRENT               1.01571903  1.41695574
debt_to_income                  0.09565833  0.11523598
account_never_delinq_percent   -0.09149666 -0.07122369
verified_incomeSource Verified  1.37798985  1.79909554
verified_incomeVerified         2.88724295  3.39001806</code></pre>
</div>
</div>
<p>There are two <em>quantitative</em> explanatory variables—<code>debt_to_income</code> and <code>account_never_delinq_percent</code>—both of which are measured in percent.</p>
<p>There are two <em>categorical</em> explanatory variables: <code>homeownership</code> and <code>verified_income</code>. The levels for <code>homeownership</code> are “MORTGAGE” (meaning money is still owed on the house), “OWN” (without a mortgage), and “RENT” (meaning the borrower rents rather than owning a home). The levels for <code>verified_income</code> are “Not Verified”, “Verified”, “Source Verified”.</p>
<p>For the categorical explanatory variables (and the intercept) the effect-size units are “percent interest.” For the quantitative explanatory variables, the effect-size units are “percent interest per percent,” so that when multiplied by the <code>debt_to_income</code> percent or the <code>account_never_delinq_percent</code> the result will be in “percent interest.”</p>
<ol type="1">
<li>According to the model, who pays the higher interest rate (on average): people who OWN their home, people who RENT, or people who have a mortgage on their home? How much higher than the lowest-interest rate category.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>People who rent pay the highest interest rate, a little more than 1 percentage point higher than people who have mortgages. It’s interesting that people who own their homes outright pay (on average) pay about 0.45 percentage points more than people who own outright. This might be because having a mortgage means you also have a credit history.</p>
</div>
</div>
<ol start="2" type="1">
<li>According to the model, who pays the higher interest rate (on average): people whose income is “not verified,” people whose income is “verified,” or people who have the source of income verified (level: “source verified”)?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>People whose income is verified pay about 3 percentage points higher interest than people whose income is “not verified.” This seems surprising, but it may be that people who have higher perceived default risk are also the people who are asked to verify their income. Things get complicated when explanatory variables are linked to each other.</p>
</div>
</div>
<ol start="3" type="1">
<li>The coefficients on <code>debt_to_income</code> and <code>account_never_delinq_percent</code> are the smallest numerically. Does this mean that the effects of <code>debt_to_income</code> and <code>account_never_delinq_percent</code> are smaller than the other two explanatory variables in the model? Explain why or why not. (Hint: Look at the distribution of <code>debt_to_income</code> and <code>account_never_delinq_percent</code> to get an idea for the range of values these variables take on.)</li>
</ol>
</section>
<section id="solution-34" class="level2 {callout-note}">
<h2 class="anchored" data-anchor-id="solution-34">Solution</h2>
<p><code>debt_to_income</code> varies over about 25 percentage points. The variation in <code>account_never_delinq_percent</code> is about the same, varying from about 80 to 100 percentage points. The effect of the variables (in percent interest) is determined by multiplying the coefficients by the amount of variation in the variables. So, from one extreme to the other, the effect of <code>debt_to_income</code> is about 2 perentage points of interest, and roughly the same for <code>debt_to_income</code>.</p>
</section>
<hr>
<section id="section-14" class="level2">
<h2 class="anchored" data-anchor-id="section-14">24.4</h2>
<p>The logic of effect size is to investigate the change in output of a model when one input variable is changed, <em>holding all other things constant</em>. This problem is about the extent to which we mean “all”.</p>
<p>The figure shows yearly CO<sub>2</sub> production of individual gasoline-fueled passenger vehicles stratified by the number of engine 4 or 6 cylinders. ::: {.cell} ::: {.cell-output-display} <img src="LC-list_files/figure-html/camel-get-gloves-1-1.png" class="img-fluid" width="672"></p>
</section>
</div>
</div>
<p>:::</p>
<ol type="1">
<li>The effect size is the difference between the output variable when a change is made to an input. Consider the effect size of changing from a six-cylinder engine to a four-cylinder engine. Here’s a subtly <strong>incorrect</strong> way of calculating something like an effect size: Pick a dot from the six-cylinder group and another dot from the four-cylinder group. Subtract the 4-cylinder point’s CO2 value from the six-cylinder point’s CO2 value, and divide by the change in the input, that is, -2 cylinders.
<ol type="a">
<li>Follow this procedure for the top-most dot in each cloud and calculate the effect size. -A- (5100 kg - 4100 kg) / (-2 cylinders) = -500 kg/cylinder.</li>
<li>Follow the procedure for the bottom-most dot in each cloud and calculate the effect size. -A- (3400 kg - 2500 kg) / (-2 cylinders) = -450 kg/cylinder.</li>
<li>Follow the procedure for the bottom-most dot in the four-cylinder cloud and the top-most dot in the six-cylinder cloud. -A- (5100 kg - 3400 kg) / (-2 cylinders) = -850 kg/cylinder.</li>
<li>Do the same as in (c) but use the bottom-most six-cylinder dot and the top-most four-cylinder dot. -A- (3400 kg - 4100 kg) / (-2 cylinders) = +350 kg/cylinder. In other words, switching from the six</li>
</ol></li>
<li>You can imagine the (tedious) process of repeating the calculation for every possible pair of dots and getting a distribution of effect sizes. What would be the range of this distribution: from the smallest effect size to the biggest? (Hint: You can figure it out from your answers to (1).) -A- -850 kg/cylinder to +350 kg/cylinder</li>
</ol>
<p>From your result in (2), you might be tempted to conclude that the effect size is highly uncertain: it might be negative or it might be positive. But there is a problem, the procedure used in (1) and (2) fails to incorporate the notion of <em>all other things being equal</em>. This notion applies not just to known variables, but to all the other unknown factors that shape the data.</p>
<p>For the purpose of envisioning the concept, imagine that we actually had a measurement of all the factors that shaped CO<sub>2</sub> emissions from a vehicle. We’ll call this imaginary measurement “all other things”. The figure below shows a conceptualization of what CO2 emissions as a function of the number of cylinders and “all other things” would look like.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/camel-get-gloves-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol start="3" type="1">
<li>Using the graph of CO2_year versus “all other things”, calculate the effect size of a change from six to four cylinders. Remember to hold “all other things” constant in your calculations. So do the effect size calculation at each of several values of “all other things”. What is the effect size and about how much does it vary from one value of “all other things” to another? -A- At “all other things being 0.25, the CO<sub>2</sub> emissions for the 6- and 4-cylinder cars is 2800 kg and 3800 kg. The effect size is therefore (3800 kg - 2800 kg) / -2 cylinders = -500 kg/cylinder. The value of the effect size for other levels of”all other things” will be about the same, since the position of the six-cylinder dots is more-or-less constant compared to the corresponding four-cylinder dot.</li>
</ol>
<p>This exercise is intended to give you a way of thinking about effect size and “all other things”. In reality, of course, we do not have a way to measure “all other things”. Instead, we calculate the effect size not directly from the data but from the model output (indicated by the statistic layer in the first graphic). As we saw in Lesson 22, there is actually some uncertainty about the model output stemming from sampling variability that can be summarized by a “confidence interval”. For the relationship between the number of cylinders and CO2 emissions, the extent of that uncertainty is indicated by the interval layer in the first graphic. A fair depiction for the corresponding uncertainty in the effect size can be had by repeating the process of (2), but only for points falling into the confidence interval.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Do we need this?
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Note to readers who know something about car engines</em>: As you know, switching out a six-cylinder engine for a four-cylinder engine is likely to change many other things: the weight of the vehicle, the displacement of the engine, the power available, etc. So it’s not useful to insist that everything other than the number of cylinders be held constant. Instead, we’ll be looking at the effect of that whole constellation of changes associated with a change in the number of cylinders.</p>
</div>
</div>
<hr>
</section>
<section id="x" class="level2">
<h2 class="anchored" data-anchor-id="x">24.X</h2>
<p>In very simple settings, you don’t need access to the original data: a simple summary will do.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use the <code>data/bloodthinner.csv</code> data from <em>CPS</em> chapter 19. Create the table of counts and calculate the effect size/probabilities from that.</p>
</div>
</div>
<hr>
</section>
<section id="z" class="level2">
<h2 class="anchored" data-anchor-id="z">24.Z</h2>
<p>The National Cancer Institute publishes an online, interactive “<a href="https://bcrisktool.cancer.gov/calculator.html">Breast Cancer Risk Assessment Tool</a>”, also called the “Gail model.” The output of the model is a probability that the woman whose characteristics are used as input will develop breast cancer in the next five years. The inputs include:</p>
<ul>
<li>age</li>
<li>race/ethnicity</li>
<li>age at first menstrual period</li>
<li>age at birth of first child (if any)</li>
<li>how many of the woman’s close relatives (mother, sisters, or children) have had breast cancer</li>
</ul>
<p>As a baseline, consider a 55-year-old, African-American woman who has never had a breast biopsy or any history of breast cancer, who doesn’t know her BRCA status, and whose close relatives have no history of breast cancer, whose first menstrual period was at age 13 and first child at age 23. No “subrace” or “place of birth” is specified.</p>
<ol type="1">
<li><p>Follow the link above to the cancer risk assessment tool, and enter the baseline values into the assessment tool using the link above. According to the assessment tool, what is the probability (“risk”) of developing breast cancer in the next five years? What is the lifetime risk of developing breast cancer? -A- 1.4% risk in the next five years, 7.8% lifetime risk.</p></li>
<li><p>What is the effect size on our baseline subject of finding out that:</p></li>
</ol>
<ol type="a">
<li><p>one of her close relatives has developed breast cancer? -A- Using the baseline values for the inputs, but changing the number of close relatives who have developed breast cancer to 1, the new five year risk is 2.2% and the lifetime risk is 12.3%. This is a change of five year risk of 0.8 percentage points and 4.5 percentage points for lifetime risk. (In Lesson 33, you’ll see that expressing effect size of a probability is often done using “<strong>log-odds</strong>”.)</p></li>
<li><p>more than one of her close relatives have developed breast cancer? -A- This has a dramatic effect, with five-year risk increasing to 4.8 percentage points and lifetime risk increasing to 29.4%.</p></li>
</ol>
<ol start="3" type="1">
<li><p>What is the effect size associated with comparing the baseline conditions to a woman with the same conditions but a race of white? -A- Five year risk goes down by 0.3 percentage points, lifetime risk goes down by 0.4 percentage points.</p></li>
<li><p>What is the effect size of age? Compare the baseline 55-year old woman to herself when she is 65, without the other inputs changing. Since age is quantitative, Report the effect size as percentage-points-per-year. -A- Five year risk goes up to 1.5%, an increase of 0.1 percentage points per year. Lifetime risk goes down to 5.6%, a rate of -0.67 percentage points per year.</p></li>
</ol>
<hr>
<p>Possibly <code>Stat2Data::ArcheryData</code> and ask about effect size.</p>
<hr>
</section>
<section id="zz" class="level2">
<h2 class="anchored" data-anchor-id="zz">24.ZZ</h2>
<p>The graphs shows world record times in the 100m and 200m butterfly swim race as a function of year, sex, and race length. (Data frame: <code>math300::Butterfly</code>)</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/hamster-dive-stove-1-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/hamster-dive-stove-1-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li><p>In 1980, what is the effect size of race distance? (Make sure to give the units.)</p></li>
<li><p>In 1980, what is the effect size of sex? (Make sure to give the units.)</p></li>
<li><p>In 2000, what is the effect size of race distance? (Be sure to give the units.)</p></li>
</ol>
<hr>
</section>
<section id="ww" class="level2">
<h2 class="anchored" data-anchor-id="ww">24WW</h2>
<p><a href="#fig-lamb-come-sheet-1">Figure&nbsp;3</a> shows a model of the running time of winners of Scottish hill races as a function of climb, distance, and sex.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-lamb-come-sheet-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="LC-list_files/figure-html/fig-lamb-come-sheet-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: A model of running time in Scottish hill racing versus climb, distance, and sex of the runner</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Using as a baseline a distance of 10 km, a climb of 500m, and sex female, calculate each of these effect sizes. Remember for quantitative inputs to format the effect size as a <em>rate</em>, for instance seconds-per-meter-of-climb.</p>
<ol type="1">
<li><p>The effect size of climb. Consider an increase of climb by 500m. - For females running a 10 km course, an increase in climb from 500m (the specified baseline for comparison) to 1000m is roughly 2000 seconds. Since climb is quantitative, this should be reported as a rate, the change of output (2000 s) divided by the change in input (500 m). This comes to 4 seconds per meter of climb.</p></li>
<li><p>The effect size of distance. Consider an increase in distance of 10 km. -A- The model output at baseline is about 3500 seconds. The model output for a distance of 20 km (an additional 10 km above baseline) is about 6000 s. The effect size is a rate: (6000 - 3500) s / 10 km, or 250 s/km. For comparison, the fastest 20 km road run by a woman (at the time this is being written) is 1 hour 1 minute 25 seconds, that is, 3685 seconds. This amounts to an average of about 180 s/km. A walker would cover 1 km in about 720 seconds. So the racers are quite fast.</p></li>
<li><p>Is there any evidence of an interaction between sex and climb? -A- Yes. Note that the lines for different climb amounts are vertically spaced more widely for females than for males. This means that the effect size of climb differs between the sexes. That’s an interaction between climb and sex.</p></li>
</ol>
<hr>
</section>
<section id="r" class="level2">
<h2 class="anchored" data-anchor-id="r">24.R</h2>
<p>Over the past hundred years, attitudes toward sex have changed. Let’s examine one way that this change might show up in data: the age at which people first had sex. The National Health and Nutrition Evaluation Survey includes a question about the age at which a person first had sex. For the moment, let’s focus just on that subset of people who have had sex at least once.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/wolf-begin-jacket-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li><p>What is the effect size of year born on age at first sex? Use units of years-over-years. -A- The model output is 17 years for those born round about 1940, and slightly more than 16 years for those born around 1990. The effect size is therefore about negative 1 year per 50 years</p></li>
<li><p>Is there evidence for an interaction between gender and year born? -A- No, the slopes of the lines are essentially identical for males and females.</p></li>
<li><p>Translate the effect size in (1) to the units weeks-over-years. -A- 1 year per 50 years is the same as 52 weeks per 50 years, or about one week per year.</p></li>
</ol>
</section>
<section id="lesson-25" class="level2">
<h2 class="anchored" data-anchor-id="lesson-25">Lesson 25</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Just while in draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>25.1 Given a data frame, construct a predictor function for a specified response variable.</p>
<p>25.2 Use the predictor function to estimate prediction error on a given DAG sample and summarize with root mean square (RMS) error. Relate this to a predition interval.</p>
<p>25.3 Distinguish between in-sample and out-of-sample prediction estimates of prediction error.</p>
</div>
</div>
</section>
<section id="section-15" class="level2">
<h2 class="anchored" data-anchor-id="section-15">25.2</h2>
<p>The data frame <code>moderndive::house_prices</code> lists the sales prices of 21,613 houses in King County, Washington (which includes Seattle) sold from May 2014 and May 2015. Often, with price or income data, economists work with the <em>logarithm</em> of the price or income or income-related quantity such as house living area. We are going to do here, but this problem is not about logarithms, so once you create the “logged” data frame, you’ll just be modeling the data using the usual methods.</p>
<p>To create the “logged” data, add these two new variables to the data frame, which we will call <code>Seattle</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>Seattle <span class="ot">&lt;-</span> moderndive<span class="sc">::</span>house_prices <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_price =</span> <span class="fu">log10</span>(price),</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">log_area =</span> <span class="fu">log10</span>(sqft_living))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Build a model of <code>log_price ~ log_area</code> using the <code>Seattle</code> data. Store the model under the name <code>pmod</code>.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>pmod <span class="ot">&lt;-</span> <span class="fu">lm</span>(log_price <span class="sc">~</span> log_area, <span class="at">data =</span> Seattle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Imagine that you are moving to Seattle in August 2014. Housing is expensive in the Seattle area, so you might decide to live in a small house, say 750 square feet. The <code>log_area</code> of such a house is 2.87. Using <code>mod_eval()</code>, predict the <code>log_price</code> of such a house. (Note that <code>mod_eval()</code> puts the model output in a column named <code>model_output</code>, not <code>log_price</code>.) In your Rmd file, give the command and show the output. If you’re curious about what the predicted price is in dollars (rather than log-dollars), simply raise 10 to the log-dollar amount. For instance, if the <code>model_output</code> were 5, the dollar amount will be <span class="math inline">\(10^5 = \$100,000\)</span>.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(pmod, <span class="at">log_area =</span> <span class="fl">2.87</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  log_area model_output
1     2.87     5.324298</code></pre>
</div>
</div>
<p>In dollar terms, the predicted price is 10<sup>5.324</sup> = 2.1086281^{5}.</p>
</div>
</div>
<ol start="3" type="1">
<li><p>Repeat (2), but for a house with lots of space: 1500 square feet. The <code>log_area</code> of such a house is 3.18. As in (2), give the command and show the output in your Rmd file.</p></li>
<li><p>Your budget is $200,000. In log dollars this budget is <code>log10(200000)</code> = 5.3. The predicted price of a 750 square-foot house is somewhat beyond your budget. But you figure that some 750-square foot house will be within your budget. To see if this is likely, look at the <strong>prediction interval</strong> of the house price. You can do this by adding the <code>interval="prediction"</code> to the <code>mod_eval()</code> command. Is your budget (5.3 log dollars) within the prediction interval? Show your command and the result in your Rmd file and also give a sentence stating your conclusion.</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(pmod, <span class="at">log_area =</span> <span class="fl">2.87</span>, <span class="at">interval=</span><span class="st">"prediction"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  log_area model_output    lower   upper
1     2.87     5.324298 4.993416 5.65518</code></pre>
</div>
</div>
<p>Yeah! Your budget of 5.3 log dollars is near the center of the prediction interval.</p>
</div>
</div>
<ol start="5" type="1">
<li>On a hunch, you decide to see whether you might find a 1500 square foot (<code>log_area</code> = 3.18) might also fall within the prediction interval. Will it? Show your command, the result, and a sentence interpreting the result.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(pmod, <span class="at">log_area =</span> <span class="fl">3.18</span>, <span class="at">interval=</span><span class="st">"prediction"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  log_area model_output    lower    upper
1     3.18     5.583697 5.252851 5.914543</code></pre>
</div>
</div>
<p>Strictly speaking, your budget (5.3 log dollars) is within the prediction interval. But it is very close to the lower bound of 5.25 log dollars. So there will likely be few houses of 1500 square feet within your budget. So plan that the house you will end up purchasing will be somewhere in the range 750-1500 square feet.</p>
</div>
</div>
<hr>
</section>
<section id="xx" class="level2">
<h2 class="anchored" data-anchor-id="xx">25.XX</h2>
<p>You are a bus dispatcher in New York City. The Department of Education bus logistics office has called to say that a school bus has broken down and the students need to be offloaded onto a functioning bus to take them to school. Unfortunately, the DOE officer didn’t tell you how many students are on the bus. You need to make a quick prediction in order to decide what kind and how many busses you will need for the pickup.</p>
<p>You go to the NYC OpenData site bus breakdown page to get the historical data on how many students are on the bus. There are more than 200,000 bus events listed, each one of them including the number of students. You make a jitter/violin plot of the number of students on each of the 200,000 busses.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/cheetah-lose-saucer-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="a">
<li>The violin plot looks like an upside-down T. Explain what’s going on. (Hint: How many students fit on a school bus?) -A- As very often happens, the data file contains data-entry or other mistakes producing outliers. Almost all of the 200,000 bus incidents fall into the horizontal line near zero. There are only 164 with a number above 100 students. In the US, the legal maximum capacity for a school bus is 72 students.</li>
</ol>
<p>One of the ways of handling outliers is to delete them from the data. A softer way is to trim the outliers, giving them a value that is distinct but not so far from the mass of values. The figure below shows a violin plot where any record where the number of students is greater than 20 is trimmed to 21. ::: {.cell} ::: {.cell-output-display} <img src="LC-list_files/figure-html/cheetah-lose-saucer-2-1.png" class="img-fluid" width="672"> ::: :::</p>
<ol start="2" type="a">
<li><p>If you sent a small school bus (capacity 14), what fraction of the time would you be able to handle all the students on the school bus? -A- Only about 5% of the area of the violin plot is above 14.</p></li>
<li><p>If you sent one 14-passenger school bus with another on stand-by (just in case the first bus doesn’t have sufficient capacity), what fraction of the time could you handle all the students?</p></li>
</ol>
<p>-A- It’s tempting to say that the 2 x 14 = 28 passenger capacity could handle all the cases, but remember, the cases at 21 stand for “21 or more passengers.” We can’t tell from the violin plot how many of those have more than 28 students on board.</p>
<ol start="4" type="a">
<li>Notice that the violin plot is jagged. Explain why. -A- The number of passengers is an integer, e.g.&nbsp;1, 2, 3, …. It can’t be a number like 4.5.</li>
</ol>
<hr>
</section>
<section id="yyy" class="level2">
<h2 class="anchored" data-anchor-id="yyy">25.YYY</h2>
<p>At a very large ballroom dance class, you are to be teamed up with a randomly selected partner. There are 200 potential partners. The figure below shows their heights.</p>
<p>From the data plotted, calculate a 95% prediction interval on the height of your eventual partner. (Hint: You can do this by counting.)</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/fish-eat-vase-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>59 to 74 inches.</p>
<p>Since there are 200 points, a 95% interval should exclude the top five cases and the bottom five cases. So draw the bottom boundary of the interval just above the bottom five points, and the top boundary just below the top five points.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/fish-eat-vase-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="lesson-26" class="level2">
<h2 class="anchored" data-anchor-id="lesson-26">Lesson 26</h2>
<p>Ideas</p>
<ol type="1">
<li>Construct prediction interval when evaluating a model function.</li>
<li>Plot a prediction band.</li>
<li>Check the consistency of the prediction band with the DAG mechanism for large <span class="math inline">\(n\)</span>.
<ul>
<li>Is the width right?</li>
<li>Is the slope right?</li>
</ul></li>
<li>For small <span class="math inline">\(n\)</span> (say, <span class="math inline">\(n=5\)</span>), how is the prediction band different than for large <span class="math inline">\(n\)</span>?</li>
</ol>
</section>
<section id="section-16" class="level2">
<h2 class="anchored" data-anchor-id="section-16">26.1</h2>
<p>The <code>openintro::bac</code> data frame records an experiment with sixteen student volunteers at Ohio State University who each drank a randomly assigned number of cans of beer (<code>beers</code>). These students were evenly divided between men and women, and they differed in weight and drinking habits. Thirty minutes later, a police officer measured their blood alcohol content (<code>bac</code>) in grams of alcohol per deciliter of blood.</p>
<p>Construct a model of <code>bac ~ beers</code> using the <code>openintro::bac</code> data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(bac <span class="sc">~</span> beers, <span class="at">data =</span> openintro<span class="sc">::</span>bac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Federal and state laws typically specify a legal upper limit for blood alcohol content of a driver of 0.08%. According to the model function, how many beers corresponds to this upper limit?</li>
</ol>
</section>
<section id="solution-40" class="level2 content-note">
<h2 class="anchored" data-anchor-id="solution-40">Solution</h2>
<p>One way to calculate this is to guess at the number of beers, then modify your guess according to whether it’s high or low.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(mod, <span class="at">beers=</span><span class="dv">4</span>) <span class="co"># too low</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  beers model_output
1     4   0.05915444</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(mod, <span class="at">beers=</span><span class="dv">6</span>) <span class="co"># too high</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  beers model_output
1     6   0.09508197</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># next guess should be around 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another way, for the avid calculus student, is to turn the model into a function, then use <code>Zeros()</code> to find where the output is 0.08.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(mod)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>mosaicCalc<span class="sc">::</span><span class="fu">Zeros</span>(<span class="fu">f</span>(beers) <span class="sc">-</span> <span class="fl">0.08</span> <span class="sc">~</span> beers, mosaicCalc<span class="sc">::</span><span class="fu">bounds</span>(<span class="at">beers=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  beers .output.
  &lt;dbl&gt;    &lt;dbl&gt;
1  5.16        0</code></pre>
</div>
</div>
<p>Simplest of all, just graph the model function and read backwards from the vertical axis.</p>
</section>
<ol start="2" type="1">
<li>It’s hard to believe that the volunteers in a beer-drinking study who are willing to risk being randomly assigned to drink five or more beers will be representative of a broader group of people. So, we’ll just consider the results to apply to “volunteers.”</li>
</ol>
<p>At the number of beers you found in (1), what fraction of volunteers will be above the 0.08 level?</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>It’s a good assumption that about half the time the actual value for an individual person will be above the model output. This means that five beers should not be taken as an appropriate guideline—half of the people who follow that guideline will be above the legal limit.</p>
</div>
</div>
<ol start="3" type="1">
<li>A proper guideline should take into account that the goal is to entirely avoid people who follow it being at or above the 0.08 level. To accomplish this absolutely means finding a number of beers with the 100% prediction interval is entirely below 0.08. Unfortunately a prediction interval at a 100% level stretches to infinity, so eliminating <em>any</em> cases having a BAC of 0.08 means an absolute prohibition on drinking. That might be a good idea but, historically, such policies have not been successful in the US.</li>
</ol>
<p>To have a non-zero guideline, we have to allow that the guideline will put a <em>small fraction</em> of people above the 0.08 BAC level. Suppose that we decide to use the standard 95% level for the prediction interval. Construct the 95% prediction interval on BAC for each of the inputs 1 to 5 beers. Which number of beers will keep the upper limit of the prediction interval below the 0.08 BAC limit?</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mod_eval</span>(mod, <span class="at">interval=</span><span class="st">"prediction"</span>, <span class="at">level=</span><span class="dv">1</span>, <span class="at">beers =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  beers model_output lower upper
1     1  0.005263158  -Inf   Inf
2     2  0.023226920  -Inf   Inf
3     3  0.041190682  -Inf   Inf
4     4  0.059154443  -Inf   Inf
5     5  0.077118205  -Inf   Inf</code></pre>
</div>
</div>
<p>Two beers has the upper limit of the prediction interval below 0.08.</p>
</div>
</div>
<ol start="4" type="1">
<li>It turns out that 2.55 beers has a prediction interval whose upper limit is at 0.08. Using 2.55 beers as the guideline for staying below 0.08 BAC, what fraction of people who drink 2.55 beers will nonetheless have a BAC above 0.08?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The 95% prediction interval contains 95% of the results. That puts a fraction of 0.025 above the top of the interval and another 0.025 below the bottom of the interval. We’re concerned only about BAC being too high. So, about 0.025 of people who stick to a limit of 2.55 beers will end up with a DAC above the 0.08 limit.</p>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
<section id="gg" class="level2">
<h2 class="anchored" data-anchor-id="gg">26.GG</h2>
<p>The town where you live has just gone through a so-called 100-year rain storm, which caused flooding of the town’s sewage treatment plant and consequent general ickiness. The city council is holding a meeting to discuss install flood barriers around the sewage treatment plant. The are trying to decide how urgent it is to undertake this expensive project. When will the next 100-year storm occur.</p>
<p>To address the question, the city council has enlisted you, the town’s most famous data scientist, to do some research to find the soonest that a 100-year flood can re-occcur.</p>
<p>You look at the historical weather records for towns that had a 100-year flood at least 20 years ago. The records start in 1900 and you found 1243 towns with a 100-year flood that happened 20 or more years ago. The plot shows, for all the towns that had a 100-year flood at least 20 years ago, how long it was until the next flood occurred. Those town for which no second flood occurred are shown in a different color.</p>
<p>You explain to the city council what a 95% prediction interval is and that you will put your prediction in the form of a probability of 2.5% that the flood will occur sooner than the date you give. You show them how to count dots on a jitter plot to find the 2.5% level.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1110 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/lobster-spend-cotton-1-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/lobster-spend-cotton-1-2.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
<p>Since the town council is thinking of making the wall-building investment in the next 10 years, you also have provided a zoomed-in plot showing just the floods where the interval to the next flood was less than ten years.</p>
<ol type="a">
<li>You have n = 1243 floods in your database. How many is 2.5% of 1243? -A- 31</li>
<li>Using the zoomed-in plot, starting at the bottom count the number of floods you calculated in part (a). A line drawn where the counting stops is the location of the bottom of the 95% coverage interval. Where is the bottom of the 95% interval.-A- About 2.5 years.</li>
<li>A council member proposes that the town act soon enough so that there is a 99% chance that the next 100-year flood will not occur before the work is finished. It will take 1 year to finish the work, once it is started. According to your data, when should the town start work? -A- Find the bottom limit that excludes 1% of the 1243 floods in your data. This will be between the 12th and 13th flood, counting up from the bottom. This will be at about 1.25 years, that is 15 months. So the town has 3 months before work must begin. That answer will be a big surprise to those who think the next 100-year flood won’t come for about 100 years.</li>
<li>A council member has a question. “Judging from the graph on the left, are you saying that the next 100-year flood <em>must</em> come sometime within the next 120 years?” No, that’s not how the graph shold be read. Explain why. -a- Since the records only start in 1900, the longest possible interval can be 120 years, that is, from about 2020 to 1900. About half of the dots in the plot reflect towns that haven’t yet had a recurrence 100-year flood. Those could happen at any time, and presumably many of them will happen after an interval of, say, 150 years or even longer.</li>
</ol>
<hr>
</section>
<section id="ww-1" class="level2">
<h2 class="anchored" data-anchor-id="ww-1">26.WW</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>This exercise will be about the mean square error when modeling BMI versus weight. Weight is not the same thing as BMI, though it is closely related. You can see from the data the amount of variation there is in BMI at any given weight.</p>
<p>Add in Height as an explanatory variable. Mean square error gets smaller. (R^2 goes from .85 to .95)</p>
<p>FOR EXTRA CREDIT? Model log BMI against log Weight + log Height. RMS residual is zero.</p>
</div>
</div>
<hr>
</section>
<section id="nn" class="level2">
<h2 class="anchored" data-anchor-id="nn">26.NN</h2>
<p>The violin plot shows gasoline consumption (in miles-per-gallon for city driving) stratified by the number of passenger doors for the <code>SDSdata::MPG</code> data frame. (For many vehicles, the values are missing. These are marked “NA”.)</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/squirrel-cost-rug-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="a">
<li>Sketch in 95% prediction intervals for gasoline consumption stratified by the number of passenger doors.</li>
</ol>
<p>::: {.callout-note} ## Solution ::: {.cell} ::: {.cell-output-display} <img src="LC-list_files/figure-html/squirrel-cost-rug-2-1.png" class="img-fluid" width="672"> ::: ::: :::</p>
<ol start="2" type="a">
<li>Which category – 2 doors, 4 doors, or NA – has the largest number of vehicles?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is no way to tell from the violin graph. Each violin shows the distribution of values <em>within</em> its category. There’s no information about how many data rows are comprised by an individual violin.</p>
</div>
</div>
<p>The unit of observation in the <code>MPG</code> data frame is “a model of car”. There are 1154 different models included in <code>MPG</code>, thus 1154 rows. Imagine that you had another data frame with the same variables as <code>MPG</code>, but where the unit of observation were “a registered vehicle”. There are roughly 290 million vehicles registered in the US, so the data frame would have 290 million rows. Also imagine (probably contrary to reality at present) that car models with relatively high miles per gallon are much more popular than cars with low miles per gallon.</p>
<ol start="3" type="a">
<li>Sketch out what the <code>MPG ~ doors</code> violins would look like for the 290 million-row table.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Compared to the 1154 data frame, the violins would be fatter at the higher miles-per-gallon and correspondingly thinner at low miles-per-gallon. If they are fatter in one place, they must be thinner in another so that the overall area of each violin stays the same.</p>
<p>The graph shows an imagined scenario where cars with a 10 mile-per-gallon increase in fuel efficiency triples the popularity of a car model.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/squirrel-cost-rug-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="r-1" class="level2">
<h2 class="anchored" data-anchor-id="r-1">26.R</h2>
<p>You’ve been told that Jenny is in an elementary school that covers grade K through 6. Predict how old is Jenny.</p>
<ol type="a">
<li>Put your prediction in the format of assigning a probability to each of the possible outcomes, as listed below. Remember that the sum of your probabilities should be 1. (You don’t have to give too much thought to the details. Anything reasonable will do.)</li>
</ol>
<pre><code>Age         | 3 or under | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12  | 13 | 14 | 15+
------------|------------|---|---|---|---|---|---|----|----|-----|----|----|-----
probability |            |   |   |   |   |   |   |    |    |     |    |    |</code></pre>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Perhaps something like the following, where the probabilities are given in percentage points.</p>
<pre><code>Age         | 3 or under  | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  | 14  | 15+
------------|-------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|------
probability |      0      | 2.5 | 12  | 12  | 12  | 12  | 12  | 12  | 12  | 11  | 2   | 0.5 | 0</code></pre>
<p>Ages 5 through 12 are equally likely, with a small possibility of 4-year olds or 14 year olds.</p>
</div>
</div>
<ol start="2" type="a">
<li>Translate your set of probabilities to a 95% prediction interval.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The 95% prediction interval 5 to 12 years old.</p>
<p>A 95% interval should leave out 2.5% of the total probability on either end. Below age 5 there is 2.5% and above age 12 there is 2.5%.</p>
<p>If you wrote your own probabilities so that there’s no cut-off that gives exactly 2.5%, then set the interval to come as close as possible to 2.5%.</p>
</div>
</div>
<hr>
</section>
<section id="lesson-27" class="level2">
<h2 class="anchored" data-anchor-id="lesson-27">Lesson 27</h2>
<p>This is a QR day.</p>
</section>
<section id="lesson-28" class="level2">
<h2 class="anchored" data-anchor-id="lesson-28">Lesson 28</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Remove these hard-coded objectives after drafting problems
</div>
</div>
<div class="callout-body-container callout-body">
<p>28.1 Read a DAG to determine which covariates to include in a model to reduce (out-of-sample) prediction error.</p>
<p>28.2 Calculate amount of in-sample mean square error reduction to be expected with a useless (random) covariate. (Residual sum of squares divided by residual degrees of freedom.)</p>
</div>
</div>
</section>
<section id="section-17" class="level2">
<h2 class="anchored" data-anchor-id="section-17">28.1</h2>
<p>Consider <code>dag01</code>, which shows a simple causal relationship between two variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dag_draw</span>(dag01)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So far as the size of prediction error is concerned, does it matter whether <code>x</code> is used to predict <code>y</code> or vice versa? Show the models and the results you use to come to your conclusion. ::: {.callout-note} ## Solution</p>
<p>:::</p>
<hr>
</section>
<section id="b-2" class="level2">
<h2 class="anchored" data-anchor-id="b-2">28.B</h2>
<p>Whenever you seek to study a partial relationship, there must be at least three variables involves: a response variable, an explanatory variable that is of direct interest, and one or more other explanatory variables that will be held constant: the covariates. Unfortunately, it’s hard to graph out models involving three variables on paper: the usual graph of a model just shows one variable as a function of a second.</p>
<p>One way to display the relationship between a response variable and two quantitative explanatory variables is to use a contour plot. The two explanatory variables are plotted on the axes and the fitted model values are shown by the contours. <a href="#fig-car-modelC">Figure&nbsp;4</a> shows such a display of the fitted model of used car prices as a function of <code>mileage</code> and <code>age</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-car-modelC" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/car-modelC.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The dots are the <code>mileage</code> and <code>age</code> of the individual cars — the model <code>Price</code> is indicated by the contours.</p>
<p>The total relationship between <code>Price</code> and <code>mileage</code> involves how the price changes for typical cars of different mileage.</p>
<ol type="1">
<li>Pick a dot that is a typical car with about 10,000 miles. Using the contours, find the model price of this car. Which of the following is closest to the model price (in dollars)?</li>
</ol>
<p>18000, 21000, 25000, <strong>30000</strong></p>
<ol start="2" type="1">
<li>Pick another dot that is a typical car with about 70,000 miles. Using the contours, find the model price of this car. Which of the following is closest to the model price?</li>
</ol>
<p>18000 <strong>21000</strong>, 25000, 30000</p>
<p>The total relationship between <code>Price</code> and <code>mileage</code> is reflected by this ratio: change in model price divided by change in mileage. What is that ratio (roughly)?</p>
<ol type="a">
<li><strong><span class="math inline">\(\frac{30000 - 21000}{70000-10000}=0.15\)</span> dollars/mile</strong></li>
<li><span class="math inline">\(\frac{70000-10000}{25000-21000}=15.0\)</span> dollars/mile</li>
<li><span class="math inline">\(\frac{25000 - 18000}{70000-10000}=0.12\)</span> dollars/mile</li>
</ol>
<p>In contrast, the partial relationship between <code>Price</code> and <code>mileage</code> holding <code>age</code> constant is found in a different way, by comparing two points with different mileage but exactly the same age.</p>
<ol start="3" type="1">
<li>Mark a point on the graph where age is 3 years and mileage is</li>
<li>Keep in mind that this point doesn’t need to be an actual car, that is, a data point in the graph typical car. There might be no actual car with an age of 3 years and mileage 10000. But using the contour model, find the model price at this point. Which of these is closest?</li>
</ol>
<p>22000, 24000, 26000 <strong>28000</strong>, 30000</p>
<ol start="4" type="1">
<li>Find another point, one where the age is exactly the same (3 years) but the mileage is different. Again there might not be an actual car there. Let’s pick mileage as 80000. Using the contours, find the model price at this point. Which of these is closest?</li>
</ol>
<p><strong>22000</strong>, 24000, 26000, 28000, 30000</p>
<ol start="5" type="1">
<li>The partial relationship between price and mileage (holding age constant) is reflected again reflected by the ratio of the change in model price divided by the change in mileage. What is that ratio (roughly)?</li>
</ol>
<ol type="a">
<li><span class="math inline">\(\frac{80000-10000}{25000-21000} = 17.50\)</span> dollars/mile</li>
<li><strong><span class="math inline">\(\frac{28000 - 22000}{80000-10000}=0.09\)</span> dollars/mile</strong></li>
<li><span class="math inline">\(\frac{26000 - 24000}{80000-10000}=0.03\)</span> dollars/mile</li>
</ol>
<hr>
<p>Both the total relationship and the partial relationship are indicated by the slope of the model price function given by the contours. The total relationship involves the slope between two points that are typical cars, as indicated by the dots. The partial relationship involves a slope along a different direction. When holding age constant, that direction is the one where mileage changes but age does not (vertical in the graph).</p>
<p>There’s also a partial relationship between price and age holding mileage constant. That partial relationship involves the slope along the direction where age changes but mileage is held constant. Estimate that slope by finding the model price at a point where age is 2 years and another point where age is 5 years. You can pick whatever mileage you like, but it’s key that your two points be at exactly the same mileage.</p>
<ol start="6" type="1">
<li>Estimate the slope of the price function along a direction where age changes but mileage is held constant (horizontally on the graph).</li>
</ol>
<ol type="a">
<li>100 dollars per year</li>
<li>500 dollars per year</li>
<li><strong>1000 dollars per year</strong></li>
<li>2000 dollars per year</li>
</ol>
<p>The contour plot in <a href="#fig-car-modelC">Figure&nbsp;4</a> depicts a model in which both mileage and age are explanatory variables. By choosing the direction in which to measure the slope, one determines whether the slope reflects a total relationship (a direction between typical cars), or a partial relationship holding age constant (a direction where age does not change, which might not be typical for cars), or a partial relationship holding mileage constant (a direction where mileage does not change, which also might not be typical for cars).</p>
<p>In calculus, the partial derivative of price with respect to mileage refers to an infinitesimal change in a direction where age is held constant. Similarly, the partial derivative of price with respect to age refers to an infinitesimal change in a direction where mileage is held constant.</p>
<p>Of course, in order for the directional derivatives to make sense, the price function needs to have <strong>both</strong> age and mileage as explanatory variables. <a href="#fig-car-modelA">Figure&nbsp;5</a> shows a model in which only <code>age</code> has been used as an explanatory variable: there is no dependence of the function on <code>mileage</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-car-modelA" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/car-modelA.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;5: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Such a model is incapable of distinguishing between a partial relationship and a total relationship. Both the partial and the total relationship involve a ratio of the change in price and change in age between two points. For the total relationship, those two points would be typical cars of different ages. For the partial relationship, those two points would be different ages at exactly the same mileage. But, because the model depend on mileage, the two ratios will be exactly the same.</p>
<hr>
</section>
<section id="c-2" class="level2">
<h2 class="anchored" data-anchor-id="c-2">28.C</h2>
<p>In each of the following, a situation is described and a question is asked that is to be answered by modeling. Several variables are listed. Imagine an appropriate model and identify each variable as either the response variable, an explanatory variable, a covariate, or a variable to be ignored.</p>
<blockquote class="blockquote">
<p>EXAMPLE: <em>Some people have claimed that police foot patrols are more effective at reducing the crime rate than patrols done in automobiles. Data from several different cities is available; each city has its own fraction of patrols done by foot, its own crime rate, etc. The mayor of your town has asked for your advice on whether it would be worthwhile to shift to more foot patrols in order to reduce crime. She asks, “Is there evidence that a larger fraction of foot patrols reduces the crime rate?”</em></p>
</blockquote>
<p><strong>Variables</strong>:</p>
<ol>
<li>Crime rate (e.g., robberies per 100000 population)</li>
<li>Fraction of foot patrols</li>
<li>Number of policemen per 1000 population</li>
<li>Demographics (e.g., poverty rate)</li>
</ol>
<p>Answer: The question focuses on how the <code>fraction of foot patrols</code> might influence <code>crime rate</code>, so <code>crime rate</code> is the response variable and <code>fraction of foot patrols</code> is an explanatory variable.</p>
<p>But, the crime rate might also depend on the overall level of policing (as indicated by the <code>number of policemen</code>), or on the social conditions that are associated with crime (e.g., <code>demographics</code>). Since the mayor has no power to change the demographics of your town, and probably little power to change the overall level number of policemen, in modeling the data from the different cities, you would want to hold constant <code>number of policemen</code> and the <code>demographics</code>. You can do this by treating <code>number of policemen</code> and <code>demographics</code> as covariates and including them in your model.</p>
<hr>
<section id="alcohol-and-road-safety" class="level3">
<h3 class="anchored" data-anchor-id="alcohol-and-road-safety">Alcohol and Road Safety</h3>
<p>Fifteen years ago, your state legislature raised the legal drinking age from 18 to 21 years. An important motivation was to reduce the number of car accident deaths due to drunk or impaired drivers. Now, some people are arguing that the 21-year age limit encourages binge drinking among 18 to 20 year olds and that such binge drinking actually increases car accident deaths. But the evidence is that the number of car accident deaths has gone down since the 21-year age restriction was introduced.<br>
You are asked to examine the issue: Does the reduction in the number of car-accident deaths per year point to the effectiveness of the 21-year drinking age?</p>
<p><strong>Variables</strong>:</p>
<ol>
<li>Drinking age limit. Levels: 18 or 21.</li>
</ol>
<p>Which is it? response <strong>explanatory</strong> covariate ignore</p>
<ol>
<li>Number of car-accident deaths per year.</li>
</ol>
<p>Which is it? <strong>response</strong> explanatory covariate ignore</p>
<ol>
<li>Prevalence of seat-belt use.</li>
</ol>
<p>Which is it? response explanatory <strong>covariate</strong> ignore</p>
<ol>
<li>Fraction of cars with air bags.</li>
</ol>
<p>Which is it? response explanatory <strong>covariate</strong> ignore</p>
<ol>
<li>Number of car accidents (with or without death).</li>
</ol>
<p>Which is it? response explanatory covariate <strong>ignore</strong></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Explanation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Of direct interest is how the <code>drinking age limit</code> accounts for the <code>number of deaths</code>, so these are, respectively, explanatory and response variables. But a lower death rate might also be explained by increased use of <code>seat belts</code> and of <code>air bags</code>; these can prevent deaths in an accident and they have been increasing over the same period in which the 21-year age limit was introduced.<br>
In examining how the <code>drinking age limit</code> might affect the <code>number of deaths</code>, it might be important to hold these other factors constant. So, <code>seat belts</code> and <code>air bags</code> should be covariates included in the model.</p>
<p>The <code>number of accidents</code> is different. It seems plausible that the mechanism by which drunk driving causes deaths is by causing accidents. If the <code>number of accidents</code> were included as a covariate, then the model would be examining how the death rate changes with drinking age when {} even though the point is that the higher drinking age might reduce the number of accidents. So, <code>number of accidents</code> ought to be left out of the model.</p>
</div>
</div>
</section>
<section id="rating-surgeons" class="level3">
<h3 class="anchored" data-anchor-id="rating-surgeons">Rating Surgeons</h3>
<p>Your state government wants to guide citizens in choosing physicians. As part of this effort, they are going to rank all the surgeons in your state. You have been asked to build the rating system and you have a set of variables available for your use. These variables have been measured for each of the 342,861 people who underwent surgery in your state last year: one person being treated by one doctor. How should you construct a rating system that will help citizens to choose the most effective surgeon for their own treatment?</p>
<p><strong>Variables</strong>:</p>
<ol>
<li>Outcome score. (A high score means that the operation did whatit was supposed to. A low score reflects failure, e.g.&nbsp;death. Death is a very bad outcome, post-operative infection a somewhat bad outcome.)</li>
</ol>
<p>Which is it? <strong>response</strong> explanatory covariate ignore</p>
<ol>
<li>Surgeon. One level for each of the operating surgeons.</li>
</ol>
<p>Which is it? response explanatory covariate ignore</p>
<ol>
<li>Experience of the surgeon.</li>
</ol>
<p>Which is it? response explanatory covariate <strong>ignore</strong></p>
<ol>
<li>Difficulty of the case.</li>
</ol>
<p>Which is it? response explanatory <strong>covariate</strong> ignore</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Explanation
</div>
</div>
<div class="callout-body-container callout-body">
<p>The patient has a choice of doctors and wants to have the best possible outcome. So the model needs to include <code>surgeon</code> as an explanatory variable and <code>outcome score</code> as the response.</p>
<p>A simple model might be misleading for informing a patient’s choice. The best doctors might take on the most difficult cases and therefore have worse outcomes than doctors who are not as good. But the patient’s condition doesn’t change depending on what doctor is selected. This means that the <code>difficulty of the case</code> ought to be included as a covariate. The model would thus tell what is the typical outcome for each surgeon <em>adjusting for the difficulty of the case</em>, that is, given the patient’s condition.</p>
<p>Another variable that might explain the outcome is the <code>experience of the surgeon</code>; possibly more experienced surgeons produce better outcomes. However, <code>experience of the surgeon</code><br>
should not be included in the model used to inform a patient’s choice. The reason is that the patient’s choice of a doctor already reflects the experience of that doctor. From the patient’s point of view, it doesn’t matter whether the doctor’s outcomes reflect a high level of talent, a lot of experience, or superior training.</p>
<p>The choice of variables and covariates depends on the purpose of the model. If the purpose of the model were to decide how much experience to require of doctors before they are licensed, then an appropriate model would have <code>outcome</code> as the response, <code>experience</code> as the explanatory variable, and <code>difficulty of the case</code> and <code>surgeon</code> as covariates.</p>
</div>
</div>
</section>
<section id="school-testing" class="level3">
<h3 class="anchored" data-anchor-id="school-testing">School testing</h3>
<p>Last year, your school district hired a new superintendent to ``shake things up.’’ He did so, introducing several controversial new policies. At the end of the year, test scores were higher than last year. A representative of the teachers’ union has asked you to examine the score data and answer this question: Is there reason to think that the higher scores were the result of the superintendent’s new policies?</p>
<p><strong>Variables</strong>:</p>
<ol>
<li>Superintendent (levels: New or Former superintendent)</li>
</ol>
<p>Which is it? response <strong>explanatory</strong> covariate ignore</p>
<ol>
<li>Exam difficulty</li>
</ol>
<p>Which is it? response explanatory <strong>covariate</strong> ignore</p>
<ol>
<li>Test scores</li>
</ol>
<p>Which is it? <strong>response</strong> explanatory covariate ignore</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Explanation
</div>
</div>
<div class="callout-body-container callout-body">
<p>The issue of direct interest is whether the policies of the new superintendent might have influenced the test scores, so the model should be <code>test scores</code> as the response and <code>superintendent</code> as an explanatory variable. Of course, one possible mechanism that might have improved the scores, outside of the influence of the superintendent’s policies, is the test itself. If it were easier this year than last year, then it wouldn’t be surprising that the test scores improved this year even if the superintendent’s policies had no effect. So <code>exam difficulty</code> should be a covariate to be included in the model.</p>
</div>
</div>
</section>
<section id="gravity" class="level3">
<h3 class="anchored" data-anchor-id="gravity">Gravity</h3>
<p>In a bizarre twist of time, you find yourself as Galileo’s research assistant in Pisa in 1605. Galileo is studying gravity: Does gravity accelerate all materials in the same way, whether they be made of metal, wood, stone, etc.? Galileo hired you as his assistant because you have brought with you, from the 21st century, a stop-watch with which to measure time intervals, a computer, and your skill in statistical modeling. All of these seem miraculous to him.</p>
<p>He drops objects off the top of the Leaning Tower of Pisa and you measure the following:</p>
<p><strong>Variables</strong></p>
<ol>
<li>The size of the object (measured by its diameter).</li>
</ol>
<p>Which is it? response explanatory <strong>covariate</strong> ignore</p>
<ol>
<li>Time of fall of the object.</li>
</ol>
<p>Which is it? <strong>response</strong> explanatory covariate ignore</p>
<ol>
<li>The material from which the object is made (brass, lead, wood, stone).</li>
</ol>
<p>Which is it? response <strong>explanatory</strong> covariate ignore</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Explanation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Galileo wants to know how the <code>material</code> affects the <code>time</code> of fall of the object. These are the explanatory and response variables respectively. But the size of the object also has an influence, due to air resistance. For instance, a tiny ball will fall more slowly than a large ball. So the <code>size of the object</code> should be a covariate.</p>
</div>
</div>
<hr>
<p>##28.D</p>
<p>Polling organizations often report their results in tabular form, as in <a href="#fig-time-poll-2008">Figure&nbsp;6</a>. The basic question in the poll summarized in <a href="#fig-time-poll-2008">Figure&nbsp;6</a> asked whether the respondant agrees with the statement, “The US was a better place to live in the 1990s and will continue to decline.”</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-time-poll-2008" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/time-poll-july-2008.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;6: Results from a poll conducted by <em>Time</em> magazine. (Source: <em>Time</em>, July 28, 2008, p.&nbsp;41)</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The response variable here is “pessimism.” In the report, there are three explanatory variables: race/ethnicity, income, and age. The report’s breakdown is one explanatory variable at a time, meaning that it considers “total change” rather than “change holding other factors constant.” This can be misleading when there are connections among the explanatory variables. For instance, relatively few people in the 18 to 29 age group have high incomes.</p>
<p>Pollsters rarely make available the raw data they collected. This is unfortunate because it prevents others from looking at the data in different ways. For the purpose of this exercise, you’ll use simulated data in the frame <code>math300::Econ_outlook_poll</code>. Of course, the simulation doesn’t necessarily describe people’s attitudes directly, but it does let you see how the conclusions drawn from the poll might have been different if the results for each explanatory variable had been presented in a way that adjusts for the other explanatory variables.</p>
<ol type="1">
<li><p>Construct the model <code>pessimism ~ age - 1</code>. Look at the coefficients and choose the statement that best reflects the results. (In case you’re wondering: The <code>-1</code> is convenient when the explanatory variable is categorical. It ensures that a coefficient is reported for each level of the <code>age</code> variable. You’ll have to compare coefficients for different age groups to see a trend.)</p></li>
<li><p><strong>Middle aged people have lower pessimism than young or old people.</strong></p></li>
<li><p>Young people have the least pessimism.</p></li>
<li><p>There is no relationship between age and pessimism.</p></li>
<li><p>Now construct the model <code>pessimism ~ income - 1</code>. Look at the coefficients and choose the statement that best reflects the results:</p></li>
<li><p>Higher income people are more pessimistic than low-income people.</p></li>
<li><p><strong>Higher income people are less pessimistic than low-income people.</strong></p></li>
<li><p>There is no relationship between income and pessimism.</p></li>
<li><p>Construct a model in which you can look at the relationship between pessimism and age while <em>adjusting for</em> income. That is, include income as a covariate in your model. Look at the coefficients from your model and choose the statement that best reflects the results:</p></li>
<li><p><strong>Holding income constant, older people tend to have higher levels of pessimism than young people.</strong></p></li>
<li><p>Holding income constant, young people tend to have higher levels of pessimism than old people.</p></li>
<li><p>Holding income constant, there is no relationship between age and pessimism.</p></li>
<li><p>You can also interpret that same model to see the relationship between pessimism and income while <em>adjusting for age</em>. Which of the following statements best reflects the results? (Hint: make sure to pay attention to the sign of the coefficients.)</p></li>
<li><p>Holding age constant, higher income people are more pessimistic than low-income people.</p></li>
<li><p><strong>Holding age constant, higher income people are less pessimistic than low-income people.</strong></p></li>
<li><p>Holding age constant, there is no relationship between income and pessimism.</p></li>
</ol>
<hr>
</section>
</section>
<section id="e-3" class="level2">
<h2 class="anchored" data-anchor-id="e-3">28.E</h2>
<p>A study<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> on drug D indicates that patients who were given the drug were <strong>less</strong> likely to recover from their condition C. Here is a table showing the overall results:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Drug</th>
<th style="text-align: right;"># recovered</th>
<th style="text-align: right;"># died</th>
<th style="text-align: right;">Recovery Rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Given</td>
<td style="text-align: right;">1600</td>
<td style="text-align: right;">2400</td>
<td style="text-align: right;">40%</td>
</tr>
<tr class="even">
<td style="text-align: left;">Not given</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">50%</td>
</tr>
</tbody>
</table>
<p>Strangely, when investigators looked at the situation separately for males and females, they found that the drug <strong>improves</strong> recovery for each group:</p>
<p>Sex | Drug | num recovered | # died | Recovery Rate :—-::———|—–:|—–:|——: Sex | Drug | num recovered | # died | Recovery Rate Females| Given | 900 | 2100 | 30% | Not given | 200 | 800 | 20% e | | | |<br>
Males | Given | 700 | 300 | 70% | Not given | 1800 | 1200 | 60%</p>
<ol type="1">
<li><p>Are the two tables consistent with one another in terms of the numbers reported?</p></li>
<li><p>Does the drug improve recovery or hinder recovery?</p></li>
<li><p>What advice would you give to a physician about whether or not to prescribe the drug to her patients? Give enough of an explanation that the physician can judge whether your advice is reasonable.</p></li>
</ol>
<hr>
</section>
<section id="f-1" class="level2">
<h2 class="anchored" data-anchor-id="f-1">28.F</h2>
<p>Economists measure the inflation rate as a percent change in price per year. Unemployment is measured as the fraction (percentage) of those who want to work who are seeking jobs.</p>
<p>According to economists, in the short run — say, from one year to another — there is a relationship between inflation and unemployment: all other things being equal, as unemployment goes up, inflation should go down. (The relationship is called the “Phillips curve,” but you don’t need to know that or anything technical about economics to answer this question.)</p>
<ol type="1">
<li><dl>
<dt>If the Phillips-curve relationship is true, in the model</dt>
<dd>
<code>Inflation ~ Unemployment</code>, what should be the sign of the coefficient on <code>Unemployment</code>? positive, zero, <strong>negative</strong>
</dd>
</dl></li>
</ol>
<p>But despite the short term relationship, economists claim that In the long run — over decades — unemployment and inflation should be unrelated.</p>
<ol start="2" type="1">
<li><dl>
<dt>If the long-run theory is true, in the model</dt>
<dd>
<code>Inflation ~ Unemployment</code>, what should be the sign of the coefficient on <code>Unemployment</code>? positive, <strong>zero</strong>, negative}
</dd>
</dl></li>
</ol>
<hr>
<p>The point of this exercise is to figure out how to arrange a model so that you can study the short-term behavior of the relationship, or so that you can study the long term relationship.</p>
<p>For your reference, <a href="#fig-inflation1">Figure&nbsp;7</a> shows inflation and unemployment rates over about 30 years in the US. Each point shows the inflation and unemployment rates during one quarter of a year. The plotting symbol indicates which of three decade-long periods the point falls into.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-inflation1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/inflation-fig1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;7: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The relationship between inflation and unemployment seems to be different from one decade to another — that’s the short term.</p>
<ol start="3" type="1">
<li>Which decade seems to violate the economists’ Phillips Curve short-term relationship? <strong>A</strong>, B, C, none, all</li>
</ol>
<p>Using the modeling language, express these different possible relationships between the variables <code>Inflation</code>, <code>Unemployment</code>, and <code>Decade</code>, where the variable <code>Decade</code> is a categorical variable with the three different levels shown in the legend for the graph.</p>
<ol start="4" type="1">
<li><p>Inflation depends on Unemployment in a way that doesn’t change over time.</p></li>
<li><p><code>Inflation ~ Decade</code></p></li>
<li><p>** ~ <code>Inflation ~ Unemployment</code>**</p></li>
<li><p><code>Inflation ~ Unemployment + Decade</code></p></li>
<li><p><code>Inflation ~ Unemployment * Decade</code></p></li>
<li><p>Inflation changes with the decade, but doesn’t depend on Unemployment.</p></li>
<li><p>** ~ <code>Inflation ~ Decade</code>**</p></li>
<li><p><code>Inflation ~ Unemployment</code></p></li>
<li><p><code>Inflation ~ Unemployment + Decade</code></p></li>
<li><p><code>Inflation ~ Unemployment * Decade</code></p></li>
<li><p>Inflation depends on Unemployment in the same way every decade, but each decade introduces a new background inflation rate independent of Unemployment.</p></li>
<li><p><code>Inflation ~ Decade</code></p></li>
<li><p><code>Inflation ~ Unemployment</code></p></li>
<li><p>** ~ <code>Inflation ~ Unemployment + Decade</code>**</p></li>
<li><p><code>Inflation ~ Unemployment * Decade</code></p></li>
<li><p>Inflation depends on Unemployment in a way that differs from decade to decade.</p></li>
<li><p><code>Inflation ~ Decade</code></p></li>
<li><p><code>Inflation ~ Unemployment</code></p></li>
<li><p><code>Inflation ~ Unemployment + Decade</code></p></li>
<li><p>** ~ <code>Inflation ~ Unemployment * Decade</code>**</p></li>
</ol>
<hr>
<p>Whether a model examines the short-term or the long-term behavior is analogous to whether a partial change or a total change is being considered.</p>
<ol start="8" type="1">
<li><p>Suppose you wanted to study the long-term relationship between inflation and unemployment. Which of these is appropriate?</p></li>
<li><p>Hold <code>Decade</code> constant. (Partial change)</p></li>
<li><p><strong>Let <code>Decade</code> vary as it will. (Total change)</strong></p></li>
<li><p>Now suppose you want to study the short-term relationship. Which of these is appropriate?</p></li>
<li><p><strong>Hold <code>Decade</code> constant. (Partial change)</strong></p></li>
<li><p>Let <code>Decade</code> vary as it will. (Total change)</p></li>
</ol>
<hr>
</section>
<section id="sec-28-G" class="level2">
<h2 class="anchored" data-anchor-id="sec-28-G">28.G</h2>
<p>Consider <code>dag03</code>, involving three variables: <code>x</code>, <code>y</code>, <code>g</code></p>
<p>Let’s take <code>y</code> as the response variable, <code>x</code> as the explanatory variable of interest, and <code>g</code> as a covariate that we might or might not want to include in a model. Consequently, there are two model structures that we can choose between: <code>y ~ x</code> versus <code>y ~ x + g</code>.</p>
<ol type="1">
<li>Is there any causal path from <code>x</code> to <code>y</code> or vice versa?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>No.&nbsp;Even though <code>x</code> and <code>y</code> are connected to one another via <code>g</code>, the path from <code>x</code> to <code>y</code> (or vice versa) is not causal. There is no way to get from <code>x</code> to <code>y</code> (or vice versa) by starting on one of those two nodes and following the links in their causal direction.</p>
</div>
</div>
<ol start="2" type="1">
<li><p>Generate a sample of, say, size <span class="math inline">\(n=1000\)</span> from <code>dag03</code> and train each of the two models mentioned above on the sample. Examine the 95% confidence intervals on the coefficients and explain which model (if either) is suitable to show that <code>x</code> and <code>y</code> are connected, and which model (if either) shows that there is no causal path between <code>x</code> and <code>y</code>.</p></li>
<li><p>The nature of 95% confidence intervals means that even when the true coefficient is zero, 5% of the time the confidence interval will not include zero. In a class with 100 students, around 5 will see this failure to include zero. In order to avoid those students from being fooled by such accidental effects, feel free to analyze 2 or more samples.</p></li>
</ol>
<p>Regretably, in the real world, when working with data that have already been collected, you can’t use such multiple samples to check your work. So there is always that 5% chance that a real effect of size zero will produce a confidence interval that doesn’t include zero. This is one reason why replication of results is useful.</p>
<hr>
</section>
<section id="h" class="level2">
<h2 class="anchored" data-anchor-id="h">28.H</h2>
<p>This learning challenge is much like LC -<span class="citation" data-cites="28-G">@28-G</span>, but uses <code>dag11</code> instead of <code>dag03</code>.</p>
<ol type="1">
<li>Compare the graphs of <code>dag03</code> and <code>dag11</code>. (You can use <code>dag_draw()</code> to generate the graph.) Are the two DAGs equivalent or not? Describe what differences you see between the two graphs and explain whether those differences are sufficient to make the two DAGs causally different.</li>
</ol>
<p>Let’s take <code>y</code> as the response variable, <code>x</code> as the explanatory variable of interest, and <code>g</code> as a covariate that we might or might not want to include in a model. Consequently, there are two model structures that we can choose between: <code>y ~ x</code> versus <code>y ~ x + g</code>.</p>
<ol type="1">
<li>Is there any causal path from <code>x</code> to <code>y</code> or vice versa?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>No.&nbsp;Even though <code>x</code> and <code>y</code> are connected to one another via <code>g</code>, the path from <code>x</code> to <code>y</code> (or vice versa) is not causal. There is no way to get from <code>x</code> to <code>y</code> (or vice versa) by starting on one of those two nodes and following the links in their causal direction.</p>
</div>
</div>
<ol start="2" type="1">
<li><p>Generate a sample of, say, size <span class="math inline">\(n=1000\)</span> from <code>dag03</code> and train each of the two models mentioned above on the sample. Examine the 95% confidence intervals on the coefficients and explain which model (if either) is suitable to show that <code>x</code> and <code>y</code> are connected, and which model (if either) shows that there is no causal path between <code>x</code> and <code>y</code>.</p></li>
<li><p>Now look at the graph of <code>dag12</code> and speculate whether the models <code>x ~ y</code> and <code>x ~ y + g</code> will give equivalent results. (Don’t include node <code>h</code> in the models.) Write down your speculation. (No penalty for being wrong, it’s just a speculation!) Then, generate a sample from <code>dag12</code> and, looking at the 95% confidence intervals on the coefficients, explain whether your speculation was correct or not.</p></li>
</ol>
<hr>
<hr>
</section>
<section id="i" class="level2">
<h2 class="anchored" data-anchor-id="i">28.I</h2>
</section>
<section id="lesson-29" class="level2">
<h2 class="anchored" data-anchor-id="lesson-29">Lesson 29</h2>
</section>
<section id="sec-LC-29-A" class="level2">
<h2 class="anchored" data-anchor-id="sec-LC-29-A">29.A</h2>
<p>The `math300::Hill_racing” data frame records 2236 winning times (in seconds) in Scottish hill racing competitions. Consider this model of the winning time as a function of the race distance (km) and the total climb (meters):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(time <span class="sc">~</span> distance <span class="sc">+</span> climb, <span class="at">data=</span>Hill_racing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>model_eval()</code> function provides a convenient way to evaluate the model output (<code>.output</code>) for each of the rows in a data frame and, at the same time, calculates row-by-row residuals (<code>.resid</code>) and prediction errors (<code>.lwr</code> and <code>.upr</code>). <em>Make sure to take not of the starting periods on the names.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">model_eval</span>(mod) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  time distance climb  .output     .resid       .lwr     .upr
1 1630        6   240 1679.215  -49.21475  -29.56279 3387.992
2 1655        6   240 1679.215  -24.21475  -29.56279 3387.992
3 2391        6   240 1679.215  711.78525  -29.56279 3387.992
4 2351        6   240 1679.215  671.78525  -29.56279 3387.992
5 4151       14   660 4805.779 -654.77947 3097.10184 6514.457
6 3975       14   660 4805.779 -830.77947 3097.10184 6514.457</code></pre>
</div>
</div>
<p>The RMS residual from the model can be calculated this way:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">model_eval</span>(mod) <span class="sc">%&gt;%</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">rms =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>(.resid<span class="sc">^</span><span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       rms
1 870.4631</code></pre>
</div>
</div>
<ol type="1">
<li><p>What are the units of the RMS residual?</p></li>
<li><p>Modify the calculation to compute the sum-of-square residuals. Report the result numerically. Be sure to say what are the units.</p></li>
<li><p>What are the units of the effect size on time with respect to climb?</p></li>
<li><p>What are the units of the effect size on time with respect to climb?</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>RMS residual has the same units as the response variable. In this case, that’s the time to run the race, with units “seconds.”</p></li>
<li><p>SS residual has units that are the square of the respond variable, in this case “square-seconds.”</p></li>
<li><p>Recall that the effect size on the response with respect to an explanatory variable has the units of the response variable divided by the units of the explanatory variable. The <code>climb</code> variable has units of meters, so the effect size has units “seconds/meters.”</p></li>
<li><p>seconds/km</p></li>
</ol>
</div>
</div>
<hr>
</section>
<section id="lc-29.b" class="level2">
<h2 class="anchored" data-anchor-id="lc-29.b">LC 29.B</h2>
<p>Which of the following models are <strong>not</strong> nested within <code>time ~ distance + climb</code>?</p>
<ol type="a">
<li><code>time ~ 1</code></li>
<li><code>time ~ distance + sex</code></li>
<li><code>time ~ distance</code></li>
<li><code>time ~ climb</code></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The model <code>time ~ distance + sex</code> is not nested in <code>time ~ distance + climb</code>.</p>
<p>Note that <code>time ~ 1</code> is indeed nested in <code>time ~ distance + climb</code>. The <code>1</code> corresponds to the intercept.</p>
</div>
</div>
<hr>
</section>
<section id="c-3" class="level2">
<h2 class="anchored" data-anchor-id="c-3">29.C</h2>
<p>In LC -<a href="#sec-LC-29-A">Section&nbsp;75</a> you calculated the RMS residuals and the sum-of-square residuals by wrangling the results from <code>mod_eval()</code>. That’s a perfectly good way to do things, but the work becomes tedious when there are multiple models you want to compare.</p>
<p>For convenience, there is a <code>compare_model_residuals()</code> command, which can calculate the RMS residual or sum-of-square residual for each of a set of models. All the models must have the same response variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>Hill_racing <span class="sc">%&gt;%</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">compare_model_residuals</span>(time <span class="sc">~</span> <span class="dv">1</span>, </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>                          time <span class="sc">~</span> distance <span class="sc">+</span> climb, </span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>                          time <span class="sc">~</span> distance <span class="sc">+</span> climb <span class="sc">+</span> sex,</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>                          time <span class="sc">~</span> distance,</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">measure =</span> <span class="st">"RMS"</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>                          )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3122.4821  870.4631  775.2962 1189.7148</code></pre>
</div>
</div>
<p>It happens that all of the models in the command are a nested set. Re-order the models so that each model nests inside the following model, that is, from smaller model to bigger model.</p>
<ol type="1">
<li><p>Do the RMS residuals for the nested models increase or decrease when moving from a smaller model to a larger model?</p></li>
<li><p>You can calculate the sum-of-square residual by using the argument <code>measure="SS"</code>. Do the sum-of-square residuals for the nested models increas or decrease when moving from a smaller model to a larger model.</p></li>
<li><p>You can calculate R<sup>2</sup> by using the argument <code>measure="R2"</code>. Do the R<sup>2</sup> for the nested models increase or decrease when moving from a smaller model to a larger model.</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Decrease</li>
<li>Decrease</li>
<li>Increase. R<sup>2</sup> tells you how big the model output is compared to the response variable. 1-R<sup>2</sup> tells you how big the residuals are compared to the response variable.</li>
</ol>
</div>
</div>
<hr>
</section>
<section id="lc-29.d" class="level2">
<h2 class="anchored" data-anchor-id="lc-29.d">LC 29.D</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Still a draft
</div>
</div>
<div class="callout-body-container callout-body">
<p>Look at <code>dag07</code>. Notice that <code>d</code> is not connected to any of the other variables.</p>
<p>Generate a sample of size <span class="math inline">\(n=6\)</span>. Compare the sum of square residual (in sample) from the nested models <code>c ~ 1</code>, <code>c ~ a</code> <code>c ~ a + b</code>, and <code>c ~ a + b + d</code>. (Use the <code>compare_model_residuals()</code> using the argument <code>method="SS"</code>.</p>
<p>Which, if any, of the variables <code>a</code>, <code>b</code>, or <code>d</code> reduces the in-sample sum-of-squared residuals compared to the previous model.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_model_residuals</span>(dag07, c <span class="sc">~</span> <span class="dv">1</span>, c <span class="sc">~</span> a, c <span class="sc">~</span> a <span class="sc">+</span> b, c <span class="sc">~</span> a <span class="sc">+</span> b <span class="sc">+</span> d, </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">n=</span><span class="dv">6</span>, <span class="at">measure=</span><span class="st">"R2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0000000 0.6065123 0.5833351 0.9854472</code></pre>
</div>
</div>
</div>
</div>
<p>Out of sample, the useless covariate often <em>increases</em> the SS error.</p>
<hr>
<section id="lc-29.1" class="level2">
<h2 class="anchored" data-anchor-id="lc-29.1">LC 29.1</h2>
<p>In <code>dag04</code>, build models to predict <code>c</code> from the other variables. Does one of those variables “block” the others?</p>
<ul>
<li>Explain how you know this from your models. Try to give an answer in everyday language as well.</li>
<li>Repeat but use a very small sample size, say <span class="math inline">\(n=5\)</span>. Has your conclusion about blocking changed? Explain why.</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_model_residuals</span>(dag04, c<span class="sc">~</span> <span class="dv">1</span>, c <span class="sc">~</span> d, c<span class="sc">~</span> b <span class="sc">+</span> d, c <span class="sc">~</span> a <span class="sc">+</span> b <span class="sc">+</span> d, <span class="at">n=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.0007343 0.8410465 0.7984146 0.7117050</code></pre>
</div>
</div>
<p><code>d</code> seems to block effect of <code>a</code> and <code>b</code> on <code>c</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_model_residuals</span>(dag04, c<span class="sc">~</span> <span class="dv">1</span>, c <span class="sc">~</span> d, c<span class="sc">~</span> b <span class="sc">+</span> d, c <span class="sc">~</span> a <span class="sc">+</span> b <span class="sc">+</span> d, <span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9550914 0.8577920 0.9246427 1.4332908</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="lc-29.2" class="level2">
<h2 class="anchored" data-anchor-id="lc-29.2">LC 29.2</h2>
<p>We are using in-sample testing because that is often the case in the model-building stage. However, in the model-<strong>using</strong> stage, things are different. You will be making predictions of new cases, that is, out-of-sample.</p>
<p>For out-of-sample, when working with new data, it’s not just a matter of being tricked into thinking covariates are useful when they’re not. Using irrelevant covariates can be genuinely harmful to the predictions.</p>
<p>Compare these in-sample and out-of-sample results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">101</span>)</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_model_residuals</span>(dag07, d <span class="sc">~</span> <span class="dv">1</span>, d <span class="sc">~</span> c, d<span class="sc">~</span> b <span class="sc">+</span> c, d <span class="sc">~</span> a <span class="sc">+</span> b <span class="sc">+</span> c, <span class="at">n=</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in qt((1 - level)/2, df): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.965495 1.434434 1.641881 1.591050</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">101</span>)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">compare_model_residuals</span>(dag07, d <span class="sc">~</span> <span class="dv">1</span>, d <span class="sc">~</span> c, d<span class="sc">~</span> b <span class="sc">+</span> c, d <span class="sc">~</span> a <span class="sc">+</span> b <span class="sc">+</span> c, <span class="at">n=</span><span class="dv">4</span>, </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">testing =</span> <span class="st">"out-of-sample"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in qt((1 - level)/2, df): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.965495 1.434434 1.641881 1.591050</code></pre>
</div>
</div>
<p>What do you see in the results that tells you that incorporating irrelevant covariates hurts the out-of-sample predictions?</p>
<hr>
</section>
<section id="lc-29.3" class="level2">
<h2 class="anchored" data-anchor-id="lc-29.3">LC 29.3</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>openintro::teacher</code>. What’s the <code>base</code> pay difference between a teacher with an MA and a BA degree? What’s a confidence interval on this effect size? How does the confidence interval change if you include <code>years</code> as a covariate.</p>
</div>
</div>
<hr>
</section>
<section id="lc-29.4" class="level2">
<h2 class="anchored" data-anchor-id="lc-29.4">LC 29.4</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
In draft
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>openintro::census</code> Predict log personal income based on other variables. Eat variance using the <code>total_family_income</code> variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log10</span>(total_personal_income) <span class="sc">~</span> <span class="fu">log10</span>(age) <span class="sc">+</span> sex <span class="sc">+</span> marital_status <span class="sc">+</span> <span class="fu">log10</span>(total_family_income), <span class="at">data =</span> openintro<span class="sc">::</span>census <span class="sc">%&gt;%</span> <span class="fu">filter</span>(total_personal_income <span class="sc">&gt;</span> <span class="dv">0</span>, total_family_income <span class="sc">&gt;</span> <span class="dv">0</span>))</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mod)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: log10(total_personal_income)
                            Df Sum Sq Mean Sq  F value    Pr(&gt;F)    
log10(age)                   1  5.938  5.9383  35.6102 6.660e-09 ***
sex                          1  5.976  5.9758  35.8351 6.006e-09 ***
marital_status               5  4.302  0.8604   5.1596 0.0001464 ***
log10(total_family_income)   1 17.620 17.6198 105.6615 &lt; 2.2e-16 ***
Residuals                  306 51.028  0.1668                       
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_jitter</span>(total_personal_income <span class="sc">~</span> total_family_income <span class="sc">|</span> sex, </span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span>openintro<span class="sc">::</span>census <span class="sc">%&gt;%</span> <span class="fu">filter</span>(total_personal_income <span class="sc">&gt;</span> <span class="dv">3000</span>),</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">color=</span><span class="sc">~</span>marital_status, <span class="at">alpha=</span><span class="fl">0.3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_y_log10</span>(), <span class="fu">scale_x_log10</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Transformation introduced infinite values in continuous x-axis</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 20 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-90-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="section-18" class="level2">
<h2 class="anchored" data-anchor-id="section-18">29.5</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Still in draft
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>openintro::starbucks</code> where do the calories come from? Find effect size of, say, protein on calories. Then see what happens if you use carbohydrates as a covariate.</p>
<pre><code>
::: {.cell}

```{.r .cell-code}
lm( calories ~ protein, data = openintro::starbucks) %&gt;% confint()</code></pre>
<div class="cell-output cell-output-stdout">
<pre><code>                 2.5 %     97.5 %
(Intercept) 254.107446 322.072380
protein       2.616542   8.087778</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>( calories <span class="sc">~</span> fat <span class="sc">+</span> carb <span class="sc">+</span> fiber <span class="sc">+</span> protein, <span class="at">data =</span> openintro<span class="sc">::</span>starbucks) <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                2.5 %    97.5 %
(Intercept) -2.938079 13.605279
fat          8.591250  9.315766
carb         3.686593  3.997527
fiber       -1.418966  1.370022
protein      3.631695  4.364091</code></pre>
</div>
</div>
</div>
</section>
<section id="in-draft-8" class="level2 comment-warning">
<h2 class="anchored" data-anchor-id="in-draft-8">In draft</h2>
<p>Maybe come back to this in confounding lesson. Look for components that tend to go together</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(openintro<span class="sc">::</span>starbucks, <span class="fu">cor</span>(fat, protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.22347</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(openintro<span class="sc">::</span>starbucks, <span class="fu">cor</span>(fiber, protein))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.488564</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>( calories <span class="sc">~</span> fiber , <span class="at">data =</span> openintro<span class="sc">::</span>starbucks) <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 2.5 %    97.5 %
(Intercept) 276.119106 343.80739
fiber         1.923476  24.07453</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>( calories <span class="sc">~</span> protein, <span class="at">data =</span> openintro<span class="sc">::</span>starbucks) <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 2.5 %     97.5 %
(Intercept) 254.107446 322.072380
protein       2.616542   8.087778</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>( calories <span class="sc">~</span> protein <span class="sc">+</span> fiber, <span class="at">data =</span> openintro<span class="sc">::</span>starbucks) <span class="sc">%&gt;%</span> <span class="fu">confint</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 2.5 %     97.5 %
(Intercept) 247.891487 320.333514
protein       1.700777   7.996897
fiber        -8.099007  15.978382</code></pre>
</div>
</div>
</section>
<hr>
<section id="lesson-30" class="level2">
<h2 class="anchored" data-anchor-id="lesson-30">Lesson 30</h2>
</section>
<section id="section-19" class="level2">
<h2 class="anchored" data-anchor-id="section-19">30.1</h2>
<p>Dags with longer confounding pathways. Is there mixing when leaving out an element in the pathway. Mix up the directions of the arrows and show that the mixing occurs when the covariate is <em>included</em> in the model.</p>
<p>Regression to the mean example.</p>
<p>Collider?</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="lesson-31" class="level2">
<h2 class="anchored" data-anchor-id="lesson-31">Lesson 31</h2>
</section>
<section id="section-20" class="level2">
<h2 class="anchored" data-anchor-id="section-20">31.1</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="lesson-32" class="level2">
<h2 class="anchored" data-anchor-id="lesson-32">Lesson 32</h2>
</section>
<section id="section-21" class="level2">
<h2 class="anchored" data-anchor-id="section-21">32.1</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="lesson-33" class="level2">
<h2 class="anchored" data-anchor-id="lesson-33">Lesson 33</h2>
<p>See <code>medGPA</code> from the Stat2Data package. Maybe come back to this in Lesson 34.</p>
<p>Maybe <code>Data2Stats::FlightResponse</code></p>
<p>Maybe space shuttle Challenger o-ring data.</p>
</section>
<section id="section-22" class="level2">
<h2 class="anchored" data-anchor-id="section-22">33.1</h2>
<ol type="1">
<li>Convert probability to odds and log odds, and vice versa.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="xxx" class="level2">
<h2 class="anchored" data-anchor-id="xxx">33.XXX</h2>
<p>A major company in big trouble is planning to lay off 20% of its employees. You work in the personnel office and have constructed a multivariate model of the probability of an individual being laid off. The effect size of the different input factors in the model are as follows:</p>
<ul>
<li>age over 50 years: change in log-odds 1</li>
<li>software engineer: change in log-odds -0.5</li>
<li>pay level: change in log-odd rate 0.2 per $10,000 above the company average of $40K</li>
</ul>
<ol type="1">
<li><p>What are the odds of being laid off for an employee for whom you have no information about age, engineering capabilities, or pay level. -A- The risk of being laid off is 20% so the probability of not being laid off is 80%. The odds are therefore 20/80 = 0.25.</p></li>
<li><p>What are the log odds of an employee in (1) being laid off? -A- Simply the logarithm of the odds, so <span class="math inline">\(\log(0.25) = -1.4\)</span>.</p></li>
<li><p>Consider a 30-year old software engineer making $50,000 per year.</p>
<ul>
<li>What are the log odds of her being laid off? -A- At baseline, her log odds is -1.4. Being a software engineer, her log odds are lower by 0.5. But she makes more than the average pay by $10,000, which adds 0.2 to her log odds. Altogether, -1.4 - 0.5 + 0.2 = -1.7.</li>
<li>Translate the log odds into an absolute risk of her being laid off. -A- Undoing the logarithm on -1.7 gives an odds of 0.18, which corresponds to a probability of 0.18/(1 + 0.18) or 15%.</li>
</ul></li>
</ol>
<hr>
<p>In LC 24.2, we took as baseline inputs for [this online breast-cancer risk assessment model]((https://bcrisktool.cancer.gov/calculator.html), a 55-year-old, African-American woman who has never had a breast biopsy or any history of breast cancer, who doesn’t know her BRCA status, and whose close relatives have no history of breast cancer, whose first menstrual period was at age 13 and first child at age 23.</p>
<p>For this baseline case, the output of the model was a probability of 1.4% five-year risk of developing breast cancer. Finding out that one close relative has developed breast cancer elevates this risk to 2.2%.</p>
<p>These are absolute risks: probabilities. The effect size is 2.2 - 1.4 = 0.8 percentage points. When risks are specified as probabilities, differences in risks are in “percentage points.”</p>
<ol type="1">
<li><p>What <em>risk ratio</em> corresponds to the 1.4 to 2.2 change of risk? -A- This is a simple ratio: 2.2% / 1.4% which is 1.57.</p></li>
<li><p>Suppose (hypothetically) that the risks were ten times higher: 14% and 22%.</p>
<ol type="a">
<li>What would be the risk ratio? -A- Still 1.57.</li>
<li>What would be the percentage point change in absolute risk? -A- 8 percentage points.</li>
</ol></li>
<li><p>Put yourself in the place of the baseline woman who has just found out that a close relative developed breast cancer. Which way of reporting a change of risk is more pertinent to your personal life? -A- The change in absolute risk. Even though the risk ratios are the same in (1) and (2), the change in absolute risk is much greater in (2).</p></li>
</ol>
<hr>
</section>
<section id="lesson-34" class="level2">
<h2 class="anchored" data-anchor-id="lesson-34">Lesson 34</h2>
<p><code>Stat2Data::FaithfulFaces</code>. Come back to it concerning prevalence.</p>
</section>
<section id="section-23" class="level2">
<h2 class="anchored" data-anchor-id="section-23">34.1</h2>
<p>To illustrate how stratification is used to build a classifier, consider this very simple, unrealistically small, made-up data frame listing observations of animals:</p>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> species </th>
   <th style="text-align:left;"> size </th>
   <th style="text-align:left;"> color </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> reddish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> B </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> B </td>
   <td style="text-align:left;"> small </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>You are going to build classifiers using the data. The output of the classifier will be the probability that the species is A. The classifier itself will be a simple table: each row lists the different levels of the explanatory variable(s) the the classifier output (as a probability that the species is A).</p>
<ol type="1">
<li>Use just <code>size</code> as an explanatory variable. Since there are two levels for size, the classifier can take the form of a simple table, giving the proportion of rows for each of the two sizes. Fill in the table to reflect the data.</li>
</ol>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> size </th>
   <th style="text-align:left;"> prop_of_A </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> small </td>
   <td style="text-align:left;">  </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are three rows where the size is large, of which one is species A. The classifier output is thus 2/3 for large.</p>
<p>Similarly, there is only one row where the size is small, none of which are species A. The classifier output is 0/1 for small.</p>
</div>
</div>
<ol start="2" type="1">
<li>Repeat (1), but instead of “size”, use just “color” as an explanatory variable. ::: {.cell} ::: {.cell-output-display}</li>
</ol>

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> color </th>
   <th style="text-align:left;"> prop_of_A </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> reddish </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> brownish </td>
   <td style="text-align:left;">  </td>
  </tr>
</tbody>
</table>

</section>
</div>
</div>
<p>:::</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are three rows where the color is brownish, of which two are species A. The classifier output is thus 1/3 for brownish.</p>
<p>There is only one row where the color is reddish, and it is species A. The classifier output is 1/1 for reddish.</p>
</div>
</div>
<ol start="3" type="1">
<li>Again build a classifier, but use both color and size as explanatory variables.</li>
</ol>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> color </th>
   <th style="text-align:left;"> size </th>
   <th style="text-align:left;"> prop_of_A </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> reddish </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> reddish </td>
   <td style="text-align:left;"> small </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> brownish </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:left;"> brownish </td>
   <td style="text-align:left;"> small </td>
   <td style="text-align:left;">  </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is just one row in which color is reddish and size is large, and it is species A. The classifier output is thus 1/1.</p>
<p>There are two rows in which color is brownish and size is large, one of which is species A. The classifier output is thus 1/2.</p>
<p>There is one row in which color is brownish and size is small. It is species B. The classifier output is 1/1.</p>
<p>There are no rows in which color is reddish and size is small. A classifier output of 0/0 is meaningless. So our classifier has nothing to say for these inputs.</p>
</div>
</div>
<ol start="4" type="1">
<li>Finally, build the “null model”, a no-input classifier. This means there is just one group, which has all four rows. -A- Of the four rows, two are species A, so the classifier output is 2/4.</li>
</ol>
<hr>
</section>
<section id="section-24" class="level2">
<h2 class="anchored" data-anchor-id="section-24">34.2</h2>
<p>The graph below shows data on marital status versus age from National Health and Nutrition Evaluation Survey data. You can see that the probability of the various possibilities are a function of age.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'kernlab'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:mosaic':

    cross</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    alpha</code></pre>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/unnamed-chunk-98-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A very simple classifier can be constructed just by indicating at each age which marital status is the most likely, as seen in the figure below.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>maximum number of iterations reached -0.001660052 -0.001675416</code></pre>
</div>
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/ash-chew-kitchen-0-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A classifier output should be a probability, not a categorical level. On the blank graph below, sketch out a plausible form for probability vs age for each of three categorical levels shown in the above plot. (Hint: At an age where, say, “NeverMarried” is the categorical output, the probability for “NeverMarried” will be higher than the other categories.)</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/ash-chew-kitchen-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<!--answer-start-->
<p>Presumably the probability output for each category varies somewhat smoothly. There are two constraints:</p>
<ol type="1">
<li>At any age/sex, one probability will be the highest of the three. That one should correspond to the category shown in the first graph.</li>
<li>The probabilities should add up to 1.</li>
</ol>
<p>Here’s one possibility. Note that for females, the highest probability around age 80 is “widowed”.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="LC-list_files/figure-html/ash-chew-kitchen-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<!--answer-end-->
<hr>
<p>From CPS §32.6: <code>openintro::possum</code>. Let’s investigate the possum data set again. This time we want to model a binary outcome variable. As a reminder, the common brushtail possum of the Australia region is a bit cuter than its distant cousin, the American opossum. We consider 104 brushtail possums from two regions in Australia, where the possums may be considered a random sample from the population. The first region is Victoria, which is in the eastern half of Australia and traverses the southern coast. The second region consists of New South Wales and Queensland, which make up eastern and northeastern Australia.</p>
<p>We use logistic regression to differentiate between possums in these two regions. The outcome variable, called pop, takes value Vic when a possum is from Victoria and other when it is from New South Wales or Queensland. We consider five predictors: sex, head_l, skull_w, total_l, and tail_l.</p>
<p>Explore the data by making histograms or boxplots of the quantitative variables, and bar charts of the discrete variables.</p>
<ul>
<li>Are there any outliers that are likely to have a very large influence on the logistic regression model?</li>
<li>Build a logistic regression model with all the variables. Report a summary of the model.</li>
<li>Using the p-values decide if you want to remove a variable(s) and if so build that model.</li>
<li>For any variable you decide to remove, build a 95% confidence interval for the parameter.</li>
<li>Explain why the remaining parameter estimates change between the two models.</li>
<li>Write out the form of the model. Also identify which of the following variables are positively associated (when controlling for other variables) with a possum being from Victoria: head_l, skull_w, total_l, and tail_l.</li>
<li>Suppose we see a brushtail possum at a zoo in the US, and a sign says the possum had been captured in the wild in Australia, but it doesn’t say which part of Australia. However, the sign does indicate that the possum is male, its skull is about 63 mm wide, its tail is 37 cm long, and its total length is 83 cm. What is the reduced model’s computed probability that this possum is from Victoria? How confident are you in the model’s accuracy of this probability calculation?</li>
</ul>
<hr>
</section>
<section id="section-25" class="level2">
<h2 class="anchored" data-anchor-id="section-25">34.3</h2>
<p>The <code>HELPrct</code> date frame (in the <code>mosaicData</code> package) is about a clinical trial (that is, an experiment) conducted with adult inpatients recruited from a detoxification unit. The response variable of interest reflects the success or failure of the detox treatment, namely, did the patient continue use of the substance abused after the treatment.</p>
<p>Figure @ref(fig:giraffe-fall-door-1) shows the output of a simple classifier (maybe too simple!) of the response given these inputs: the average number of alcoholic drinks consumed per day in the past 30 day (before treatment); and the patient’s self-perceived level of social support from friends. (The scale for social support is zero to fourteen, with a higher number meaning more support.)</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="LC-list_files/figure-html/giraffe-fall-door-1-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Classifier based on data from a clinical trial</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ol type="1">
<li><p>What’s the probability of treatment failure for a patient who has 25 alcoholic drinks per day? Does the probability depend on the level of social support? -A- Probability of failure is 75%, and doesn’t depend on the level of social support.</p></li>
<li><p>For a patient at 0 to 10 alcoholic drinks per day, what’s the probability of treatment failure? Does the probability depend on the level of social support? -A- The probability of failure ranges from about 72% for those with no social support to 82% for those with high social support?</p></li>
<li><p>You are thinking about a friend who has roughly five alcoholic drinks per day. You are concerned that he will go on to substance abuse. Do the data from the clinical trial give good reason for your concern? Explain why or why not.</p></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>It’s always a good idea to be concerned for your friend, but the data reported here are not a basis for that concern. These data are from a population consisting of inpatients from a detoxification unit. These are people who have already shown strong substance abuse. The classifier is not generalizable to your friend, unless he is an inpatient from a detox unit.</p>
</div>
</div>
<ol start="4" type="1">
<li>Explain what’s potentially misleading about the y-axis scale selected for the plot.</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>The selected scale doesn’t include zero and so tends to over-emphasize what amount to small differences in the probability of failure.</p>
</div>
</div>
</section>
<section id="lesson-35" class="level2">
<h2 class="anchored" data-anchor-id="lesson-35">Lesson 35</h2>
</section>
<section id="section-26" class="level2">
<h2 class="anchored" data-anchor-id="section-26">35.1</h2>
<p>Given some classifier summaries, calculate the false-positive and false-negative rates as well as the sensitivity and specificity</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="q" class="level2">
<h2 class="anchored" data-anchor-id="q">35.Q</h2>
<p>TITLE GOES HERE: Customize the classifiers in (ref:ant-take-room) for a population in which species A is three times as common as species B.</p>
</section>
<section id="solution-66" class="level2 {callout-note}">
<h2 class="anchored" data-anchor-id="solution-66">Solution</h2>
<p>Follow the same procedure as in (ref:ant-take-room), but duplicate each of the A rows two times, so that the data show a world in which A is three times as common as B. That is,</p>
<div class="cell">
<div class="cell-output-display">

<table>
 <thead>
  <tr>
   <th style="text-align:left;"> species </th>
   <th style="text-align:left;"> size </th>
   <th style="text-align:left;"> color </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> reddish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> reddish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> reddish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> B </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> B </td>
   <td style="text-align:left;"> small </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
  <tr>
   <td style="text-align:left;"> A </td>
   <td style="text-align:left;"> large </td>
   <td style="text-align:left;"> brownish </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>For the classifier using just size as an explanatory variable … There are 7 rows for which size is large. Of these six are species A so the classifier output is 6/7. For size small, there is just one row, which is B, so the classifier output is 0/1.</p>
<p>For the classifier using just color as an explanatory variable … There are five rows for which color is brownish. Of these, 2 are species A. So the classifier output is 2/5 for brownish. For reddish, the classifier output is 3/3.</p>
</section>
<hr>
<section id="r-2" class="level2">
<h2 class="anchored" data-anchor-id="r-2">35.R</h2>
<p>The two tables below are different summaries of the Univ. of California Berkeley graduate admissions data from the 197e fall quarter. (Data frame: <code>UCB_applicants</code>) Each of the tables is about conditional probabilities about admission and sex.</p>
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Table A</caption>
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> admitted </th>
   <th style="text-align:right;"> rejected </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 31.7 </td>
   <td style="text-align:right;"> 46.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 68.3 </td>
   <td style="text-align:right;"> 53.9 </td>
  </tr>
</tbody>
</table>

</div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Table B</caption>
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> female </th>
   <th style="text-align:right;"> male </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> admitted </td>
   <td style="text-align:right;"> 30.4 </td>
   <td style="text-align:right;"> 44.5 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> rejected </td>
   <td style="text-align:right;"> 69.6 </td>
   <td style="text-align:right;"> 55.5 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<ol type="1">
<li>Which table displays p(sex given admit)?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution Table
</div>
</div>
<div class="callout-body-container callout-body">
<p>A</p>
</div>
</div>
<ol start="2" type="1">
<li>Which table displays p(admit given sex)?</li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Table B</p>
</div>
</div>
<ol start="3" type="1">
<li>Which of these statements is true?
<ol type="a">
<li>Table A shows that admitted students are more likely to be male.</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>True</p>
</div>
</div>
<pre><code>b. Table A shows that rejected students are more likely to be male. </code></pre>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>True</p>
</div>
</div>
<pre><code>c. Table A shows that females are less likely to be admitted than rejected. </code></pre>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution False.
</div>
</div>
<div class="callout-body-container callout-body">
<p>There’s nothing in Table A to tell us what fraction of applicants were admitted. Because table A stratifies by admitted/rejected, we don’t know how large those two groups are with respect to one another.</p>
</div>
</div>
<pre><code>d. Table B shows that admitted students are more likely to be male. </code></pre>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution False.
</div>
</div>
<div class="callout-body-container callout-body">
<p>Table B is stratified on female/male. As a result, there’s no information in Table B about what fraction of applicants is male.</p>
</div>
</div>
<pre><code>e. Table B shows that females are less likely to be admitted than males. </code></pre>
<ol start="4" type="1">
<li>Suppose you are interested in the possibility of discrimination against women in graduate admissions (in Berkeley in 1973). Which of these questions is the right one to ask, and which table gives you the information needed to answer the question?
<ol type="a">
<li>What is the probability of an admitted student being a female compared to the probability of a rejected student being a female?</li>
</ol></li>
</ol>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution False.
</div>
</div>
<div class="callout-body-container callout-body">
<p>The question is about the relative admissions probability of females and males.</p>
</div>
</div>
<pre><code>b. What is the probability of a female applicant being admitted compared to the probability that an admitted student is male? </code></pre>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution False. You want to compare like with like. The group involved in “the probability of a female student being admitted” is females, whereas the group involved in “the probability that an admitted student is male” is admitted students. There’s little if any meaning in comparing a probability among the group of females to a probability among group of admitted students.
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<pre><code>c. What is the probability of  a female applicant being admitted compared to the probability of a male applicant being admitted? </code></pre>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution True.
</div>
</div>
<div class="callout-body-container callout-body">
<p>We want to compare two groups: females and males. Here, we’re comparing the probability of being admitted in each of the comparison groups. Table <strong>B</strong> is formatted to enable this comparison.</p>
</div>
</div>
</section>
<section id="lesson-36" class="level2">
<h2 class="anchored" data-anchor-id="lesson-36">Lesson 36</h2>
</section>
<section id="section-27" class="level2">
<h2 class="anchored" data-anchor-id="section-27">36.1</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="lesson-37" class="level2">
<h2 class="anchored" data-anchor-id="lesson-37">Lesson 37</h2>
<p>Ideas:</p>
<ul>
<li>Use the <code>openintro::mlbbat10</code> baseball data to look at on-base performace as a function of hitting position. How many p-values are being reported from the regression report? Bonferroni adjustment. Compare to ANOVA format which looks at the term as a whole. Also look at the large number of indicators of batting performance. How many different tests could we perform?</li>
</ul>
</section>
<section id="section-28" class="level2">
<h2 class="anchored" data-anchor-id="section-28">37.1</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>
</section>
<section id="lesson-38" class="level2">
<h2 class="anchored" data-anchor-id="lesson-38">Lesson 38</h2>
</section>
<section id="section-29" class="level2">
<h2 class="anchored" data-anchor-id="section-29">38.1</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Solution
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<hr>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>{Based on an example from Judea Pearl (2000) <em>Causality: Models, Reasoning, and Inference</em>, Cambridge Univ. Press, p.&nbsp;175}<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>